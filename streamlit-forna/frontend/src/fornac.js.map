{"version":3,"file":"fornac.js","mappings":"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AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,UAAU;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,eAAe,mBAAO,CAAC,GAAW;AAClC,gBAAgB,mBAAO,CAAC,GAAS;AACjC;AACA;AACA;AACA;;AAEA,UAAc;AACd,yBAAkB;AAClB,UAAyB;;AAEzB;AACA,yBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;;AAEA;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,UAAyB;AACvC,iDAAiD,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,eAAe;AACxC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,yBAAyB,QAAQ;AACjC;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,qBAAqB,WAAW,GAAG,IAAI;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,gBAAgB,WAAW,GAAG,IAAI,KAAK,aAAa;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;;AAEA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,KAAK,mDAAmD,cAAc;AACzF,GAAG;AACH;AACA;AACA,+BAA+B,IAAI;AACnC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,MAAM,aAAa,SAAS;AACtD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,SAAS,gBAAgB;AACzB,cAAc,oBAAoB,EAAE,IAAI;AACxC;AACA,YAAY,gBAAgB,EAAE,IAAI;AAClC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,GAAG,SAAS,GAAG,KAAK,qBAAqB,EAAE,EAAE;AACpE,QAAQ;AACR,yBAAyB,GAAG,KAAK,yBAAyB,EAAE,EAAE;AAC9D,mBAAmB,yBAAyB,EAAE,EAAE;AAChD;AACA,MAAM;AACN,oBAAoB,IAAI,EAAE,GAAG,SAAS,IAAI,EAAE,EAAE;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0CAA0C,cAAc,SAAS,OAAO;AACxE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,YAAY;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACzjEA;AACA;;;;;;;ACDA;AACA,kBAAkB;;;;;;;ACDlB;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS,WAAW;;AAEpB;AACA;AACA;AACA,SAAS,WAAW;;AAEpB;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA,SAAS,WAAW;;AAEpB;AACA;AACA,SAAS,UAAU;;AAEnB;AACA;;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAoC;;;;;;;;;ACtBpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,GAAM;;AAEzB,WAAW,+BAA+B;AAC1C;AACA,aAAa,MAAM;AACnB,sBAAsB,MAAM;AAC5B;AACA;AACA,CAAC;;AAED,WAAW,yCAAyC;AACpD;AACA,aAAa,MAAM;AACnB,uBAAuB,MAAM;AAC7B;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AClGA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AClBA,4CAAe,cAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,yCAAyC;;ACArG;;AAE/B;AACA,qCAAqC,KAAK;AAC1C;;AAEA,2DAAe,QAAQ;;ACNc;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,gBAAgB,SAAS;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,0gBAA0gB;AAC1gB;AACA;AACA;AACA;;AAEA,OAAO,oBAAQ;AACf;AACA;;AAEA;AACA;;AAEA,4DAAe,SAAS;;AC7BG;AACY,CAAC;AACxC;AACA;AACA;;AAEA;;AAEA,eAAe;;;AAGf;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;;AAEA;AACA,sDAAsD,GAAG;;AAEzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;AAGA,wEAAwE;AACxE;;AAEA,4EAA4E;;AAE5E,8DAA8D;;AAE9D;AACA;AACA,IAAI;AACJ;;;AAGA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;;AAExB,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA,uBAAuB;;AAEvB,oCAAoC;;AAEpC,8BAA8B;;AAE9B,kCAAkC;;AAElC,4BAA4B;;AAE5B,kBAAkB,OAAO;AACzB;AACA;;AAEA,gBAAgB,qBAAS;AACzB;;AAEA,qDAAe,EAAE;;AC9FoB;;AAErC;AACA,OAAO,oBAAQ;AACf;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA,qBAAqB;;AAErB;AACA,qBAAqB;;AAErB;AACA,qBAAqB;;AAErB;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wDAAe,KAAK;;AClCmB;AACR;;AAE/B;AACA,2CAA2C;;AAE3C;;AAEA,kBAAkB,gBAAgB;AAClC;AACA;;AAEA;AACA;;AAEO;AACA;AACP,6BAAe,SAAS,IAAC;AACzB;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,iBAAK;AACvB;;AAEA;AACA;AACA,MAAM;AACN;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,QAAQ;AAC9B;AACA;;AAEA;AACA;;AAEA,WAAW,qBAAS;AACpB,IAAI;;;AAGJ;AACA,8BAA8B;AAC9B,IAAI,eAAe;;;AAGnB;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;;AAEnD;;AAEA,oBAAoB,gBAAgB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","sources":["webpack://fornac/webpack/universalModuleDefinition","webpack://fornac/./src/naview/connection.js","webpack://fornac/./src/naview/loop.js","webpack://fornac/./src/naview/region.js","webpack://fornac/./node_modules/base64-js/index.js","webpack://fornac/./node_modules/buffer/index.js","webpack://fornac/./src/d3-context-menu.css?fe1f","webpack://fornac/./src/fornac.css?7f8e","webpack://fornac/./node_modules/ieee754/index.js","webpack://fornac/./node_modules/slugid/index.js","webpack://fornac/./node_modules/slugid/slugid.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/rng.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/regex.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/validate.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/v1.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/parse.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/v35.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/md5.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/v3.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/v4.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/v5.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/nil.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/version.js","webpack://fornac/./node_modules/uuid/dist/esm-browser/index.js","webpack://fornac/external umd \"d3\"","webpack://fornac/webpack/bootstrap","webpack://fornac/webpack/runtime/compat get default export","webpack://fornac/webpack/runtime/define property getters","webpack://fornac/webpack/runtime/global","webpack://fornac/webpack/runtime/hasOwnProperty shorthand","webpack://fornac/webpack/runtime/make namespace object","webpack://fornac/webpack/runtime/publicPath","webpack://fornac/./src/img/play.svg","webpack://fornac/./src/d3-context-menu.js","webpack://fornac/./src/rnautils.js","webpack://fornac/./src/rnagraph.js","webpack://fornac/./src/simplernaplot.js","webpack://fornac/./src/naview/radloop.js","webpack://fornac/./src/naview/base.js","webpack://fornac/./src/naview/naview.js","webpack://fornac/./src/fornac.js","webpack://fornac/./src/rnaplot.js","webpack://fornac/./src/rnatreemap.js","webpack://fornac/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fornac\"] = factory(require(\"d3\"));\n\telse\n\t\troot[\"fornac\"] = factory(root[\"d3\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__990__) => {\nreturn ","import {Loop} from './loop.js';\nimport {Region} from './region.js';\n\nexport function Connection() {\n\tthis.loop = new Loop();\n\tthis.region = new Region();\n\t// Start and end form the 1st base pair of the region.\n\tthis.start = null;\n    this.end = null;\n\tthis.xrad = null;\n    this.yrad = null;\n    this.angle = null;\n\t// True if segment between this connection and the\n\t// next must be extruded out of the circle\n\tthis.extruded = null;\n\t// True if the extruded segment must be drawn long.\n\tthis.broken = null;\n\n\tthis._isNull = false;\n}\n\nConnection.prototype.isNull = function(){\n\treturn this._isNull;\n}\n\nConnection.prototype.setNull = function(isNull){\n\tthis._isNull = isNull;\n}\n\nConnection.prototype.getLoop = function(){\n\treturn this.loop;\n}\n\nConnection.prototype.setLoop = function(loop) {\n\tthis.loop = loop;\n}\n\nConnection.prototype.getRegion = function(){\n\treturn this.region;\n}\n\nConnection.prototype.setRegion = function(region){\n\tthis.region = region;\n}\n\nConnection.prototype.getStart = function(){\n\treturn this.start;\n}\n\nConnection.prototype.setStart = function(start) {\n\tthis.start = start;\n}\n\nConnection.prototype.getEnd = function(){\n\treturn this.end;\n}\n\nConnection.prototype.setEnd = function(end){\n\tthis.end = end;\n}\n\nConnection.prototype.getXrad = function(){\n\treturn this.xrad;\n}\n\nConnection.prototype.setXrad = function(xrad){\n\tthis.xrad = xrad;\n}\n\nConnection.prototype.getYrad = function(){\n\treturn this.yrad;\n}\n\nConnection.prototype.setYrad = function(yrad) {\n\tthis.yrad = yrad;\n}\n\nConnection.prototype.getAngle = function(){\n\treturn this.angle;\n}\n\nConnection.prototype.setAngle = function(angle){\n\tthis.angle = angle;\n}\n\nConnection.prototype.isExtruded = function(){\n\treturn this.extruded;\n}\n\nConnection.prototype.setExtruded = function(extruded){\n\tthis.extruded = extruded;\n}\n\nConnection.prototype.isBroken = function(){\n\treturn this.broken;\n}\n\nConnection.prototype.setBroken = function(broken){\n\tthis.broken = broken;\n}\n","import {Connection} from './connection.js';\n\nexport function Loop() {\n\tthis.nconnection = null;\n\tthis.connections = [];\n\tthis._connections = [];\n\tthis.number = null;\n\tthis.depth = null;\n\tthis.mark = null;\n\tthis.x = null;\n    this.y = null;\n    this.radius = null;\n}\n\nLoop.prototype.getNconnection = function() {\n\treturn this.nconnection;\n}\n\nLoop.prototype.setNconnection = function(nconnection) {\n\tthis.nconnection = nconnection;\n}\n\nLoop.prototype.setConnection = function(i, c){\n\tif (c != null){\n\t\tthis._connections[i] = c;\n    }\n\telse {\n\t\tif (!this._connections[i]){\n\t\t\tthis._connections[i] = new Connection();\n\t\t}\n\t\tthis._connections[i].setNull(true);\n\t}\n}\n\nLoop.prototype.getConnection = function(i){\n\tvar Connection = require(\"./connection\");\n\tif (!this._connections[i]){\n        this._connections[i] = new Connection();\n    }\n\tvar c = this._connections[i];\n\tif (c.isNull()){\n\t\treturn null;\n    }\n\telse {\n\t\treturn c;\n    }\n}\n\nLoop.prototype.addConnection = function(i, c){\n\tthis._connections.push(c);\n}\n\nLoop.prototype.getNumber = function(){\n\treturn this.number;\n}\n\nLoop.prototype.setNumber = function(number){\n\tthis.number = number;\n}\n\nLoop.prototype.getDepth = function(){\n\treturn this.depth;\n}\n\nLoop.prototype.setDepth = function(depth){\n\tthis.depth = depth;\n}\n\nLoop.prototype.isMark = function(){\n\treturn this.mark;\n}\n\nLoop.prototype.setMark = function(mark){\n\tthis.mark = mark;\n}\n\nLoop.prototype.getX = function(){\n\treturn this.x;\n}\n\nLoop.prototype.setX = function(x){\n\tthis.x = x;\n}\n\nLoop.prototype.getY = function(){\n\treturn this.y;\n}\n\nLoop.prototype.setY = function(y){\n\tthis.y = y;\n}\n\nLoop.prototype.getRadius = function(){\n\treturn this.radius;\n}\n\nLoop.prototype.setRadius = function(radius){\n\tthis.radius = radius;\n}\n","export function Region() {\n\tthis._start1 = null;\n    this._end1 = null;\n    this._start2 = null;\n    this._end2 = null;\n}\n\nRegion.prototype.getStart1 = function(){\n\treturn this._start1;\n}\n\nRegion.prototype.setStart1 = function(start1){\n\tthis._start1 = start1;\n}\n\nRegion.prototype.getEnd1 = function(){\n\treturn this._end1;\n}\n\nRegion.prototype.setEnd1 = function(end1){\n\tthis._end1 = end1;\n}\n\nRegion.prototype.getStart2 = function(){\n\treturn this._start2;\n}\n\nRegion.prototype.setStart2 = function(start2){\n\tthis._start2 = start2;\n}\n\nRegion.prototype.getEnd2 = function(){\n\treturn this._end2;\n}\n\nRegion.prototype.setEnd2 = function(end2){\n\tthis._end2 = end2;\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// extracted by extract-css-chunks-webpack-plugin\nmodule.exports = {};","// extracted by extract-css-chunks-webpack-plugin\nmodule.exports = {\"nodeStrokeWidth\":\"0.8\",\"directionArrowSize\":\"6\",\"directionArrowWidth\":\"0.7\",\"node\":\"fornac-node\",\"directionArrow\":\"fornac-directionArrow\",\"plot\":\"fornac-plot\",\"selectedNode\":\"fornac-selectedNode\",\"nodeLabel\":\"fornac-nodeLabel\",\"link\":\"fornac-link\",\"plotLabel\":\"fornac-plotLabel\",\"transparent\":\"fornac-transparent\",\"dragLine\":\"fornac-dragLine\",\"mouseEventHelper\":\"fornac-mouseEventHelper\"};","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2014 Jonas Finnemann Jensen\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nmodule.exports = require('./slugid');\n","// The MIT License (MIT)\n//\n// Copyright (c) 2014 Jonas Finnemann Jensen\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nvar uuid = require('uuid');\n\n/** @type {(bytes: Uint8Array) => string} */\nvar toBase64 = (() => {\n  if (typeof Buffer !== 'undefined') {\n    return (bytes) => Buffer.from(bytes).toString('base64');\n  }\n  return (bytes) => btoa(String.fromCharCode(...bytes));\n})();\n\n/** @type {(base64: string) => Uint8Array | Buffer} */\nvar fromBase64 = (() => {\n  if (typeof Buffer !== 'undefined') {\n    return (base64) => Buffer.from(base64, 'base64');\n  }\n  return (base64) => Uint8Array.from(atob(base64), c => c.charCodeAt(0));\n})();\n\n/**\n * Returns the given uuid as a 22 character slug. This can be a regular v4\n * slug or a \"nice\" slug.\n */\nexports.encode = function(uuid_) {\n  var bytes   = uuid.parse(uuid_);\n  var base64 = toBase64(bytes);\n  var slug = base64\n              .replace(/\\+/g, '-')  // Replace + with - (see RFC 4648, sec. 5)\n              .replace(/\\//g, '_')  // Replace / with _ (see RFC 4648, sec. 5)\n              .substring(0, 22);    // Drop '==' padding\n  return slug;\n};\n\n/**\n * Returns the uuid represented by the given v4 or \"nice\" slug\n */\nexports.decode = function(slug) {\n  var base64 = slug\n                  .replace(/-/g, '+')\n                  .replace(/_/g, '/')\n                  + '==';\n  return uuid.stringify(fromBase64(base64));\n};\n\n/**\n * Returns a randomly generated uuid v4 compliant slug\n */\nexports.v4 = function() {\n  var bytes   = uuid.v4(null, new Uint8Array(16));\n  var base64 = toBase64(bytes);\n  var slug = base64\n              .replace(/\\+/g, '-')  // Replace + with - (see RFC 4648, sec. 5)\n              .replace(/\\//g, '_')  // Replace / with _ (see RFC 4648, sec. 5)\n              .substring(0, 22);    // Drop '==' padding\n  return slug;\n};\n\n/**\n * Returns a randomly generated uuid v4 compliant slug which conforms to a set\n * of \"nice\" properties, at the cost of some entropy. Currently this means one\n * extra fixed bit (the first bit of the uuid is set to 0) which guarantees the\n * slug will begin with [A-Za-f]. For example such slugs don't require special\n * handling when used as command line parameters (whereas non-nice slugs may\n * start with `-` which can confuse command line tools).\n *\n * Potentially other \"nice\" properties may be added in future to further\n * restrict the range of potential uuids that may be generated.\n */\nexports.nice = function() {\n  var bytes   = uuid.v4(null, new Uint8Array(16));\n  bytes[0] = bytes[0] & 0x7f;  // unset first bit to ensure [A-Za-f] first char\n  var base64 = toBase64(bytes);\n  var slug = base64\n              .replace(/\\+/g, '-')  // Replace + with - (see RFC 4648, sec. 5)\n              .replace(/\\//g, '_')  // Replace / with _ (see RFC 4648, sec. 5)\n              .substring(0, 22);    // Drop '==' padding\n  return slug;\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","module.exports = __WEBPACK_EXTERNAL_MODULE__990__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","export default __webpack_public_path__ + \"02188894d5236b1517df3210b79c2a7f.svg\";","import './d3-context-menu.css';\nimport ArrowIcon from './img/play.svg';\n\nimport d3 from 'd3';\nimport slugid from 'slugid';\n\nexport function contextMenu(menu, opts) {\n    let previouslyMouseUp = false;\n    let clickAway = () => {};\n    let uid = slugid.nice();\n    let rootElement = null;\n    let orientation = 'right';   // display the menu to the right of the mouse click\n                                 // or parent elemement\n    let initialPos = null;\n    let parentStart = null;\n\n    var openCallback,\n        closeCallback;\n\n    if (typeof opts === 'function') {\n        openCallback = opts;\n    } else {\n        opts = opts || {};\n        openCallback = opts.onOpen;\n        closeCallback = opts.onClose;\n    }\n\n    if ('rootElement' in opts)\n        rootElement = opts['rootElement']\n\n    if ('pos' in opts) {\n        // do we want to place this menu somewhere specific?\n        initialPos = opts.pos;\n    }\n\n    if ('orientation' in opts) {\n        orientation = opts.orientation;\n    }\n\n    if ('parentStart' in opts) {\n        parentStart = opts.parentStart;\n    }\n\n    // create the div element that will hold the context menu\n    d3.selectAll('.d3-context-menu-' + uid).data([1])\n        .enter()\n        .append('div')\n        .classed('d3-context-menu', true)\n        .classed('d3-context-menu-' + uid, true)\n\n    // close menu\n    d3.select('body').on('click.d3-context-menu-' + uid, function() {\n        if (previouslyMouseUp) {\n            previouslyMouseUp = false;\n            return;\n        }\n       console.log('body click close');\n\n        d3.select('.d3-context-menu-' + uid).style('display', 'none');\n       orientation = 'right';\n\n        if (closeCallback) {\n            closeCallback();\n        }\n    });\n\n    // this gets executed when a contextmenu event occurs\n    return function(data, index, pMouseUp=false,\n                    clickAwayFunc = function() { } ) {\n        var elm = this;\n        var contextMenuPos = null;\n        let mousePos = null;\n        let currentThis = this;\n\n        if (rootElement == null)\n            mousePos = d3.mouse(this);\n        else\n            mousePos = d3.mouse(rootElement); // for recursive menus, we need the mouse\n                                              // position relative to another element\n\n        clickAway = clickAwayFunc;\n        let openChildMenuUid = null;\n\n        previouslyMouseUp = pMouseUp;\n\n        d3.selectAll('.d3-context-menu-' + uid).html('');\n        var list = d3.selectAll('.d3-context-menu-' + uid)\n            .on('contextmenu', function(d) {\n                console.log('context-menu close');\n                d3.select('.d3-context-menu-' + uid).style('display', 'none'); \n                orientation = 'right';\n\n                d3.event.preventDefault();\n                d3.event.stopPropagation();\n            })\n            .append('ul');\n\n        list.selectAll('li').data(typeof menu === 'function' ? menu(data) : menu).enter()\n            .append('li')\n            .attr('class', function(d) {\n                console.log('d:', d);\n                var ret = '';\n                if (d.divider) {\n                    ret += ' is-divider';\n                }\n                if (d.disabled) {\n                    ret += ' is-disabled';\n                }\n                if (!d.action) {\n                    ret += ' is-header';\n                }\n                if ('children' in d) {\n                    ret += ' d3-context-menu-recursive';\n                }\n                return ret;\n            })\n            .html(function(d) {\n                if (d.divider) {\n                    return '<hr>';\n                }\n                if (!d.title) {\n                    console.error('No title attribute set. Check the spelling of your options.');\n                }\n                return (typeof d.title === 'string') ? d.title : d.title(data);\n            })\n            .on('click', function(d, i) {\n                if (d.disabled) return; // do nothing if disabled\n                if (!d.action) return; // headers have no \"action\"\n                d.action(elm, data, index, mousePos);\n                console.log('click close');\n\n                // close all context menus\n                d3.selectAll('.d3-context-menu').style('display', 'none');\n                orientation = 'right';\n\n                if (closeCallback) {\n                    closeCallback();\n                }\n            })\n            .on('mouseenter', function(d, i) {\n                d3.select(this)\n                    .classed('d3-context-menu-selected', true)\n\n                if (openChildMenuUid != null) {\n                    // there's a child menu open\n\n                    // unselect all items\n                    d3.select('.d3-context-menu-' + uid)\n                        .selectAll('li')\n                        .classed('d3-context-menu-selected', false);\n\n                    if (typeof d.children == 'undefined') {\n                        console.log(\"no children close\");\n                        // no children, so hide any open child menus\n                        d3.select('.d3-context-menu-' + openChildMenuUid)\n                        .style('display', 'none');\n\n                        openChildMenuUid = null;\n                        return;\n                    }\n\n                    if (d.childUid == openChildMenuUid) {\n                        // the correct child menu is already open\n                        return;\n\n                    } else {\n                        // need to open a different child menu\n                        console.log('open different child menu close');\n                        \n                        // close the already open one\n                        d3.select('.d3-context-menu-' + openChildMenuUid)\n                        .style('display', 'none');\n\n                        openChildMenuUid = null;\n\n                    }\n                }             \n\n                // there should be no menu open right now\n                if (typeof d.children != 'undefined') {\n                    let boundingRect = this.getBoundingClientRect();\n\n                    let childrenContextMenu = null\n                    if (orientation == 'left') {\n                        childrenContextMenu = contextMenu(d.children, {'rootElement': currentThis,\n                              'pos': [ boundingRect.left + window.pageXOffset,\n                                    boundingRect.top - 2 + window.pageYOffset],\n                        'orientation': 'left'});\n                    } else {\n                        childrenContextMenu = contextMenu(d.children, \n                                      {\n                                          'pos': [ boundingRect.left + boundingRect.width + window.pageXOffset,\n                                                boundingRect.top - 2 + window.pageYOffset],\n                                       'rootElement': currentThis,\n                                    'parentStart': [boundingRect.left + window.pageXOffset,\n                                      boundingRect.top - 2 + window.pageYOffset]});\n                    }\n\n                    d.childUid = childrenContextMenu.apply(this, [data,i,true,\n                                                           function() { }]);\n                    openChildMenuUid = d.childUid;\n                }\n\n\n                d3.select(this)\n                    .classed('d3-context-menu-selected', true)\n            \n            })\n            .on('mouseleave', function(d, i) {\n\n                if (openChildMenuUid == null) {\n                    d3.select(this)\n                        .classed('d3-context-menu-selected', false);\n                }\n            });\n\n            list.selectAll('.d3-context-menu-recursive')\n            .append('img')\n            .attr('src', ArrowIcon)\n            .attr('width', '14px')\n            .attr('height', '14px')\n            .style('position', 'absolute')\n            .style('right', '5px')\n            ;\n\n        // the openCallback allows an action to fire before the menu is displayed\n        // an example usage would be closing a tooltip\n        if (openCallback) {\n            if (openCallback(data, index) === false) {\n                return uid;\n            }\n        }\n\n        let contextMenuSelection = d3.select('.d3-context-menu-' + uid)\n            .style('display', 'block');\n\n        if (initialPos == null) {\n            d3.select('.d3-context-menu-' + uid)\n            .style('left', (d3.event.pageX - 2) + 'px')\n            .style('top', (d3.event.pageY - 2) + 'px')\n        } else {\n            d3.select('.d3-context-menu-' + uid)\n            .style('left', initialPos[0] + 'px')\n            .style('top', initialPos[1] + 'px')\n        }\n\n        // check if the menu disappears off the side of the window\n        let boundingRect = contextMenuSelection.node().getBoundingClientRect();\n\n        if (boundingRect.left + boundingRect.width > window.innerWidth || orientation == 'left') {\n            orientation = 'left';\n\n            // menu goes of the end of the window, position it the other way\n            if (initialPos == null) {\n                // place the menu where the user clicked\n                d3.select('.d3-context-menu-' + uid)\n                .style('left', (d3.event.pageX - 2 - boundingRect.width) + 'px')\n                .style('top', (d3.event.pageY - 2) + 'px')\n            } else {\n                if (parentStart != null) {\n                    d3.select('.d3-context-menu-' + uid)\n                    .style('left', (parentStart[0] - boundingRect.width) + 'px')\n                    .style('top', parentStart[1] + 'px')\n                } else {\n                    d3.select('.d3-context-menu-' + uid)\n                    .style('left', (initialPos[0] - boundingRect.width) + 'px')\n                    .style('top', initialPos[1] + 'px')\n                }\n            }\n            \n        }\n\n        // display context menu\n\n        if (previouslyMouseUp)\n            return uid;\n\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n        //d3.event.stopImmediatePropagation();\n        //\n        return uid;\n    };\n};\n","var numberSort = function(a,b) { return a - b; };\n\nexport function arraysEqual(a, b) {\n    // courtesy of \n    // http://stackoverflow.com/questions/3115982/how-to-check-if-two-arrays-are-equal-with-javascript\n  if (a === b) return true;\n  if (a === null || b === null) return false;\n  if (a.length != b.length) return false;\n\n  // If you don't care about the order of the elements inside\n  // the array, you should sort both arrays here.\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nexport function RNAUtilities() {\n    var self = this;\n\n    // the brackets to use when constructing dotbracket strings\n    // with pseudoknots\n    self.bracketLeft =  \"([{<ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\");\n    self.bracketRight = \")]}>abcdefghijklmnopqrstuvwxyz\".split(\"\");\n\n    self.inverseBrackets = function(bracket) {\n        var res = {};\n        for (var i = 0; i < bracket.length; i++) {\n            res[bracket[i]] = i;\n        }\n        return res;\n    };\n\n    self.maximumMatching = function maximumMatching(pt){\n        // Courtesy of the great Ronny Lorenz\n\n        var n = pt[0];\n        var TURN = 0;    //minimal number of nucleotides in the hairpin\n\n        /* array init */\n        var mm = new Array(n + 1);\n        for(var i = 0; i <= n; i++){\n            mm[i] = new Array(n + 1);\n            for(var j = i; j <= n; j++)\n            mm[i][j] = 0;\n        }\n        var maximum = 0;\n\n        /* actual computation */\n        for(var i = n - TURN - 1; i > 0; i--)\n\n        for(var j = i + TURN + 1; j <= n; j++){\n            maximum = mm[i][j-1];\n\n            for(var l = j - TURN - 1; l >= i; l--) {\n                if(pt[l] === j) {\n\n                    // we have a base pair here\n                    maximum = Math.max(maximum, ((l > i) ? mm[i][l-1] : 0) + 1 + ((j - l - 1 > 0) ? mm[l+1][j-1] : 0));\n                }\n            }\n\n            mm[i][j] = maximum;\n        }\n\n        maximum = mm[1][n];\n\n        return mm;\n    };\n\n    self.backtrackMaximumMatching = function(mm, oldPt) {\n      var pt = Array.apply(null, \n                           Array(mm.length)).map(function() { return 0 }); \n                           //create an array containing zeros\n\n      self.mmBt(mm, pt, oldPt, 1, mm.length-1);\n      return pt;\n    }\n\n    self.mmBt = function(mm, pt, oldPt, i, j){\n        // Create a pairtable from the backtracking\n      var maximum = mm[i][j];\n      var TURN = 0;\n\n      if(j - i - 1 < TURN) return;    /* no more pairs */\n\n      if(mm[i][j-1] == maximum){      /* j is unpaired */\n        self.mmBt(mm, pt, oldPt, i, j-1);\n        return;\n      }\n\n      for(var q = j - TURN - 1; q >= i; q--){  /* j is paired with some q */\n        if (oldPt[j] !== q)\n            continue;\n\n        var leftPart     = (q > i) ? mm[i][q-1] : 0;\n        var enclosedPart = (j - q - 1 > 0) ? mm[q+1][j-1] : 0;\n\n        if(leftPart + enclosedPart + 1 == maximum) {\n            // there's a base pair between j and q\n            pt[q] = j;\n            pt[j] = q;\n\n            if(i < q) \n                self.mmBt(mm, pt, oldPt, i, q - 1);\n\n            self.mmBt(mm, pt, oldPt, q + 1, j - 1);\n            return;\n        }\n      }\n\n      //alert(i + \",\" + j + \": backtracking failed!\");\n      console.log('FAILED!!!' + i + ',' + j + ': backtracking failed!');\n\n    };\n\n    self.dotbracketToPairtable = function(dotbracket) {\n        // create an array and initialize it to 0\n        var pt = Array.apply(null, new Array(dotbracket.length + 1)).map(Number.prototype.valueOf,0);\n        \n        //  the first element is always the length of the RNA molecule\n        pt[0] = dotbracket.length;\n\n        // store the pairing partners for each symbol\n        var stack = {};\n        for (var i = 0; i < self.bracketLeft.length; i++) {\n            stack[i] = [];\n        }\n\n        // lookup the index of each symbol in the bracket array\n        var inverseBracketLeft = self.inverseBrackets(self.bracketLeft);\n        var inverseBracketRight = self.inverseBrackets(self.bracketRight);\n\n        for (var i = 0; i < dotbracket.length; i++) {\n            var a = dotbracket[i];\n            var ni = i + 1;\n\n            if (a == '.' || a == 'o') {\n                // unpaired\n                pt[ni] = 0;\n            } else {\n                if (a in inverseBracketLeft) {\n                    // open pair?\n                    stack[inverseBracketLeft[a]].push(ni);\n                } else if (a in inverseBracketRight){\n                    // close pair?\n                    var j = stack[inverseBracketRight[a]].pop();\n\n                    pt[ni] = j;\n                    pt[j] = ni;\n                } else {\n                    throw \"Unknown symbol in dotbracket string\";\n                }\n            }\n        }\n\n        for (var key in stack) {\n            if (stack[key].length > 0) {\n                throw \"Unmatched base at position \" + stack[key][0];\n            }\n        }\n\n        return pt;\n    };\n\n    self.insertIntoStack = function(stack, i, j) {\n        var k = 0;\n        while (stack[k].length > 0 && stack[k][stack[k].length - 1] < j) {\n            k += 1;\n        }\n\n        stack[k].push(j);\n        return k;\n    };\n\n    self.deleteFromStack = function(stack, j) {\n        var k = 0;\n        while (stack[k].length === 0 || stack[k][stack[k].length-1] != j) {\n            k += 1;\n        }\n        stack[k].pop();\n        return k;\n    };\n\n    self.pairtableToDotbracket = function(pt) {\n        // store the pairing partners for each symbol\n        var stack = {};\n        for (var i = 0; i < pt[0]; i++) {\n            stack[i] = [];\n        }\n\n        var seen = {};\n        var res = \"\";\n        var i;\n        for (var i = 1; i < pt[0] + 1; i++) {\n            if (pt[i] !== 0 && pt[i] in seen) {\n                throw \"Invalid pairtable contains duplicate entries\";\n            }\n            seen[pt[i]] = true;\n\n            if (pt[i] === 0) {\n                res += '.';\n            } else {\n                if (pt[i] > i) {\n                    res += self.bracketLeft[self.insertIntoStack(stack, i, pt[i])];\n                } else {\n                    res += self.bracketRight[self.deleteFromStack(stack, i)];\n                }\n            }\n        }\n\n        return res;\n    };\n\n    self.findUnmatched = function(pt, from, to) {\n        /*\n         * Find unmatched nucleotides in this molecule.\n         */\n        var toRemove = [];\n        var unmatched = [];\n\n        var origFrom = from;\n        var origTo = to;\n        var i;\n\n        for (var i = from; i <= to; i++)\n            if (pt[i] !== 0 && (pt[i] < from || pt[i] > to))\n                unmatched.push([i,pt[i]]);\n\n        for (var i = origFrom; i <= origTo; i++) {\n            while (pt[i] === 0 && i <= origTo) i++;\n\n            to = pt[i];\n\n            while (pt[i] === to) {\n                i++;\n                to--;\n            }\n            \n            toRemove = toRemove.concat(self.findUnmatched(pt, i, to));\n        }\n\n        if (unmatched.length > 0)\n            toRemove.push(unmatched);\n\n        return toRemove;\n    };\n\n    self.removePseudoknotsFromPairtable = function(pt) {\n        /* Remove the pseudoknots from this structure in such a fashion\n         * that the least amount of base-pairs need to be broken\n         *\n         * The pairtable is manipulated in place and a list of tuples\n         * indicating the broken base pairs is returned.\n         */\n\n        var mm = self.maximumMatching(pt);\n        var newPt = self.backtrackMaximumMatching(mm, pt);\n        var removed = [];\n\n        for (var i = 1; i < pt.length; i++) {\n            if (pt[i] < i)\n                continue;\n\n            if (newPt[i] != pt[i])  {\n                removed.push([i, pt[i]]);\n                pt[pt[i]] = 0;\n                pt[i] = 0;\n            }\n        }\n\n        return removed;\n    };\n\n    self.ptToElements = function(pt, level, i, j, dotBracketBreaks) {\n        /* Convert a pair table to a list of secondary structure \n         * elements:\n         *\n         * [['s',1,[2,3]]\n         *\n         * The 's' indicates that an element can be a stem. It can also be\n         * an interior loop ('i'), a hairpin loop ('h') or a multiloop ('m')\n         *\n         * The second number (1 in this case) indicates the depth or\n         * how many base pairs have to be broken to get to this element.\n         *\n         * Finally, there is the list of nucleotides which are part of\n         * of this element.\n         */\n        var elements = [];\n        var u5 = [i-1];\n        var u3 = [j+1];\n\n        if (arguments.length < 5)\n            dotBracketBreaks = [];\n\n        if (i > j)\n            return [];\n            \n            //iterate over the unpaired regions on either side\n            //this is either 5' and 3' unpaired if level == 0\n            //or an interior loop or a multiloop\n            for (; pt[i] === 0; i++) { u5.push(i); }\n            for (; pt[j] === 0; j--) { u3.push(j); }\n\n            if (i > j) {\n                //hairpin loop or one large unpaired molecule\n                u5.push(i);\n                if (level === 0)\n                    return [['e',level, u5.sort(numberSort)]];\n                else {\n                    // check to see if we have chain breaks due\n                    // to multiple strands in the input\n                    var external = false;\n                    var left = [];\n                    var right = [];\n                    for (var k = 0; k < u5.length; k++) {\n                        if (external)\n                            right.push(u5[k]);\n                        else\n                            left.push(u5[k]);\n\n                        if (dotBracketBreaks.indexOf(u5[k]) >= 0)\n                            external = true;\n                    }\n\n                    if (external) {\n                        return [['h',level, u5.sort(numberSort)]];\n                    }\n                    else\n                        // if not, this is a simple hairpin loop\n                        return [['h',level, u5.sort(numberSort)]];\n                }\n            }\n\n            if (pt[i] != j) {\n                //multiloop\n                var m = u5;\n                var k = i;\n\n                // the nucleotide before and the starting nucleotide\n                m.push(k);\n                while (k <= j) {\n                    // recurse into a stem\n                    elements = elements.concat(self.ptToElements(pt, level, k, pt[k], dotBracketBreaks));\n\n                    // add the nucleotides between stems\n                    m.push(pt[k]);\n                    k = pt[k] + 1;\n                    for (; pt[k] === 0 && k <= j; k++) { m.push(k);}\n                    m.push(k);\n                }\n                m.pop();\n                m = m.concat(u3);\n                \n                if (m.length > 0) {\n                    if (level === 0)\n                        elements.push(['e', level, m.sort(numberSort)]);\n                    else\n                        elements.push(['m', level, m.sort(numberSort)]);\n                }\n                \n                return elements;\n            }\n\n            if (pt[i] === j) {\n                //interior loop\n                u5.push(i);\n                u3.push(j);\n\n                var combined = u5.concat(u3);\n                if (combined.length > 4) {\n                    if (level === 0)\n                        elements.push(['e',level, u5.concat(u3).sort(numberSort)]);\n                    else\n                        elements.push(['i',level, u5.concat(u3).sort(numberSort)]);\n                }\n            } \n\n            var s = [];\n            //go through the stem\n            while (pt[i] === j && i < j) {\n                //one stem\n                s.push(i);\n                s.push(j);\n\n                i += 1;\n                j -= 1;\n\n                level += 1;\n            }\n\n            u5 = [i-1];\n            u3 = [j+1];\n            elements.push(['s', level, s.sort(numberSort)]);\n\n        return elements.concat(self.ptToElements(pt, level, i, j, dotBracketBreaks));\n    };\n\n}\n\nexport var rnaUtilities = new RNAUtilities();\n\nexport function ColorScheme(colorsText) {\n    var self = this;\n    self.colorsText = colorsText;\n\n    self.parseRange = function(rangeText) {\n        //parse a number range such as 1-10 or 3,7,9 or just 7\n        var parts = rangeText.split(',')\n        var nums = [];\n\n        for (var i = 0; i < parts.length; i++) {\n            //could be 1 or 10-11  or something like that\n            var parts1 = parts[i].split('-');\n\n            if (parts1.length == 1)\n                nums.push(parseInt(parts1[0]));\n            else if (parts1.length == 2) {\n                var from = parseInt(parts1[0]);\n                var to = parseInt(parts1[1]);\n\n                // add each number in this range\n                for (var j = from; j <= to; j++) \n                    nums.push(j)\n            } else {\n                console.log('Malformed range (too many dashes):', rangeText);\n            }\n        }\n\n        return nums;\n    }\n\n    self.parseColorText = function(colorText) {\n        /* Parse the text of an RNA color string. Instructions and description\n         * of the format are given below.\n         *\n         * The return is a json double dictionary indexed first by the \n         * molecule name, then by the nucleotide. This is then applied\n         * by force.js to the RNAs it is displaying. When no molecule\n         * name is specified, the color is applied to all molecules*/\n        var lines = colorText.split('\\n');\n        var currMolecule = '';\n        var counter = 1;\n        var colorsJson = {colorValues: {'':{}}, range:['white', 'steelblue']};\n        var domainValues = [];\n\n\n        for (var i = 0; i < lines.length; i++) {\n\n            if (lines[i][0] == '>') {\n                // new molecule\n                currMolecule = lines[i].trim().slice(1);\n                counter = 1;\n\n                colorsJson.colorValues[currMolecule] = {};\n                continue;\n            }\n\n            let words = lines[i].trim().split(/[\\s]+/);\n\n            for (var j = 0; j < words.length; j++) {\n                if (isNaN(words[j])) {\n                    if (words[j].search('range') === 0) {\n                        //there's a color scale in this entry\n                        let parts = words[j].split('=');\n                        let partsRight = parts[1].split(':')\n                        colorsJson.range = [partsRight[0], partsRight[1]];\n                        continue;\n                    }\n\n                    if (words[j].search('domain') == 0) {\n                        //there's a color scale in this entry\n                        let parts = words[j].split('=');\n                        let partsRight = parts[1].split(':')\n                        colorsJson.domain = [partsRight[0], partsRight[1]];\n                        continue;\n                    }\n\n                    // it's not a number, should be a combination \n                    // of a number (nucleotide #) and a color\n                    let parts = words[j].split(':');\n                    let nums = self.parseRange(parts[0]);\n                    let color = parts[1]\n\n                    for (var k = 0; k < nums.length; k++) {\n                        if (isNaN(color)) {\n                            colorsJson.colorValues[currMolecule][nums[k]] = color;\n                        } else {\n                            colorsJson.colorValues[currMolecule][nums[k]] = +color;\n                            domainValues.push(Number(color));\n                        }\n                    }\n                } else {\n                    //it's a number, so we add it to the list of values\n                    //seen for this molecule\n                    colorsJson.colorValues[currMolecule][counter] = Number(words[j]);\n                    counter += 1;\n\n                    domainValues.push(Number(words[j]));\n                }\n            }\n        }\n\n        if (!('domain' in colorsJson))\n            colorsJson.domain = [Math.min.apply(null, domainValues), Math.max.apply(null, domainValues)];\n\n        self.colorsJson = colorsJson;\n\n        return self;\n    };\n\n    self.normalizeColors = function() {\n        /* \n         * Normalize the passed in values so that they range from\n         * 0 to 1\n         */\n        var value;\n\n        for (var moleculeName in self.colorsJson) {\n            var minNum = Number.MAX_VALUE;\n            var maxNum = Number.MIN_VALUE;\n\n            // iterate once to find the min and max values;\n            for (var resnum in self.colorsJson.colorValues[moleculeName]) {\n                value = self.colorsJson.colorValues[moleculeName][resnum];\n                if (typeof value == 'number') {\n                    if (value < minNum)\n                        minNum = value;\n                    if (value > maxNum)\n                        maxNum = value;\n                }\n            }\n\n            // iterate again to normalize\n            for (resnum in self.colorsJson.colorValues[moleculeName]) {\n                value = self.colorsJson.colorValues[moleculeName][resnum];\n                if (typeof value == 'number') {\n                    self.colorsJson.colorValues[moleculeName][resnum] = (value - minNum ) / (maxNum - minNum);\n                }\n            }\n        }\n\n        return self;\n    };\n\n    self.parseColorText(self.colorsText);\n    return self;\n}\n","import {arraysEqual,RNAUtilities,rnaUtilities} from './rnautils.js';\nimport slugid from 'slugid';\n\nvar numberSort = function(a,b) { return a - b; };\n\nif (typeof(String.prototype.trim) === 'undefined') {\n    String.prototype.trim = function() {\n        return String(this).replace(/^\\s+|\\s+$/g, '');\n    };\n}\n\nexport function ProteinGraph(structName, size, uid) {\n    var self = this;\n\n    self.type = 'protein';\n    self.size = size;\n    self.nodes = [{'name': 'P',\n                   'num': 1,\n                   'radius': 3 *  Math.sqrt(size),\n                   'rna': self,\n                   'nodeType': 'protein',\n                   'structName': structName,\n                   'elemType': 'p',\n                   'size': size,\n                   'uid': slugid.nice()}];\n\n    self.links = [];\n    self.uid = slugid.nice();\n\n    self.addUids = function(uids) {\n        for (let i = 0; i < uids.length; i++)\n            self.nodes[i].uid = uids[i];\n\n        return self;\n    };\n\n    self.getUids = function() {\n        /* Get the positions of each node so that they\n         * can be passed to elementsToJson later\n         */\n        uids = [];\n        for (let i = 0; i < self.dotbracket.length; i++)\n            uids.push(self.nodes[i].uid);\n\n        return uids;\n    };\n\n}\n\nexport function RNAGraph(seq = '', dotbracket = '', structName = '', startNumber = 1) {\n    var self = this;\n\n    self.type = 'rna';\n    self.circularizeExternal = false;\n    self.seq = seq;\n    self.dotbracket = dotbracket;  //i.e. ..((..))..\n    self.structName = structName;\n    self.circular = false;\n\n    if (self.dotbracket.slice(-1) == '*') {\n        //circular RNA\n        self.dotbracket = self.dotbracket.slice(0, -1);\n        self.circular = true;\n    }\n\n    self.uid = slugid.nice();\n\n    self.elements = [];            //store the elements and the\n                                   //nucleotides they contain\n    self.pseudoknotPairs = [];\n    self.nucsToNodes = {};\n\n    self.addUids = function(uids) {\n        let nucleotideNodes = self.nodes.filter(function(d) { return d.nodeType == 'nucleotide'; });\n\n        for (let i = 0; i < uids.length && i < nucleotideNodes.length; i++) {\n            nucleotideNodes[i].uid = uids[i];\n        }\n\n        return self;\n    };\n\n    self.computePairtable = function() {\n        self.pairtable = rnaUtilities.dotbracketToPairtable(self.dotbracket);\n    };\n\n    self.removeBreaks = function(targetString) {\n        // Remove all chain breaks (denoted with a '&', which indicate\n        // that the input represents more than one strand)\n        var breaks = [];\n        var breakIndex = -1;\n\n        while ((breakIndex = targetString.indexOf('&')) >= 0) {\n            breaks.push(breakIndex);\n            targetString = targetString.substring(0, breakIndex) + targetString.substring(breakIndex+1, targetString.length);\n\n        }\n\n        return {targetString: targetString,  breaks: breaks};\n    };\n\n    var ret = self.removeBreaks(self.dotbracket);\n    self.dotbracket = ret.targetString;\n    self.dotBracketBreaks = ret.breaks;\n\n    ret = self.removeBreaks(self.seq);\n    self.seq = ret.targetString;\n    self.seqBreaks = ret.breaks;\n\n    self.rnaLength = self.dotbracket.length;\n\n    if (!arraysEqual(self.dotBracketBreaks, self.seqBreaks)) {\n        console.log('WARNING: Sequence and structure breaks not equal');\n        console.log('WARNING: Using the breaks in the structure');\n    }\n\n    self.computePairtable();\n\n    self.addPositions = function(nodeType, positions) {\n        let labelNodes = self.nodes.filter(function(d) { return d.nodeType == nodeType; });\n\n        for  (let i = 0; i < labelNodes.length; i++) {\n            labelNodes[i].x = positions[i][0];\n            labelNodes[i].y = positions[i][1];\n        }\n\n        return self;\n    };\n\n    self.breakNodesToFakeNodes = function() {\n        // convert all the nodes following breaks to fake nodes\n        let labelNodes = self.nodes.filter(function(d) { return d.nodeType == 'nucleotide'; });\n\n        // if a node was an artifical break node, convert it to a middle\n        for (let i = 0; i < labelNodes.length; i++) {\n            if (self.dotBracketBreaks.indexOf(i) >= 0) {\n                labelNodes[i].nodeType = 'middle';\n                labelNodes[i+1].nodeType = 'middle';\n            }\n        }\n\n        for (let i = 0; i < self.elements.length; i++) {\n            var broken = false;\n\n            // change the elemType of the other nodes in the element containing\n            // the break\n            for (let j = 0; j < self.elements[i][2].length; j++) {\n                if (self.dotBracketBreaks.indexOf(self.elements[i][2][j]) >= 0)\n                    broken = true;\n            }\n\n            if (broken) {\n                self.elements[i][2].map(function(x) {\n                    if (x == 0)\n                        return;\n                    self.nodes[x-1].elemType = 'e';\n                });\n            } else {\n                self.elements[i][2].map(function(x) {\n                    if (x == 0)\n                        return;\n                    self.nodes[x-1].elemType = self.elements[i][0];\n                });\n            }\n        }\n        return self;\n    };\n\n    self.getPositions = function(nodeType) {\n        var positions = [];\n        let nucleotideNodes = self.nodes.filter(function(d) { return d.nodeType == nodeType; });\n\n        for (let i = 0; i < nucleotideNodes.length; i++)\n            positions.push([nucleotideNodes[i].x, nucleotideNodes[i].y]);\n\n        return positions;\n    };\n\n    self.getUids = function() {\n        /* Get the positions of each node so that they\n         * can be passed to elementsToJson later\n         */\n        var uids = [];\n        for (let i = 0; i < self.dotbracket.length; i++)\n            uids.push(self.nodes[i].uid);\n\n        return uids;\n    };\n\n    self.reinforceStems = function() {\n        var pt = self.pairtable;\n        let relevantElements = self.elements.filter( function(d) {\n            return d[0] == 's' && d[2].length >= 4;\n        });\n\n        for (let i = 0; i < relevantElements.length; i++) {\n            let allNucs = relevantElements[i][2];\n            let nucs = allNucs.slice(0, allNucs.length / 2);\n\n            for (let j = 0; j < nucs.length-1; j++) {\n                self.addFakeNode([nucs[j], nucs[j+1], pt[nucs[j+1]], pt[nucs[j]]]);\n            }\n        }\n\n        return self;\n    };\n\n    self.reinforceLoops = function() {\n        /*\n         * Add a set of fake nodes to enforce the structure\n         */\n        var filterNucs = function(d) {\n            return d !== 0 && d <= self.dotbracket.length;\n        };\n\n        for (let i = 0; i < self.elements.length; i++) {\n            if (self.elements[i][0] == 's' || (!self.circularizeExternal && self.elements[i][0] == 'e'))\n                continue;\n\n            var nucs = self.elements[i][2].filter(filterNucs);\n\n            if (self.elements[i][0] == 'e') {\n                var newNode1 = {'name': '',\n                    'num': -3,\n                    //'radius': 18 * radius -6,\n                    'radius': 0,\n                    'rna': self,\n                    'nodeType': 'middle',\n                    'elemType': 'f',\n                    'nucs': [],\n                    'x': self.nodes[self.rnaLength-1].x,\n                    'y': self.nodes[self.rnaLength-1].y,\n                    'px': self.nodes[self.rnaLength-1].px,\n                    'py': self.nodes[self.rnaLength-1].py,\n                    'uid': slugid.nice() };\n                var newNode2 = {'name': '',\n                    'num': -2,\n                    //'radius': 18 * radius -6,\n                    'radius': 0,\n                    'rna': self,\n                    'nodeType': 'middle',\n                    'elemType': 'f',\n                    'nucs': [],\n                    'x': self.nodes[0].x,\n                    'y': self.nodes[0].y,\n                    'px': self.nodes[0].px,\n                    'py': self.nodes[0].py,\n                    'uid': slugid.nice() };\n\n                    nucs.push(self.nodes.length+1);\n                    nucs.push(self.nodes.length+2);\n                    self.nodes.push(newNode1);\n                    self.nodes.push(newNode2);\n            }\n\n\n            self.addFakeNode(nucs);\n        }\n\n        return self;\n    };\n\n    self.updateLinkUids = function() {\n        for (let i = 0; i < self.links.length; i++) {\n            self.links[i].uid = self.links[i].source.uid + self.links[i].target.uid;\n        }\n\n        return self;\n    };\n\n    self.addFakeNode = function(nucs) {\n        var linkLength = 18; //make sure this is consistent with the value in force.js\n        var nodeWidth = 6;\n        var angle = (3.1415 * 2) / (2 * nucs.length);\n        var radius =  linkLength / (2 * Math.tan(angle));\n\n        var fakeNodeUid = '';\n\n        for (let i = 0; i < nucs.length; i++)\n            fakeNodeUid += self.nodes[nucs[i]-1].uid;\n\n        var newNode = {'name': '',\n                         'num': -1,\n                         //'radius': 18 * radius -6,\n                         'radius': radius,\n                         'rna': self,\n                         'nodeType': 'middle',\n                         'elemType': 'f',\n                         'nucs': nucs,\n                         'uid': fakeNodeUid };\n        self.nodes.push(newNode);\n\n        var newX = 0;\n        var newY = 0;\n        var coordsCounted = 0;\n\n        angle = (nucs.length - 2) * 3.14159 / (2 * nucs.length);\n        radius = 0.5 / Math.cos(angle);\n\n        for (let j = 0; j < nucs.length; j++) {\n            if (nucs[j] === 0 || nucs[j] > self.dotbracket.length)\n                continue;\n\n            //link to the center node\n            self.links.push({'source': self.nodes[nucs[j] - 1],\n                             'target': self.nodes[self.nodes.length-1],\n                             'linkType': 'fake',\n                             'value': radius,\n                             'uid': slugid.nice() });\n\n            if (nucs.length > 4) {\n                //link across the loop\n                self.links.push({'source': self.nodes[nucs[j] - 1],\n                                 'target': self.nodes[nucs[(j + Math.floor(nucs.length / 2)) % nucs.length] - 1],\n                                 'linkType': 'fake',\n                                 'value': radius * 2,\n                                 'uid': slugid.nice() });\n            }\n\n            var ia = ((nucs.length - 2) * 3.14159) / nucs.length;\n            var c = 2 * Math.cos(3.14159 / 2 - ia / 2);\n            //link to over-neighbor\n            self.links.push({'source': self.nodes[nucs[j] - 1],\n                             'target': self.nodes[nucs[(j + 2) % nucs.length] - 1],\n                             'linkType': 'fake',\n                             'value': c});\n\n            // calculate the mean of the coordinats in this loop\n            // and place the fake node there\n            var fromNode = self.nodes[nucs[j]-1];\n            if ('x' in fromNode) {\n                newX += fromNode.x;\n                newY += fromNode.y;\n\n                coordsCounted += 1;\n            }\n        }\n\n        if (coordsCounted > 0) {\n            // the nucleotides had set positions so we can calculate the position\n            // of the fake node\n            newNode.x = newX / coordsCounted;\n            newNode.y = newY / coordsCounted;\n            newNode.px = newNode.x;\n            newNode.py = newNode.y;\n        }\n\n        return self;\n    };\n\n    self.connectFakeNodes = function() {\n        var linkLength = 18;\n\n        // We want to be able to connect all of the fake nodes\n        // and create a structure consisting of just them\n        var filterOutNonFakeNodes = function(d) {\n            return d.nodeType == 'middle';\n        }\n\n        var nucsToNodes = {};\n        var fakeNodes = self.nodes.filter(filterOutNonFakeNodes);\n        var linked = {};\n\n        // initialize the nucleotides to nodes\n        for (var i = 1; i <= self.nodes.length; i++)\n            nucsToNodes[i] = [];\n\n        for (var i = 0; i < fakeNodes.length; i++) {\n            var thisNode = fakeNodes[i];\n\n            // each fake node represents a certain set of nucleotides (thisNode.nucs)\n            for (var j = 0; j < thisNode.nucs.length; j++) {\n                var thisNuc = thisNode.nucs[j];\n\n                // check to see if this nucleotide has been seen in another fake node\n                // if it has, then we add a link between the two nodes\n                for (var k = 0; k < nucsToNodes[thisNuc].length; k++) {\n                    if (JSON.stringify([nucsToNodes[thisNuc][k].uid, thisNode.uid].sort()) in linked)\n                        continue; //already linked\n\n                    var distance = nucsToNodes[thisNuc][k].radius + thisNode.radius;\n\n                    self.links.push({'source': nucsToNodes[thisNuc][k],\n                                      'target': thisNode,\n                                      'value': distance / linkLength,\n                                      'linkType': 'fake_fake'});\n\n                    // note that we've already seen this link\n                    linked[JSON.stringify([nucsToNodes[thisNuc][k].uid, thisNode.uid].sort())] = true;\n                }\n\n                nucsToNodes[thisNuc].push(thisNode);\n            }\n        }\n\n        return self;\n\n    };\n\n    self.addExtraLinks = function(extraLinks) {\n        if (typeof extraLinks == 'undefined')\n            return self;\n\n        for (var i = 0; i < extraLinks.length; i++) {\n            var source = self.getNodeFromNucleotides(extraLinks[i].from);\n            var target = self.getNodeFromNucleotides(extraLinks[i].to);\n\n            var newLink = {'source': source, 'target': target, 'linkType': 'extra',\n                'extraLinkType': extraLinks[i].linkType, 'uid': slugid.nice() };\n\n                self.links.push(newLink);\n        }\n\n        return self;\n    }\n\n\n    self.elementsToJson = function() {\n        /* Convert a set of secondary structure elements to a json\n         * representation of the graph that can be used with d3's\n         * force-directed layout to generate a visualization of\n         * the structure.\n         */\n        var pt = self.pairtable;\n        var elements = self.elements;\n\n        self.nodes = [];\n        self.links = [];\n\n        //create a reverse lookup so we can find out the type\n        //of element that a node is part of\n        var elemTypes = {};\n\n        //sort so that we count stems last\n        self.elements.sort();\n\n        for (let i = 0; i < self.elements.length; i++) {\n            var nucs = self.elements[i][2];\n            for (let j = 0; j < nucs.length; j++) {\n                elemTypes[nucs[j]] = self.elements[i][0];\n            }\n        }\n\n        for (let i = 1; i <= pt[0]; i++) {\n            var nodeName = self.seq[i-1];\n\n            if (self.dotBracketBreaks.indexOf(i-1) >= 0 ||\n                self.dotBracketBreaks.indexOf(i-2) >= 0) {\n                nodeName = '';\n            }\n\n            //create a node for each nucleotide\n            self.nodes.push({'name': nodeName,\n                             'num': startNumber + i - 1,\n                             'radius': 5,\n                             'rna': self,\n                             'nodeType': 'nucleotide',\n                             'structName': self.structName,\n                             'elemType': elemTypes[i],\n                             'uid': slugid.nice(),\n                             'linked': false});\n        }\n\n        for (let i = 0; i < self.nodes.length; i++) {\n            if (i === 0)\n                self.nodes[i].prevNode = null;\n            else {\n                self.nodes[i].prevNode = self.nodes[i-1];\n            }\n\n            if (i == self.nodes.length-1)\n                self.nodes[i].nextNode = null;\n            else {\n                self.nodes[i].nextNode = self.nodes[i+1];\n            }\n        }\n\n        for (let i = 1; i <= pt[0]; i++) {\n\n            if (pt[i] !== 0) {\n                // base-pair links\n                self.links.push({'source': self.nodes[i-1],\n                                 'target': self.nodes[pt[i]-1],\n                                 'linkType': 'basepair',\n                                 'value': 1,\n                                 'uid': slugid.nice() });\n            }\n\n            if (i > 1) {\n                // backbone links\n                if (self.dotBracketBreaks.indexOf(i-1) === -1 &&\n                    self.dotBracketBreaks.indexOf(i-2) == -1 &&\n                    self.dotBracketBreaks.indexOf(i-3) == -1) {\n                    // there is no break in the strands here\n                    // we can add a backbone link\n                    self.links.push({'source': self.nodes[i-2],\n                                    'target': self.nodes[i-1],\n                                    'linkType': 'backbone',\n                                    'value': 1,\n                                    'uid': slugid.nice() });\n                    self.nodes[i-1].linked = true;\n                }\n            }\n        }\n\n        //add the pseudoknot links\n        for (let i = 0; i < self.pseudoknotPairs.length; i++) {\n            self.links.push({'source': self.nodes[self.pseudoknotPairs[i][0]-1],\n                            'target': self.nodes[self.pseudoknotPairs[i][1]-1],\n                            'linkType': 'pseudoknot',\n                            'value': 1,\n                            'uid': slugid.nice()});\n        }\n\n        if (self.circular) {\n            self.links.push({'source': self.nodes[0],\n                            'target': self.nodes[self.rnaLength-1],\n                            'linkType': 'backbone',\n                            'value': 1,\n                            'uid': slugid.nice() });\n\n        }\n\n        return self;\n    };\n\n    self.ptToElements = function(pt, level, i, j) {\n        /* Convert a pair table to a list of secondary structure\n         * elements:\n         *\n         * [['s',1,[2,3]]\n         *\n         * The 's' indicates that an element can be a stem. It can also be\n         * an interior loop ('i'), a hairpin loop ('h') or a multiloop ('m')\n         *\n         * The second number (1 in this case) indicates the depth or\n         * how many base pairs have to be broken to get to this element.\n         *\n         * Finally, there is the list of nucleotides which are part of\n         * of this element.\n         */\n        var elements = [];\n        var u5 = [i-1];\n        var u3 = [j+1];\n\n        if (i > j)\n            return [];\n\n            //iterate over the unpaired regions on either side\n            //this is either 5' and 3' unpaired if level == 0\n            //or an interior loop or a multiloop\n            for (; pt[i] === 0; i++) { u5.push(i); }\n            for (; pt[j] === 0; j--) { u3.push(j); }\n\n            if (i > j) {\n                //hairpin loop or one large unpaired molecule\n                u5.push(i);\n                if (level === 0)\n                    return [['e',level, u5.sort(numberSort)]];\n                else {\n                    // check to see if we have chain breaks due\n                    // to multiple strands in the input\n                    var external = false;\n                    var left = [];\n                    var right = [];\n                    for (var k = 0; k < u5.length; k++) {\n                        if (external)\n                            right.push(u5[k]);\n                        else\n                            left.push(u5[k]);\n\n                        if (self.dotBracketBreaks.indexOf(u5[k]) >= 0)\n                            external = true;\n                    }\n\n                    if (external) {\n                        return [['h',level, u5.sort(numberSort)]];\n                    }\n                    else\n                        // if not, this is a simple hairpin loop\n                        return [['h',level, u5.sort(numberSort)]];\n                }\n            }\n\n            if (pt[i] != j) {\n                //multiloop\n                var m = u5;\n                var k = i;\n\n                // the nucleotide before and the starting nucleotide\n                m.push(k);\n                while (k <= j) {\n                    // recurse into a stem\n                    elements = elements.concat(self.ptToElements(pt, level, k, pt[k]));\n\n                    // add the nucleotides between stems\n                    m.push(pt[k]);\n                    k = pt[k] + 1;\n                    for (; pt[k] === 0 && k <= j; k++) { m.push(k);}\n                    m.push(k);\n                }\n                m.pop();\n                m = m.concat(u3);\n\n                if (m.length > 0) {\n                    if (level === 0)\n                        elements.push(['e', level, m.sort(numberSort)]);\n                    else\n                        elements.push(['m', level, m.sort(numberSort)]);\n                }\n\n                return elements;\n            }\n\n            if (pt[i] === j) {\n                //interior loop\n                u5.push(i);\n                u3.push(j);\n\n                var combined = u5.concat(u3);\n                if (combined.length > 4) {\n                    if (level === 0)\n                        elements.push(['e',level, u5.concat(u3).sort(numberSort)]);\n                    else\n                        elements.push(['i',level, u5.concat(u3).sort(numberSort)]);\n                }\n            }\n\n            var s = [];\n            //go through the stem\n            while (pt[i] === j && i < j) {\n                //one stem\n                s.push(i);\n                s.push(j);\n\n                i += 1;\n                j -= 1;\n\n                level += 1;\n            }\n\n            u5 = [i-1];\n            u3 = [j+1];\n            elements.push(['s', level, s.sort(numberSort)]);\n\n        return elements.concat(self.ptToElements(pt, level, i, j));\n    };\n\n    self.addLabels = function(startNumber = 1, labelInterval = 10) {\n        if (labelInterval === 0)\n            return self;\n\n        for (let i = 1; i <= self.rnaLength; i++) {\n            // add labels\n            if (i % labelInterval === 0) {\n                //create a node for each label\n                let newX, newY;\n\n                let thisNode = self.nodes[i-1];\n                let prevNode, nextNode;\n                let prevVec, nextVec;\n\n                if (self.rnaLength == 1) {\n                    nextVec = [thisNode.x - 15, thisNode.y];\n                    prevVec = [thisNode.x - 15, thisNode.y];\n                } else {\n                    // if we're labelling the first node, then label it in relation to the last\n                    if (i == 1)\n                        prevNode = self.nodes[self.rnaLength - 1];\n                    else\n                        prevNode = self.nodes[i - 2];\n\n                    // if we're labelling the last node, then label it in relation to the first\n                    if (i == self.rnaLength)\n                        nextNode = self.nodes[0];\n                    else\n                        nextNode = self.nodes[i];\n\n                    // this nucleotide and its neighbors are paired\n                    if (self.pairtable[nextNode.num - startNumber+1] !== 0 &&\n                        self.pairtable[prevNode.num - startNumber+1] !== 0 &&\n                        self.pairtable[thisNode.num - startNumber+1] !== 0) {\n\n                        prevNode = nextNode = self.nodes[self.pairtable[thisNode.num - startNumber+1]-1];\n                    }\n\n                    // this node is paired but at least one of its neighbors is unpaired\n                    // place the label in the direction of the two neighbors\n                    if (self.pairtable[thisNode.num - startNumber+1] !== 0 && (\n                        self.pairtable[nextNode.num - startNumber+1] === 0 ||\n                        self.pairtable[prevNode.num - startNumber+1] === 0)) {\n                        nextVec = [thisNode.x - nextNode.x, thisNode.y - nextNode.y];\n                        prevVec = [thisNode.x - prevNode.x, thisNode.y - prevNode.y];\n\n                    } else {\n                        nextVec = [nextNode.x - thisNode.x, nextNode.y - thisNode.y];\n                        prevVec = [prevNode.x - thisNode.x, prevNode.y - thisNode.y];\n                    }\n                }\n\n                var combinedVec = [nextVec[0] + prevVec[0], nextVec[1] + prevVec[1]];\n                var vecLength = Math.sqrt(combinedVec[0] * combinedVec[0] + combinedVec[1] * combinedVec[1]);\n                var normedVec = [combinedVec[0] / vecLength, combinedVec[1] / vecLength];\n                var offsetVec = [-15 * normedVec[0], -15 * normedVec[1]];\n\n                newX = self.nodes[i-1].x + offsetVec[0];\n                newY = self.nodes[i-1].y + offsetVec[1];\n\n                var newNode = {'name': i + startNumber -1,\n                                 'num': -1,\n                                 'radius': 6,\n                                 'rna': self,\n                                 'nodeType': 'label',\n                                 'structName': self.structName,\n                                 'elemType': 'l',\n                                 'x': newX,\n                                 'y': newY,\n                                 'px': newX,\n                                 'py': newY,\n                                 'uid': slugid.nice() };\n                var newLink = {'source': self.nodes[i-1],\n                            'target': newNode,\n                            'value': 1,\n                            'linkType': 'label_link',\n                            'uid': slugid.nice() };\n\n                self.nodes.push(newNode);\n                self.links.push(newLink);\n            }\n        }\n\n        return self;\n    };\n\n    self.recalculateElements = function() {\n        self.removePseudoknots();\n        self.elements = self.ptToElements(self.pairtable, 0, 1, self.dotbracket.length);\n\n        if (self.circular) {\n            //check to see if the external loop is a hairpin or a multiloop\n            let externalLoop = self.elements.filter(function(d) { if (d[0] == 'e') return true; });\n\n            if (externalLoop.length > 0) {\n                eloop = externalLoop[0];\n                nucs = eloop[2].sort(numberSort);\n\n                prev = nucs[0];\n                hloop = true;\n                numGreater = 0;\n                for (let i = 1; i < nucs.length; i++) {\n                    if (nucs[i] - prev > 1) {\n                        numGreater += 1;\n                    }\n                    prev = nucs[i];\n                }\n\n                if (numGreater == 1) {\n                    eloop[0] = 'h';\n                } else if (numGreater == 2) {\n                    eloop[0] = 'i';\n                } else {\n                    eloop[0] = 'm';\n                }\n            }\n        }\n\n        return self;\n    };\n\n    self.reassignLinkUids = function() {\n        // reassign uids to the links, corresponding to the uids of the two nodes\n        // they connect\n        var i;\n\n        for (var i = 0; i < self.links.length; i++) {\n            self.links[i].uid = self.links[i].source.uid + self.links[i].target.uid;\n        }\n\n        return self;\n    }\n\n    self.removePseudoknots = function() {\n        if (self.pairtable.length > 1)\n            self.pseudoknotPairs = self.pseudoknotPairs.concat(rnaUtilities.removePseudoknotsFromPairtable(self.pairtable));\n\n        return self;\n    };\n\n    self.addPseudoknots = function() {\n        /* Add all of the pseudoknot pairs which are stored outside\n         * of the pairtable back to the pairtable\n         */\n        var pt = self.pairtable;\n        var pseudoknotPairs = self.pseudoknotPairs;\n\n        for (var i = 0; i < pseudoknotPairs.length; i++) {\n            pt[pseudoknotPairs[i][0]] = pseudoknotPairs[i][1];\n            pt[pseudoknotPairs[i][1]] = pseudoknotPairs[i][0];\n        }\n\n        self.pseudoknotPairs = [];\n        return self;\n    };\n\n    self.addName = function(name) {\n        if (typeof name == 'undefined') {\n            self.name = '';\n            return self;\n        } else {\n            self.name = name;\n            return self;\n        }\n    };\n\n\n    if (self.rnaLength > 0)\n        self.recalculateElements();\n\n    self.getNodeFromNucleotides = function(nucs) {\n        /* Get a node given a nucleotide number or an array of nucleotide\n         * numbers indicating an element node */\n        if (Object.prototype.toString.call(nucs) === '[object Array]') {\n            for (let j = 0; j < self.nodes.length; j++) {\n                if ('nucs' in self.nodes[j]) {\n                    if (self.nodes[j].nucs.equals(nucs)) {\n                        return self.nodes[j];\n                    }\n                }\n            }\n        } else {\n            for (let j = 0; j < self.nodes.length; j++) {\n                if (self.nodes[j].num == nucs) {\n                    return self.nodes[j];\n                }\n            }\n        }\n\n        console.log('ERROR: No node found for nucs:', nucs);\n        return null;\n    }\n}\n\nexport function moleculesToJson(moleculesJson) {\n    /* Convert a list of RNA and protein molecules to a list of RNAGraph\n     * ProteinGraph and extraLinks structure */\n\n    var nodes = {}; //index the nodes by uid\n    var graphs = [];\n    var extraLinks = [];\n\n\n    // Create the graphs for each molecule\n    for (var i = 0; i < moleculesJson.molecules.length; i++) {\n        var molecule = moleculesJson.molecules[i];\n        var rg;\n\n        if (molecule.type == 'rna') {\n            rg = new RNAGraph(molecule.seq, molecule.ss, molecule.header);\n            rg.circularizeExternal = true;\n            rg.elementsToJson()\n            .addPositions('nucleotide', molecule.positions)\n            .addLabels()\n            .reinforceStems()\n            .reinforceLoops();\n\n\n        } else if (molecule.type == 'protein') {\n            rg = new ProteinGraph(molecule.header, molecule.size);\n\n        }\n\n        rg.addUids(molecule.uids);\n\n        for (var j = 0; j < rg.nodes.length; j++) {\n            nodes[rg.nodes[j].uid] = rg.nodes[j];\n        }\n\n        graphs.push(rg);\n    }\n\n    //Add the extra links\n    for (var i = 0; i < moleculesJson.extraLinks.length; i++) {\n        link = moleculesJson.extraLinks[i];\n\n        link.source = nodes[link.source];\n        link.target = nodes[link.target];\n        link.uid = slugid.nice();\n\n        extraLinks.push(link);\n    }\n\n    return {'graphs': graphs, 'extraLinks': extraLinks};\n};\n","export function simpleXyCoordinates (pair_table) {\n  var INIT_ANGLE=0.;     /* initial bending angle */\n  var INIT_X = 100.;     /* coordinate of first digit */\n  var INIT_Y = 100.;     /* see above */\n  var RADIUS =  15.;\n\n  var x = [], y = [];\n\n  var i, len;\n  var  alpha;\n\n  len = pair_table[0];\n  var angle = Array.apply(null, new Array(len+5)).map(Number.prototype.valueOf,0); \n  var loop_size = Array.apply(null, new Array(16+Math.floor(len/5)))\n                    .map(Number.prototype.valueOf, 0); \n  var stack_size = Array.apply(null, new Array(16+Math.floor(len/5)))\n                    .map(Number.prototype.valueOf, 0); \n\n  var lp = 0;\n  var stk = 0;\n  var PIHALF = Math.PI / 2;\n\n\n  var loop = function(i, j, pair_table)\n  /* i, j are the positions AFTER the last pair of a stack; i.e\n     i-1 and j+1 are paired. */\n  {\n      var count = 2;   /* counts the VERTICES of a loop polygon; that's\n                          NOT necessarily the number of unpaired bases!\n                          Upon entry the loop has already 2 vertices, namely\n                          the pair i-1/j+1.  */\n\n  var    r = 0, bubble = 0; /* bubble counts the unpaired digits in loops */\n\n  var    i_old, partner, k, l, start_k, start_l, fill, ladder;\n  var    begin, v, diff;\n  var  polygon;\n\n  var remember = Array.apply(null, new Array((3+Math.floor((j-i)/5)*2))).map(Number.prototype.valueOf, 0);\n\n  i_old = i-1, j++;         /* j has now been set to the partner of the\n                               previous pair for correct while-loop\n                               termination.  */\n  while (i != j) {\n      partner = pair_table[i];\n      if ((!partner) || (i==0))\n          i++, count++, bubble++;\n      else {\n          count += 2;\n          k = i, l = partner;    /* beginning of stack */\n          remember[++r] = k;\n          remember[++r] = l;\n          i = partner+1;         /* next i for the current loop */\n\n          start_k = k, start_l = l;\n          ladder = 0;\n          do {\n              k++, l--, ladder++;        /* go along the stack region */\n          }\n          while ((pair_table[k] == l) && (pair_table[k] > k));\n\n          fill = ladder-2;\n          if (ladder >= 2) {\n              angle[start_k+1+fill] += PIHALF;   /*  Loop entries and    */\n              angle[start_l-1-fill] += PIHALF;   /*  exits get an        */\n              angle[start_k]        += PIHALF;   /*  additional PI/2.    */\n              angle[start_l]        += PIHALF;   /*  Why ? (exercise)    */\n              if (ladder > 2) {\n                  for (; fill >= 1; fill--) {\n                      angle[start_k+fill] = Math.PI;    /*  fill in the angles  */\n                      angle[start_l-fill] = Math.PI;    /*  for the backbone    */\n                  }\n              }\n          }\n          stack_size[++stk] = ladder;\n          if (k <= l)\n            loop(k, l, pair_table);\n      }\n  }\n\n  polygon = Math.PI*(count-2)/count; /* bending angle in loop polygon */\n  remember[++r] = j;\n  begin = i_old < 0 ? 0 : i_old;\n  for (v = 1; v <= r; v++) {\n      diff  = remember[v]-begin;\n      for (fill = 0; fill <= diff; fill++)\n      angle[begin+fill] += polygon;\n      if (v > r)\n          break;\n      begin = remember[++v];\n  }\n  loop_size[++lp] = bubble;\n  }\n\n  loop(0, len+1, pair_table);\n  loop_size[lp] -= 2;     /* correct for cheating with function loop */\n\n  alpha = INIT_ANGLE;\n  x[0]  = INIT_X;\n  y[0]  = INIT_Y;\n\n  var poss = [];\n\n  poss.push([x[0], y[0]]);\n  for (i = 1; i < len; i++) {\n      x[i] = x[i-1]+RADIUS*Math.cos(alpha);\n      y[i] = y[i-1]+RADIUS*Math.sin(alpha);\n\n      poss.push([x[i], y[i]]);\n      alpha += Math.PI-angle[i+1];\n  }\n\n  return poss;\n}\n","export function Radloop() {\n\tthis.radius = null;\n\tthis.loopnumber = null;\n\tthis.next = null;\n    this.prev = null;\n}\n\nRadloop.prototype.getRadius = function(){\n\treturn this.radius;\n}\n\nRadloop.prototype.setRadius = function(radius){\n\tthis.radius = radius;\n}\n\nRadloop.prototype.getLoopnumber = function(){\n\treturn this.loopnumber;\n}\n\nRadloop.prototype.setLoopnumber = function(loopnumber){\n\tthis.loopnumber = loopnumber;\n}\n\nRadloop.prototype.getNext = function(){\n\treturn this.next;\n}\n\nRadloop.prototype.setNext = function(next){\n\tthis.next = next;\n}\n\nRadloop.prototype.getPrev = function(){\n\treturn this.prev;\n}\n\nRadloop.prototype.setPrev = function(prev){\n\tthis.prev = prev;\n}\n","import {Region} from './region.js';\n\nexport function Base() {\n\tthis.mate = null;\n\tthis.x = null;\n    this.y = null;\n\tthis.extracted = null;\n\tthis.region = new Region();\n}\n\nBase.prototype.getMate = function(){\n\treturn this.mate;\n}\n\nBase.prototype.setMate = function(mate){\n\tthis.mate = mate;\n}\n\nBase.prototype.getX = function(){\n\treturn this.x;\n}\n\nBase.prototype.setX = function(x){\n\tthis.x = x;\n}\n\nBase.prototype.getY = function(){\n\treturn this.y;\n}\n\nBase.prototype.setY = function(y){\n\tthis.y = y;\n}\n\nBase.prototype.isExtracted = function(){\n\treturn this.extracted;\n}\n\nBase.prototype.setExtracted = function(extracted){\n\tthis.extracted = extracted;\n}\n\nBase.prototype.getRegion = function(){\n\treturn this.region;\n}\n\nBase.prototype.setRegion = function(region){\n\tthis.region = region;\n}\n","import {Radloop} from './radloop.js';\nimport {Connection} from './connection.js';\nimport {Region} from './region.js';\nimport {Base} from './base.js';\nimport {Loop} from './loop.js';\n\nexport function NAView(){\n    this.ANUM = 9999.0;\n\tthis.MAXITER = 500;\n\n\tthis.bases = [];\n\tthis.nbase = null;\n    this.nregion = null;\n    this.loop_count = null;\n\n\tthis.root = new Loop();\n\tthis.loops = [];\n\n\tthis.regions = [];\n\n\tthis.rlphead = new Radloop();\n\n\tthis.lencut = 0.8;\n\tthis.RADIUS_REDUCTION_FACTOR = 1.4;\n\n\t// show algorithm step by step\n\tthis.angleinc = null;\n\n\tthis._h = null;\n\n\t// private boolean noIterationFailureYet = true;\n\n\tthis.HELIX_FACTOR = 0.6;\n\tthis.BACKBONE_DISTANCE = 27;\n}\n\nNAView.prototype.naview_xy_coordinates = function(pair_table){\n    var x = [];\n\tvar y = [];\n    if (pair_table.length === 0 || pair_table[0] === 0){\n        return 0;\n    }\n    var i;\n    this.nbase = pair_table[0];\n    this.bases = [];\n    for (var index = 0; index < this.nbase + 1; index++){\n        this.bases.push(new Base());\n    }\n    this.regions = [];\n    for (var index = 0; index < this.nbase + 1; index++){\n        this.regions.push(new Region());\n    }\n    this.read_in_bases(pair_table);\n    this.rlphead = null;\n    this.find_regions();\n    this.loop_count = 0;\n    this.loops = [];\n    for (var index = 0; index < this.nbase + 1; index++){\n        this.loops.push(new Loop());\n    }\n    this.construct_loop(0);\n    this.find_central_loop();\n    this.traverse_loop(this.root, null);\n\n    for (i = 0; i < this.nbase; i++){\n        x.push(100 + this.BACKBONE_DISTANCE * this.bases[i + 1].getX());\n        y.push(100 + this.BACKBONE_DISTANCE * this.bases[i + 1].getY());\n    }\n\n    return {\n        nbase: this.nbase,\n        x: x,\n        y: y\n    }\n}\n\nNAView.prototype.read_in_bases = function read_in_bases(pair_table){\n    var i = null;\n    var npairs = null;\n\n    // Set up an origin.\n    this.bases.push(new Base());\n    this.bases[0].setMate(0);\n    this.bases[0].setExtracted(false);\n    this.bases[0].setX(this.ANUM);\n    this.bases[0].setY(this.ANUM);\n\n    for (npairs = 0, i = 1; i <= this.nbase; i++){\n        this.bases.push(new Base());\n        this.bases[i].setExtracted(false);\n        this.bases[i].setX(this.ANUM);\n        this.bases[i].setY(this.ANUM);\n        this.bases[i].setMate(pair_table[i]);\n        if (pair_table[i] > i)\n            npairs++;\n    }\n    // must have at least 1 pair to avoid segfault\n    if (npairs == 0){\n        this.bases[1].setMate(this.nbase);\n        this.bases[this.nbase].setMate(1);\n    }\n}\n\nNAView.prototype.find_regions = function find_regions(){\n    var i = null;\n    var mate = null;\n    var nb1 = null;\n\n    nb1 = this.nbase + 1;\n    var mark = [];\n    for (i = 0; i < nb1; i++){\n        mark.push(false);\n    }\n    this.nregion = 0;\n    for (i = 0; i <= this.nbase; i++) {\n        if ((mate = this.bases[i].getMate()) != 0 && !mark[i]) {\n            this.regions[this.nregion].setStart1(i);\n            this.regions[this.nregion].setEnd2(mate);\n            mark[i] = true;\n            mark[mate] = true;\n            this.bases[i].setRegion(this.regions[this.nregion]);\n            this.bases[mate].setRegion(this.regions[this.nregion]);\n            for (i++, mate--; i < mate && this.bases[i].getMate() == mate; i++, mate--) {\n                mark[mate] = true;\n                mark[i]= true;\n                this.bases[i].setRegion(this.regions[this.nregion]);\n                this.bases[mate].setRegion(this.regions[this.nregion]);\n            }\n            this.regions[this.nregion].setEnd1(--i);\n            this.regions[this.nregion].setStart2(mate + 1);\n\n            this.nregion++;\n        }\n    }\n}\n\nNAView.prototype.construct_loop = function construct_loop(ibase){\n    var i = null;\n    var mate = null;\n    var retloop = new Loop();\n    var lp = new Loop();\n    var cp = new Connection();\n    var rp = new Region();\n    var rlp = new Radloop();\n    retloop = this.loops[this.loop_count++];\n    retloop.setNconnection(0);\n    retloop.setDepth(0);\n    retloop.setNumber(this.loop_count);\n    retloop.setRadius(0.0);\n\n    for (rlp = this.rlphead; rlp != null; rlp = rlp.getNext())\n        if (rlp.getLoopnumber() == this.loop_count)\n            retloop.setRadius(rlp.getRadius());\n    i = ibase;\n    do {\n        if ((mate = this.bases[i].getMate()) != 0) {\n            rp = this.bases[i].getRegion();\n            if (!this.bases[rp.getStart1()].isExtracted()) {\n                if (i == rp.getStart1()) {\n                    this.bases[rp.getStart1()].setExtracted(true);\n                    this.bases[rp.getEnd1()].setExtracted(true);\n                    this.bases[rp.getStart2()].setExtracted(true);\n                    this.bases[rp.getEnd2()].setExtracted(true);\n                    lp = this.construct_loop(rp.getEnd1() < this.nbase ? rp.getEnd1() + 1\n                            : 0);\n                } else if (i == rp.getStart2()) {\n                    this.bases[rp.getStart2()].setExtracted(true);\n                    this.bases[rp.getEnd2()].setExtracted(true);\n                    this.bases[rp.getStart1()].setExtracted(true);\n                    this.bases[rp.getEnd1()].setExtracted(true);\n                    lp = this.construct_loop(rp.getEnd2() < this.nbase ? rp.getEnd2() + 1\n                            : 0);\n                } else {\n                    console.log(\"Something went terribly wrong ....\");\n                }\n                retloop.setNconnection(retloop.getNconnection() + 1);\n                cp = new Connection();\n                retloop.setConnection(retloop.getNconnection() - 1,\tcp);\n                retloop.setConnection(retloop.getNconnection(), null);\n                cp.setLoop(lp);\n                cp.setRegion(rp);\n                if(i == rp.getStart1()) {\n                    cp.setStart(rp.getStart1());\n                    cp.setEnd(rp.getEnd2());\n                } else {\n                    cp.setStart(rp.getStart2());\n                    cp.setEnd(rp.getEnd1());\n                }\n                cp.setExtruded(false);\n                cp.setBroken(false);\n                lp.setNconnection(lp.getNconnection() + 1);\n                cp = new Connection();\n                lp.setConnection(lp.getNconnection() - 1, cp);\n                lp.setConnection(lp.getNconnection(), null);\n                cp.setLoop(retloop);\n                cp.setRegion(rp);\n                if (i == rp.getStart1()) {\n                    cp.setStart(rp.getStart2());\n                    cp.setEnd(rp.getEnd1());\n                } else {\n                    cp.setStart(rp.getStart1());\n                    cp.setEnd(rp.getEnd2());\n                }\n                cp.setExtruded(false);\n                cp.setBroken(false);\n            }\n            i = mate;\n        }\n        if (++i > this.nbase)\n            i = 0;\n    } while (i != ibase);\n    return retloop;\n}\n\nNAView.prototype.find_central_loop = function find_central_loop(){\n    var lp = new Loop();\n    var maxconn = null;\n    var maxdepth = null;\n    var i = null;\n\n    determine_depths.bind(this)();\n    maxconn = 0;\n    maxdepth = -1;\n    for (i = 0; i < this.loop_count; i++) {\n        lp = this.loops[i];\n        if (lp.getNconnection() > maxconn) {\n            maxdepth = lp.getDepth();\n            maxconn = lp.getNconnection();\n            this.root = lp;\n        } else if (lp.getDepth() > maxdepth\n                && lp.getNconnection() == maxconn) {\n            maxdepth = lp.getDepth();\n            this.root = lp;\n        }\n    }\n}\n\nfunction determine_depths() {\n    var lp = new Loop();\n    var i = null;\n    var j = null;\n\n    for (i = 0; i < this.loop_count; i++) {\n        lp = this.loops[i];\n        for (j = 0; j < this.loop_count; j++){\n            this.loops[j].setMark(false);\n        }\n        lp.setDepth(depth(lp));\n    }\n}\n\nfunction depth(lp){\n    var count = null;\n    var ret = null;\n    var d = null;\n\n    if (lp.getNconnection() <= 1){\n        return 0;\n    }\n    if (lp.isMark()){\n        return -1;\n    }\n    lp.setMark(true);\n    count = 0;\n    ret = 0;\n    for (var i = 0; lp.getConnection(i) != null; i++) {\n        d = depth(lp.getConnection(i).getLoop());\n        if (d >= 0) {\n            if (++count == 1){\n                ret = d;\n            }\n            else if (ret > d){\n                ret = d;\n            }\n        }\n    }\n    lp.setMark(false);\n    return ret + 1;\n}\n\nNAView.prototype.traverse_loop = function traverse_loop(lp, anchor_connection){\n    var xs, ys, xe, ye, xn, yn, angleinc, r;\n    var radius, xc, yc, xo, yo, astart, aend, a;\n    var cp, cpnext, acp, cpprev;\n    var i, j, n, ic;\n    var da, maxang;\n    var count, icstart, icend, icmiddle, icroot;\n    var done, done_all_connections, rooted;\n    var sign;\n    var midx, midy, nrx, nry, mx, my, vx, vy, dotmv, nmidx, nmidy;\n    var icstart1, icup, icdown, icnext, direction;\n    var dan, dx, dy, rr;\n    var cpx, cpy, cpnextx, cpnexty, cnx, cny, rcn, rc, lnx, lny, rl, ac, acn, sx, sy, dcp;\n    var imaxloop = 0;\n\n    angleinc = 2 * Math.PI / (this.nbase + 1);\n    acp = null;\n    icroot = -1;\n    var indice = 0;\n\n    for (ic = 0; (cp = lp.getConnection(indice)) != null; indice++, ic++) {\n        xs = -Math.sin(angleinc * cp.getStart());\n        ys = Math.cos(angleinc * cp.getStart());\n        xe = -Math.sin(angleinc * cp.getEnd());\n        ye = Math.cos(angleinc * cp.getEnd());\n        xn = ye - ys;\n        yn = xs - xe;\n        r = Math.sqrt(xn * xn + yn * yn);\n        cp.setXrad(xn / r);\n        cp.setYrad(yn / r);\n        cp.setAngle(Math.atan2(yn, xn));\n        if (cp.getAngle() < 0.0){\n            cp.setAngle(cp.getAngle() + 2 * Math.PI);\n        }\n        if (anchor_connection != null\n                && anchor_connection.getRegion() == cp.getRegion()) {\n            acp = cp;\n            icroot = ic;\n        }\n    }\n    set_radius: while (true) {\n        this.determine_radius(lp, this.lencut);\n        radius = lp.getRadius()/this.RADIUS_REDUCTION_FACTOR;\n        if (anchor_connection == null){\n            xc = yc = 0.0;\n        }\n        else {\n            xo = (this.bases[acp.getStart()].getX() + this.bases\n                    [acp.getEnd()].getX()) / 2.0;\n            yo = (this.bases[acp.getStart()].getY() + this.bases\n                    [acp.getEnd()].getY()) / 2.0;\n            xc = xo - radius * acp.getXrad();\n            yc = yo - radius * acp.getYrad();\n        }\n\n        // The construction of the connectors will proceed in blocks of\n        // connected connectors, where a connected connector pairs means two\n        // connectors that are forced out of the drawn circle because they\n        // are too close together in angle.\n\n        // First, find the start of a block of connected connectors\n\n        if (icroot == -1){\n            icstart = 0;\n        }\n        else {\n            icstart = icroot;\n        }\n        cp = lp.getConnection(icstart);\n        count = 0;\n        done = false;\n        do {\n            j = icstart - 1;\n            if (j < 0){\n                j = lp.getNconnection() - 1;\n            }\n            cpprev = lp.getConnection(j);\n            if (!this.connected_connection(cpprev, cp)) {\n                done = true;\n            }\n            else {\n                icstart = j;\n                cp = cpprev;\n            }\n            if (++count > lp.getNconnection()) {\n                // Here everything is connected. Break on maximum angular\n                // separation between connections.\n                maxang = -1.0;\n                for (ic = 0; ic < lp.getNconnection(); ic++) {\n                    j = ic + 1;\n                    if (j >= lp.getNconnection()){\n                        j = 0;\n                    }\n                    cp = lp.getConnection(ic);\n                    cpnext = lp.getConnection(j);\n                    ac = cpnext.getAngle() - cp.getAngle();\n                    if (ac < 0.0){\n                        ac += 2 * Math.PI;\n                    }\n                    if (ac > maxang) {\n                        maxang = ac;\n                        imaxloop = ic;\n                    }\n                }\n                icend = imaxloop;\n                icstart = imaxloop + 1;\n                if (icstart >= lp.getNconnection()){\n                    icstart = 0;\n                }\n                cp = lp.getConnection(icend);\n                cp.setBroken(true);\n                done = true;\n            }\n        } while (!done);\n        done_all_connections = false;\n        icstart1 = icstart;\n        while (!done_all_connections) {\n            count = 0;\n            done = false;\n            icend = icstart;\n            rooted = false;\n            while (!done) {\n                cp = lp.getConnection(icend);\n                if (icend == icroot){\n                    rooted = true;\n                }\n                j = icend + 1;\n                if (j >= lp.getNconnection()) {\n                    j = 0;\n                }\n                cpnext = lp.getConnection(j);\n                if (this.connected_connection(cp, cpnext)) {\n                    if (++count >= lp.getNconnection()){\n                        break;\n                    }\n                    icend = j;\n                }\n                else {\n                    done = true;\n                }\n            }\n            icmiddle = this.find_ic_middle(icstart, icend, anchor_connection,\n                    acp, lp);\n            ic = icup = icdown = icmiddle;\n            done = false;\n            direction = 0;\n            while (!done) {\n                if (direction < 0) {\n                    ic = icup;\n                }\n                else if (direction == 0) {\n                    ic = icmiddle;\n                }\n                else {\n                    ic = icdown;\n                }\n                if (ic >= 0) {\n                    cp = lp.getConnection(ic);\n                    if (anchor_connection == null || acp != cp) {\n                        if (direction == 0) {\n                            astart = cp.getAngle()\n                                    - Math.asin(1.0 / 2.0 / radius);\n                            aend = cp.getAngle()\n                                    + Math.asin(1.0 / 2.0 / radius);\n                            this.bases[cp.getStart()].setX(\n                                    xc + radius * Math.cos(astart));\n                            this.bases[cp.getStart()].setY(\n                                    yc + radius * Math.sin(astart));\n                            this.bases[cp.getEnd()].setX(\n                                    xc + radius * Math.cos(aend));\n                            this.bases[cp.getEnd()].setY(\n                                    yc + radius * Math.sin(aend));\n                        }\n                        else if (direction < 0) {\n                            j = ic + 1;\n                            if (j >= lp.getNconnection()){\n                                j = 0;\n                            }\n                            cp = lp.getConnection(ic);\n                            cpnext = lp.getConnection(j);\n                            cpx = cp.getXrad();\n                            cpy = cp.getYrad();\n                            ac = (cp.getAngle() + cpnext.getAngle()) / 2.0;\n                            if (cp.getAngle() > cpnext.getAngle()){\n                                ac -= Math.PI;\n                            }\n                            cnx = Math.cos(ac);\n                            cny = Math.sin(ac);\n                            lnx = cny;\n                            lny = -cnx;\n                            da = cpnext.getAngle() - cp.getAngle();\n                            if (da < 0.0){\n                                da += 2 * Math.PI;\n                            }\n                            if (cp.isExtruded()) {\n                                if (da <= Math.PI / 2){\n                                    rl = 2.0;\n                                }\n                                else {\n                                    rl = 1.5;\n                                }\n                            }\n                            else {\n                                rl = 1.0;\n                            }\n                            this.bases[cp.getEnd()].setX(\n                                    this.bases[cpnext.getStart()].getX()\n                                            + rl * lnx);\n                            this.bases[cp.getEnd()].setY(\n                                    this.bases[cpnext.getStart()].getY()\n                                            + rl * lny);\n                            this.bases[cp.getStart()].setX(\n                                    this.bases[cp.getEnd()].getX() + cpy);\n                            this.bases[cp.getStart()].setY(\n                                    this.bases[cp.getEnd()].getY() - cpx);\n                        } else {\n                            j = ic - 1;\n                            if (j < 0){\n                                j = lp.getNconnection() - 1;\n                            }\n                            cp = lp.getConnection(j);\n                            cpnext = lp.getConnection(ic);\n                            cpnextx = cpnext.getXrad();\n                            cpnexty = cpnext.getYrad();\n                            ac = (cp.getAngle() + cpnext.getAngle()) / 2.0;\n                            if (cp.getAngle() > cpnext.getAngle()){\n                                ac -= Math.PI;\n                            }\n                            cnx = Math.cos(ac);\n                            cny = Math.sin(ac);\n                            lnx = -cny;\n                            lny = cnx;\n                            da = cpnext.getAngle() - cp.getAngle();\n                            if (da < 0.0){\n                                da += 2 * Math.PI;\n                            }\n                            if (cp.isExtruded()) {\n                                if (da <= Math.PI / 2){\n                                    rl = 2.0;\n                                }\n                                else {\n                                    rl = 1.5;\n                                }\n                            }\n                            else {\n                                rl = 1.0;\n                            }\n                            this.bases[cpnext.getStart()].setX(\n                                    this.bases[cp.getEnd()].getX() + rl\n                                            * lnx);\n                            this.bases[cpnext.getStart()].setY(\n                                    this.bases[cp.getEnd()].getY() + rl\n                                            * lny);\n                            this.bases[cpnext.getEnd()].setX(\n                                    this.bases[cpnext.getStart()].getX()\n                                            - cpnexty);\n                            this.bases[cpnext.getEnd()].setY(\n                                    this.bases[cpnext.getStart()].getY()\n                                            + cpnextx);\n                        }\n                    }\n                }\n                if (direction < 0) {\n                    if (icdown == icend) {\n                        icdown = -1;\n                    }\n                    else if (icdown >= 0) {\n                        if (++icdown >= lp.getNconnection()) {\n                            icdown = 0;\n                        }\n                    }\n                    direction = 1;\n                }\n                else {\n                    if (icup == icstart){\n                        icup = -1;\n                    }\n                    else if (icup >= 0) {\n                        if (--icup < 0) {\n                            icup = lp.getNconnection() - 1;\n                        }\n                    }\n                    direction = -1;\n                }\n                done = icup == -1 && icdown == -1;\n            }\n            icnext = icend + 1;\n            if (icnext >= lp.getNconnection()){\n                icnext = 0;\n            }\n            if (icend != icstart\n                    && (!(icstart == icstart1 && icnext == icstart1))) {\n\n                // Move the bases just constructed (or the radius) so that\n                // the bisector of the end points is radius distance away\n                // from the loop center.\n\n                cp = lp.getConnection(icstart);\n                cpnext = lp.getConnection(icend);\n                dx = this.bases[cpnext.getEnd()].getX()\n                        - this.bases[cp.getStart()].getX();\n                dy = this.bases[cpnext.getEnd()].getY()\n                        - this.bases[cp.getStart()].getY();\n                midx = this.bases[cp.getStart()].getX() + dx / 2.0;\n                midy = this.bases[cp.getStart()].getY() + dy / 2.0;\n                rr = Math.sqrt(dx * dx + dy * dy);\n                mx = dx / rr;\n                my = dy / rr;\n                vx = xc - midx;\n                vy = yc - midy;\n                rr = Math.sqrt(dx * dx + dy * dy);\n                vx /= rr;\n                vy /= rr;\n                dotmv = vx * mx + vy * my;\n                nrx = dotmv * mx - vx;\n                nry = dotmv * my - vy;\n                rr = Math.sqrt(nrx * nrx + nry * nry);\n                nrx /= rr;\n                nry /= rr;\n\n                // Determine which side of the bisector the center should\n                // be.\n\n                dx = this.bases[cp.getStart()].getX() - xc;\n                dy = this.bases[cp.getStart()].getY() - yc;\n                ac = Math.atan2(dy, dx);\n                if (ac < 0.0){\n                    ac += 2 * Math.PI;\n                }\n                dx = this.bases[cpnext.getEnd()].getX() - xc;\n                dy = this.bases[cpnext.getEnd()].getY() - yc;\n                acn = Math.atan2(dy, dx);\n                if (acn < 0.0){\n                    acn += 2 * Math.PI;\n                }\n                if (acn < ac){\n                    acn += 2 * Math.PI;\n                }\n                if (acn - ac > Math.PI){\n                    sign = -1;\n                }\n                else {\n                    sign = 1;\n                }\n                nmidx = xc + sign * radius * nrx;\n                nmidy = yc + sign * radius * nry;\n                if (rooted) {\n                    xc -= nmidx - midx;\n                    yc -= nmidy - midy;\n                }\n                else {\n                    for (ic = icstart;;) {\n                        cp = lp.getConnection(ic);\n                        i = cp.getStart();\n                        this.bases[i].setX(\n                                this.bases[i].getX() + nmidx - midx);\n                        this.bases[i].setY(\n                                this.bases[i].getY() + nmidy - midy);\n                        i = cp.getEnd();\n                        this.bases[i].setX(\n                                this.bases[i].getX() + nmidx - midx);\n                        this.bases[i].setY(\n                                this.bases[i].getY() + nmidy - midy);\n                        if (ic == icend){\n                            break;\n                        }\n                        if (++ic >= lp.getNconnection()){\n                            ic = 0;\n                        }\n                    }\n                }\n            }\n            icstart = icnext;\n            done_all_connections = icstart == icstart1;\n        }\n        for (ic = 0; ic < lp.getNconnection(); ic++) {\n            cp = lp.getConnection(ic);\n            j = ic + 1;\n            if (j >= lp.getNconnection()){\n                j = 0;\n            }\n            cpnext = lp.getConnection(j);\n            dx = this.bases[cp.getEnd()].getX() - xc;\n            dy = this.bases[cp.getEnd()].getY() - yc;\n            rc = Math.sqrt(dx * dx + dy * dy);\n            ac = Math.atan2(dy, dx);\n            if (ac < 0.0){\n                ac += 2 * Math.PI;\n            }\n            dx = this.bases[cpnext.getStart()].getX() - xc;\n            dy = this.bases[cpnext.getStart()].getY() - yc;\n            rcn = Math.sqrt(dx * dx + dy * dy);\n            acn = Math.atan2(dy, dx);\n            if (acn < 0.0){\n                acn += 2 * Math.PI;\n            }\n            if (acn < ac){\n                acn += 2 * Math.PI;\n            }\n            dan = acn - ac;\n            dcp = cpnext.getAngle() - cp.getAngle();\n            if (dcp <= 0.0){\n                dcp += 2 * Math.PI;\n            }\n            if (Math.abs(dan - dcp) > Math.PI) {\n                if (cp.isExtruded()) {\n                    console.log(\"Warning from traverse_loop. Loop \"\n                            + lp.getNumber() + \" has crossed regions\\n\");\n                }\n                else if ((cpnext.getStart() - cp.getEnd()) != 1) {\n                    cp.setExtruded(true);\n                    continue set_radius; // remplacement du goto\n                }\n            }\n            if (cp.isExtruded()) {\n                this.construct_extruded_segment(cp, cpnext);\n            }\n            else {\n                n = cpnext.getStart() - cp.getEnd();\n                if (n < 0){\n                    n += this.nbase + 1;\n                }\n                angleinc = dan / n;\n                for (j = 1; j < n; j++) {\n                    i = cp.getEnd() + j;\n                    if (i > this.nbase){\n                        i -= this.nbase + 1;\n                    }\n                    a = ac + j * angleinc;\n                    rr = rc + (rcn - rc) * (a - ac) / dan;\n                    this.bases[i].setX(xc + rr * Math.cos(a));\n                    this.bases[i].setY(yc + rr * Math.sin(a));\n                }\n            }\n        }\n        break;\n    }\n    for (ic = 0; ic < lp.getNconnection(); ic++) {\n        if (icroot != ic) {\n            cp = lp.getConnection(ic);\n            //IM HERE\n            this.generate_region(cp);\n            this.traverse_loop(cp.getLoop(), cp);\n        }\n    }\n    n = 0;\n    sx = 0.0;\n    sy = 0.0;\n    for (ic = 0; ic < lp.getNconnection(); ic++) {\n        j = ic + 1;\n        if (j >= lp.getNconnection()){\n            j = 0;\n        }\n        cp = lp.getConnection(ic);\n        cpnext = lp.getConnection(j);\n        n += 2;\n        sx += this.bases[cp.getStart()].getX()\n                + this.bases[cp.getEnd()].getX();\n        sy += this.bases[cp.getStart()].getY()\n                + this.bases[cp.getEnd()].getY();\n        if (!cp.isExtruded()) {\n            for (j = cp.getEnd() + 1; j != cpnext.getStart(); j++) {\n                if (j > this.nbase){\n                    j -= this.nbase + 1;\n                }\n                n++;\n                sx += this.bases[j].getX();\n                sy += this.bases[j].getY();\n            }\n        }\n    }\n    lp.setX(sx / n);\n    lp.setY(sy / n);\n}\n\nNAView.prototype.determine_radius = function determine_radius(lp, lencut){\n    var mindit, ci, dt, sumn, sumd, radius, dit;\n    var i, j, end, start, imindit = 0;\n    var cp = new Connection(), cpnext = new Connection();\n    var rt2_2 = 0.7071068;\n\n    do {\n        mindit = 1.0e10;\n        for (sumd = 0.0, sumn = 0.0, i = 0; i < lp.getNconnection(); i++) {\n            cp = lp.getConnection(i);\n            j = i + 1;\n            if (j >= lp.getNconnection()){\n                j = 0;\n            }\n            cpnext = lp.getConnection(j);\n            end = cp.getEnd();\n            start = cpnext.getStart();\n            if (start < end){\n                start += this.nbase + 1;\n            }\n            dt = cpnext.getAngle() - cp.getAngle();\n            if (dt <= 0.0){\n                dt += 2 * Math.PI;\n            }\n            if (!cp.isExtruded()){\n                ci = start - end;\n            }\n            else {\n                if (dt <= Math.PI / 2){\n                    ci = 2.0;\n                }\n                else {\n                    ci = 1.5;\n                }\n            }\n            sumn += dt * (1.0 / ci + 1.0);\n            sumd += dt * dt / ci;\n            dit = dt / ci;\n            if (dit < mindit && !cp.isExtruded() && ci > 1.0) {\n                mindit = dit;\n                imindit = i;\n            }\n        }\n        radius = sumn / sumd;\n        if (radius < rt2_2){\n            radius = rt2_2;\n        }\n        if (mindit * radius < lencut) {\n            lp.getConnection(imindit).setExtruded(true);\n        }\n    } while (mindit * radius < lencut);\n    if (lp.getRadius() > 0.0){\n        radius = lp.getRadius();\n    }\n    else {\n        lp.setRadius(radius);\n    }\n}\n\nNAView.prototype.find_ic_middle = function find_ic_middle(icstart, icend, anchor_connection, acp, lp){\n    var count, ret, ic, i;\n    var done;\n\n    count = 0;\n    ret = -1;\n    ic = icstart;\n    done = false;\n    while (!done) {\n        if (count++ > lp.getNconnection() * 2) {\n            console.log(\"Infinite loop in 'find_ic_middle'\");\n        }\n        if (anchor_connection != null && lp.getConnection(ic) == acp) {\n            ret = ic;\n        }\n        done = ic == icend;\n        if (++ic >= lp.getNconnection()) {\n            ic = 0;\n        }\n    }\n    if (ret == -1) {\n        for (i = 1, ic = icstart; i < (count + 1) / 2; i++) {\n            if (++ic >= lp.getNconnection())\n                ic = 0;\n        }\n        ret = ic;\n    }\n    return ret;\n}\n\nNAView.prototype.construct_extruded_segment = function construct_extruded_segment(cp, cpnext){\n    var astart, aend1, aend2, aave, dx, dy, a1, a2, ac, rr, da, dac;\n    var start, end, n, nstart, nend;\n    var collision;\n\n    astart = cp.getAngle();\n    aend2 = aend1 = cpnext.getAngle();\n    if (aend2 < astart){\n        aend2 += 2 * Math.PI;\n    }\n    aave = (astart + aend2) / 2.0;\n    start = cp.getEnd();\n    end = cpnext.getStart();\n    n = end - start;\n    if (n < 0){\n        n += this.nbase + 1;\n    }\n    da = cpnext.getAngle() - cp.getAngle();\n    if (da < 0.0) {\n        da += 2 * Math.PI;\n    }\n    if (n == 2) {\n        this.construct_circle_segment(start, end);\n    }\n    else {\n        dx = this.bases[end].getX() - this.bases[start].getX();\n        dy = this.bases[end].getY() - this.bases[start].getY();\n        rr = Math.sqrt(dx * dx + dy * dy);\n        dx /= rr;\n        dy /= rr;\n        if (rr >= 1.5 && da <= Math.PI / 2) {\n            nstart = start + 1;\n            if (nstart > this.nbase){\n                nstart -= this.nbase + 1;\n            }\n            nend = end - 1;\n            if (nend < 0){\n                nend += this.nbase + 1;\n            }\n            this.bases[nstart].setX(this.bases[start].getX() + 0.5 * dx);\n            this.bases[nstart].setY(this.bases[start].getY() + 0.5 * dy);\n            this.bases[nend].setX(this.bases[end].getX() - 0.5 * dx);\n            this.bases[nend].setY(this.bases[end].getY() - 0.5 * dy);\n            start = nstart;\n            end = nend;\n        }\n        do {\n            collision = false;\n            this.construct_circle_segment(start, end);\n            nstart = start + 1;\n            if (nstart > this.nbase) {\n                nstart -= this.nbase + 1;\n            }\n            dx = this.bases[nstart].getX() - this.bases[start].getX();\n            dy = this.bases[nstart].getY() - this.bases[start].getY();\n            a1 = Math.atan2(dy, dx);\n            if (a1 < 0.0){\n                a1 += 2 * Math.PI;\n            }\n            dac = a1 - astart;\n            if (dac < 0.0){\n                dac += 2 * Math.PI;\n            }\n            if (dac > Math.PI){\n                collision = true;\n            }\n            nend = end - 1;\n            if (nend < 0){\n                nend += this.nbase + 1;\n            }\n            dx = this.bases[nend].getX() - this.bases[end].getX();\n            dy = this.bases[nend].getY() - this.bases[end].getY();\n            a2 = Math.atan2(dy, dx);\n            if (a2 < 0.0){\n                a2 += 2 * Math.PI;\n            }\n            dac = aend1 - a2;\n            if (dac < 0.0){\n                dac += 2 * Math.PI;\n            }\n            if (dac > Math.PI){\n                collision = true;\n            }\n            if (collision) {\n                ac = this.minf2(aave, astart + 0.5);\n                this.bases[nstart].setX(\n                        this.bases[start].getX() + Math.cos(ac));\n                this.bases[nstart].setY(\n                        this.bases[start].getY() + Math.sin(ac));\n                start = nstart;\n                ac = this.maxf2(aave, aend2 - 0.5);\n                this.bases[nend].setX(this.bases[end].getX() + Math.cos(ac));\n                this.bases[nend].setY(this.bases[end].getY() + Math.sin(ac));\n                end = nend;\n                n -= 2;\n            }\n        } while (collision && n > 1);\n    }\n}\n\nNAView.prototype.construct_circle_segment = function construct_circle_segment(start, end){\n    var dx, dy, rr, midx, midy, xn, yn, nrx, nry, mx, my, a;\n    var l, j, i;\n\n    dx = this.bases[end].getX() - this.bases[start].getX();\n    dy = this.bases[end].getY() - this.bases[start].getY();\n    rr = Math.sqrt(dx * dx + dy * dy);\n    l = end - start;\n    if (l < 0){\n        l += this.nbase + 1;\n    }\n    if (rr >= l) {\n        dx /= rr;\n        dy /= rr;\n        for (j = 1; j < l; j++) {\n            i = start + j;\n            if (i > this.nbase){\n                i -= this.nbase + 1;\n            }\n            this.bases[i].setX(\n                    this.bases[start].getX() + dx * j / l);\n            this.bases[i].setY(\n                    this.bases[start].getY() + dy * j / l);\n        }\n    }\n    else {\n        this.find_center_for_arc((l - 1), rr);\n        dx /= rr;\n        dy /= rr;\n        midx = this.bases[start].getX() + dx * rr / 2.0;\n        midy = this.bases[start].getY() + dy * rr / 2.0;\n        xn = dy;\n        yn = -dx;\n        nrx = midx + this._h * xn;\n        nry = midy + this._h * yn;\n        mx = this.bases[start].getX() - nrx;\n        my = this.bases[start].getY() - nry;\n        rr = Math.sqrt(mx * mx + my * my);\n        a = Math.atan2(my, mx);\n        for (j = 1; j < l; j++) {\n            i = start + j;\n            if (i > this.nbase){\n                i -= this.nbase + 1;\n            }\n            this.bases[i].setX(nrx + rr * Math.cos(a + j * this.angleinc));\n            this.bases[i].setY(nry + rr * Math.sin(a + j * this.angleinc));\n        }\n    }\n}\n\nNAView.prototype.find_center_for_arc = function find_center_for_arc(n, b){\n    var h, hhi, hlow, r, disc, theta, e, phi;\n    var iter;\n\n    hhi = (n + 1.0) / Math.PI;\n    // changed to prevent div by zero if (ih)\n    hlow = -hhi - b / (n + 1.000001 - b);\n    if (b < 1){\n        // otherwise we might fail below (ih)\n        hlow = 0;\n    }\n    iter = 0;\n    do {\n        h = (hhi + hlow) / 2.0;\n        r = Math.sqrt(h * h + b * b / 4.0);\n        disc = 1.0 - 0.5 / (r * r);\n        if (Math.abs(disc) > 1.0) {\n            console.log(\"Unexpected large magnitude discriminant = \" + disc\n                            + \" \" + r);\n        }\n        theta = Math.acos(disc);\n        phi = Math.acos(h / r);\n        e = theta * (n + 1) + 2 * phi - 2 * Math.PI;\n        if (e > 0.0) {\n            hlow = h;\n        }\n        else {\n            hhi = h;\n        }\n    } while (Math.abs(e) > 0.0001 && ++iter < this.MAXITER);\n    if (iter >= this.MAXITER) {\n        if (noIterationFailureYet) {\n            console.log(\"Iteration failed in find_center_for_arc\");\n            noIterationFailureYet = false;\n        }\n        h = 0.0;\n        theta = 0.0;\n    }\n    this._h = h;\n    this.angleinc = theta;\n}\n\nNAView.prototype.generate_region = function generate_region(cp){\n    var l, start, end, i, mate;\n    var rp;\n\n    rp = cp.getRegion();\n    l = 0;\n    if (cp.getStart() == rp.getStart1()) {\n        start = rp.getStart1();\n        end = rp.getEnd1();\n    }\n    else {\n        start = rp.getStart2();\n        end = rp.getEnd2();\n    }\n    if (this.bases[cp.getStart()].getX() > this.ANUM - 100.0\n            || this.bases[cp.getEnd()].getX() > this.ANUM - 100.0) {\n        console.log(\n                \"Bad region passed to generate_region. Coordinates not defined.\");\n    }\n    for (i = start + 1; i <= end; i++) {\n        l++;\n        this.bases[i].setX(\n                this.bases[cp.getStart()].getX() + this.HELIX_FACTOR * l\n                        * cp.getXrad());\n        this.bases[i].setY(\n                this.bases[cp.getStart()].getY() + this.HELIX_FACTOR * l\n                        * cp.getYrad());\n        mate = this.bases[i].getMate();\n        this.bases[mate].setX(\n                this.bases[cp.getEnd()].getX() + this.HELIX_FACTOR * l\n                        * cp.getXrad());\n        this.bases[mate].setY(\n                this.bases[cp.getEnd()].getY() + this.HELIX_FACTOR * l\n                        * cp.getYrad());\n\n    }\n}\n\nNAView.prototype.minf2 = function minf2(x1, x2) {\n    return ((x1) < (x2)) ? (x1) : (x2);\n}\n\nNAView.prototype.maxf2 = function maxf2(x1, x2) {\n    return ((x1) > (x2)) ? (x1) : (x2);\n}\n\nNAView.prototype.connected_connection = function connected_connection(cp, cpnext) {\n    if (cp.isExtruded()) {\n        return true;\n    }\n    else if (cp.getEnd() + 1 == cpnext.getStart()) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n","/* Version: 0.2\n* Date: 2015-03-15\n*/\n\nimport fstyle from './fornac.css';\n\nimport d3 from 'd3';\nimport slugid from 'slugid';\nimport {contextMenu} from './d3-context-menu.js';\n\nimport {RNAGraph} from './rnagraph.js';\nimport {ColorScheme, rnaUtilities} from './rnautils.js';\n\nimport {simpleXyCoordinates} from './simplernaplot.js';\nimport {NAView} from './naview/naview.js';\n\nexport function FornaContainer(element, passedOptions = {}) {\n    var self = this;\n\n    let options = {\n        'editable': false,\n        'zoomable': true,\n        'animation': true,\n        'displayAllLinks': false,\n        'labelInterval': 10,\n        'chargeDistance': 110,\n        'friction': 0.35,\n        'middleCharge': -30,\n        'otherCharge': -30,\n        'linkDistanceMultiplier': 15,\n        'initialSize': null,\n        'layout': 'standard-polygonal',\n        'transitionDuration': 500,\n        'maxNodeRadius': 80    // the maximum radius of a node when the view is centered\n    };\n\n    self.options = Object.assign(options, passedOptions);\n\n    if (self.options.initialSize !== null) {\n        self.options.svgW = self.options.initialSize[0];\n        self.options.svgH = self.options.initialSize[1];\n    } else {\n        self.options.svgW = 300;\n        self.options.svgH = 300;\n    }\n\n    self.linkStrengths = {\n        'pseudoknot': 0.00,\n        'proteinChain': 0.00,\n        'chainChain': 0.00,\n        'intermolecule': 10.00,\n        'external': 0.00,\n        'other': 10.00\n    };\n\n    self.displayParameters = {\n        'displayNumbering': true,\n        'displayNodeOutline': true,\n        'displayNodeLabel': true,\n        'displayLinks': true,\n        'displayPseudoknotLinks': true,\n        'displayProteinLinks': true,\n        'displayDirectionArrows': true\n    };\n\n    self.colorScheme = 'structure';\n    self.customColors = {};\n    self.rnas = {};\n    self.extraLinks = []; //store links between different RNAs\n\n    // global mouse event vars\n    var mousedownLink = null,\n        mousedownNode = null,\n        mouseupNode = null;\n    let linkContextMenuShown = false;\n\n    let resetMouseVars = () => {\n        mousedownNode = null;\n        mouseupNode = null;\n        mousedownLink = null;\n    }\n\n    var graph = self.graph = {\n        'nodes':[],\n        'links':[]\n    };\n\n    Array.prototype.equals = function (array) {\n        // if the other array is a falsy value, return\n        if (!array)\n            return false;\n\n        // compare lengths - can save a lot of time\n        if (this.length != array.length)\n            return false;\n\n        for (var i = 0, l=this.length; i < l; i++) {\n            // Check if we have nested arrays\n            if (this[i] instanceof Array && array[i] instanceof Array) {\n                // recurse into the nested arrays\n                if (!this[i].equals(array[i]))\n                    return false;\n            }\n            else if (this[i] != array[i]) {\n                // Warning - two different object instances will never be equal: {x:20} != {x:20}\n                return false;\n            }\n        }\n        return true;\n    };\n\n    /* Register global mouse and key events */\n    if (self.options.editable || self.options.animation) {\n      var shiftKeydown = false;\n      var ctrlKeydown = false;\n\n      let keydown = () => {\n          switch (d3.event.keyCode) {\n              case 68:    //'d' key\n                  console.log('dotbracket:', self.getStructuresDotBracket());\n                  break;\n              case 16:\n                  shiftKeydown = true;\n                  break;\n              case 17:\n                  ctrlKeydown = true;\n                  break;\n              case 67: //c\n                  self.centerView();\n                  break;\n          }\n\n          if (ctrlKeydown) {\n            // Ctrl key must disable panning and zooming\n            if (self.options.zoomable)\n              disableZooming()\n            // Ctrl Button must enable crosshair and start brusher\n            if (self.options.editable || self.options.animation) {\n              enableBrushing()\n            }\n          }\n      }\n\n      let keyup = () => {\n          shiftKeydown = false;\n          ctrlKeydown = false;\n\n          // enable zoomer\n          if (self.options.zoomable)\n            enableZooming()\n          // disable brushing events\n          disableBrushing()\n      }\n\n      d3.select('body')\n      .on('keydown', keydown)\n      .on('keyup', keyup)\n      .on('contextmenu', function() {\n          d3.event.preventDefault();\n      });\n    }\n\n    /* Register global context menu */\n    if (self.options.editable) {\n        let backgroundMenu = [\n            {\n                title: 'Add Node',\n                action: function(elm, d, i, mousePos) {\n\n                },\n                children: [{\n                    'title': 'A',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'A', 'centerPos': canvasMousePos});\n                    }\n                },\n                {\n                    'title': 'C',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'C', 'centerPos': canvasMousePos});\n                    }\n\n                    },\n                {\n                    'title': 'G',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'G', 'centerPos': canvasMousePos});\n                    }\n\n                    },\n                {\n                    'title': 'U',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'U', 'centerPos': canvasMousePos});\n\n                    }\n                }\n                ],\n                disabled: false // optional, defaults to false\n            }\n        ]\n\n        let nodeMenu = [\n            {\n                title: 'Delete Node',\n                action: function(elm, d, i) {\n                    deleteNode(d);\n                },\n                disabled: false // optional, defaults to false\n            },\n            {\n                title: 'Change Node',\n                action: function(elm, d, i) {\n                    console.log('You have clicked the second item!');\n                    console.log('The data for this circle is: ' + d);\n                },\n                children: [\n                    {\n                        title: 'A',\n                        action: function(elm, d, i) {\n                            changeNode('A', d);\n                        }\n                    },\n                    {\n                        title: 'C',\n                        action: function(elm, d, i) {\n                            changeNode('C', d);\n\n                        }\n                    },\n                    {\n                        title: 'G',\n                        action: function(elm, d, i) {\n                            changeNode('G', d);\n\n                        }\n                    },\n                    {\n                        title: 'U',\n                        action: function(elm, d, i) {\n                            changeNode('U', d);\n                        }\n                    },\n                ]\n            },\n            {\n                title: 'Insert Before',\n                action: function(elm, d, i) {\n\n                },\n                children: [\n                    {\n                        title: 'A',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('A', d, -1);\n                        }\n                    },\n                    {\n                        title: 'C',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('C', d, -1);\n\n                        }\n                    },\n                    {\n                        title: 'G',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('G', d, -1);\n\n                        }\n                    },\n                    {\n                        title: 'U',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('U', d, -1);\n                        }\n                    },\n                ]\n            },\n            {\n                title: 'Insert After',\n                action: function(elm, d, i) {\n                    console.log('d:', d);\n\n                },\n                children: [\n                    {\n                        title: 'A',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('A', d, 0);\n\n                        }\n                    },\n                    {\n                        title: 'C',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('C', d, 0);\n                        }\n                    },\n                    {\n                        title: 'G',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('G', d, 0);\n                        }\n                    },\n                    {\n                        title: 'U',\n                        action: function(elm, d, i) {\n                            insertNodeBeforeOrAfter('U', d, 0);\n                        }\n                    },\n                ]\n            }\n        ]\n\n        self.nodeContextMenu = contextMenu(nodeMenu);\n        self.backgroundContextMenu = contextMenu(backgroundMenu);\n\n    }  else {\n        //console.log('empty context menu');\n        self.nodeContextMenu = function() {};\n    }\n\n    /* Draw the plot here */\n    d3.select(element).select('svg').remove();\n\n    var svg = d3.select(element)\n    .attr('tabindex', 1)\n    .each(function() { this.focus(); })\n    .append('svg:svg')\n    .attr('preserveAspectRatio', 'xMidYMid meet')\n    .attr('viewBox', '0 0 ' + self.options.svgW + ' ' + self.options.svgH)\n\n    self.options.svg = svg;\n\n    if (self.options.editable || self.options.animation) {\n      var mouseEventHelper = svg.append('svg:g')\n      .on('mousemove', () => {\n            // only if we are dragging\n            if (!mousedownNode) return;\n\n            // update drag line\n            let mpos = d3.mouse(vis.node());\n            dragLine\n            .attr('x1', mousedownNode.x)\n            .attr('y1', mousedownNode.y)\n            .attr('x2', mpos[0])\n            .attr('y2', mpos[1]);\n          })\n      .on('mousedown', () => {\n      })\n      .on('mouseup', () => {\n            if (mousedownNode && !linkContextMenuShown) {\n                dragLine.classed(fstyle.transparent, true);\n            }\n            // clear mouse event vars\n            resetMouseVars();\n            //update()\n          })\n      .classed(fstyle.mouseEventHelper, true)\n      .style('pointer-events', 'all')\n\n      // draw a background layer for mouse events\n      mouseEventHelper.append('svg:rect')\n      .classed('background', true)\n      .style('visibility', 'hidden')\n      .attr('width', self.options.svgW)\n      .attr('height', self.options.svgH)\n      .on('mousedown', function() {\n        //console.log('background click');\n        deselectAllNodes()\n      })\n    } else {\n      var mouseEventHelper = svg;\n    }\n\n    var vis = mouseEventHelper.append('svg:g')\n    .classed(fstyle.plot, true)\n    var visLinks = vis.append('svg:g')\n    .classed('fornac-links', true);\n    var visNodes = vis.append('svg:g')\n    .classed('fornac-nodes', true);\n\n    // line displayed when dragging new nodes\n    if (self.options.editable) {\n      var dragLine = vis.append('line')\n      .attr('class', fstyle.dragLine)\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr('x2', 0)\n      .attr('y2', 0);\n\n      svg.on('contextmenu', self.backgroundContextMenu);\n    }\n\n    /* Zooming related objects and functions */\n    var xScale = d3.scale.linear()\n    .domain([0,self.options.svgW]).range([0,self.options.svgW]);\n    var yScale = d3.scale.linear()\n    .domain([0,self.options.svgH]).range([0, self.options.svgH]);\n\n    self.zoomer = d3.behavior.zoom()\n      .scaleExtent([0.1,10])\n      .x(xScale)\n      .y(yScale)\n      .on('zoom', () => {\n          vis.attr('transform',\n                   'translate(' + d3.event.translate + ')' + ' scale(' + d3.event.scale + ')');\n      });\n\n    let enableZooming = () => {\n      svg.call(self.zoomer)\n      .on(\"dblclick.zoom\", null);\n    }\n\n    let disableZooming = () => {\n      svg.call(self.zoomer)\n      .on(\"dblclick.zoom\", null)\n      .on('mousedown.zoom', null)\n      .on('touchstart.zoom', null)\n      .on('touchmove.zoom', null)\n      .on('touchend.zoom', null);\n    }\n\n    if (self.options.zoomable)\n      enableZooming()\n\n    /* Node selection related objects and functions */\n    let toggleSelectNode = (node) => {\n      node.selected = !node.selected;\n      visNodes.selectAll('g.gnode').filter((d) => { return node.uid == d.uid; })\n      .classed(fstyle.selectedNode, function(p) { return p.selected; });\n    }\n\n    let selectNode = (node) => {\n      node.selected = true;\n      visNodes.selectAll('g.gnode').filter((d) => { return node.uid == d.uid; })\n      .classed(fstyle.selectedNode, function(p) { return p.selected; });\n    }\n\n    let deselectAllNodes = () => {\n      visNodes.selectAll('g.gnode')\n      .classed(fstyle.selectedNode, function(p) { return p.selected = false; });\n    }\n\n    let selectedNodes = () => {\n      // return all selected nodes\n      return visNodes.selectAll('g.gnode').filter(function(d) { return d.selected; });\n    }\n\n    self.brusher = d3.svg.brush()\n      .x(xScale)\n      .y(yScale)\n      .on('brushstart', function(d) {})\n      .on('brush', function() {\n        // during brushing invert styling of selection as preview\n        let extent = d3.event.target.extent();\n\n        visNodes.selectAll('g.gnode')\n        .classed(fstyle.selectedNode, function (d) {\n         return d.selected ^ (extent[0][0] <= d.x && d.x < extent[1][0]\n                && extent[0][1] <= d.y && d.y < extent[1][1])\n        })\n      })\n      .on('brushend', function() {\n        // after brushing finally toggle the selection\n        let extent = d3.event.target.extent();\n\n        visNodes.selectAll('g.gnode')\n        .filter(function (d) {\n         return extent[0][0] <= d.x && d.x < extent[1][0]\n                && extent[0][1] <= d.y && d.y < extent[1][1]\n      })\n      .each(toggleSelectNode)\n\n      d3.event.target.clear();\n      d3.select(this).call(d3.event.target);\n    });\n\n    let enableBrushing = () => {\n     // crosshair curson\n     mouseEventHelper.select('.background').style('cursor', 'crosshair');\n     // bind brusher\n     mouseEventHelper.call(self.brusher);\n    }\n\n    let disableBrushing = () => {\n     // normal cursor\n     mouseEventHelper.select('.background').style('cursor', 'auto');\n     // disable brushing events\n     mouseEventHelper.call(self.brusher)\n     .on('mousedown.brush', null)\n     .on('touchstart.brush', null)\n     .on('touchmove.brush', null)\n     .on('touchend.brush', null);\n    }\n\n     /* Force related objects and functions */\n    self.force = d3.layout.force()\n    .charge(function(d) {\n      if (d.nodeType == 'middle')\n        return self.options.middleCharge;\n      else\n        return self.options.otherCharge;\n      })\n    .friction(self.options.friction)\n    .linkDistance(function(d) { return self.options.linkDistanceMultiplier * d.value; })\n    .linkStrength(function(d) { if (d.linkType in self.linkStrengths) {\n                                  return self.linkStrengths[d.linkType];\n                                } else {\n                                  return self.linkStrengths.other; }\n    })\n    .gravity(0.000)\n    .nodes(self.graph.nodes)\n    .links(self.graph.links)\n    .chargeDistance(self.options.chargeDistance)\n    .size([self.options.svgW, self.options.svgH]);\n\n    var drag = d3.behavior.drag()\n    .on('dragstart', function(d) {\n      console.log('dragstart')\n      d3.event.sourceEvent.stopPropagation();\n\n      selectedNodes().each(function(d1) {\n        d1.fixed |= 2;\n      });\n    })\n    .on('drag', (d) => {\n      if (shiftKeydown) return\n      selectedNodes().each(function(d1) {\n        d1.x += d3.event.dx;\n        d1.y += d3.event.dy;\n\n        d1.px += d3.event.dx;\n        d1.py += d3.event.dy;\n      });\n\n      self.resumeForce();\n      d3.event.sourceEvent.preventDefault();\n    })\n    .on('dragend', (d) => {\n      console.log('dragend')\n      selectedNodes().each(function(d1) {\n        d1.fixed &= ~6;\n      });\n    });\n\n    /* Main plot drawing functions */\n    let createInitialLayout = function(structure, passedOptions = {}) {\n        // the default options\n        let options = {\n                        'sequence': '',\n                        'name': 'empty',\n                        'positions': [],\n                        'labelInterval': self.options.labelInterval,\n                        'avoidOthers': true,\n                        'uids': [],\n                        'circularizeExternal': true\n                      };\n\n        options = Object.assign(options, passedOptions);\n\n        //console.log('options.uids:', options.uids);\n        let rg = new RNAGraph(options.sequence, structure, options.name);\n        rg.circularizeExternal = options.circularizeExternal;\n\n        let rnaJson = rg.recalculateElements();\n\n        if (options.positions.length === 0) {\n            // no provided positions means we need to calculate an initial layout\n\n            if (self.options.layout == 'naview') {\n                let naview = new NAView();\n\n                let naViewPositions = naview.naview_xy_coordinates(rg.pairtable);\n                options.positions = []\n                for (let i = 0; i < naViewPositions.nbase; i++)\n                    options.positions.push([naViewPositions.x[i], naViewPositions.y[i]]);\n            } else {\n                options.positions = simpleXyCoordinates(rnaJson.pairtable);\n            }\n        }\n\n        rnaJson = rnaJson.elementsToJson()\n        .addUids(options.uids)\n        .addPositions('nucleotide', options.positions)\n        .addLabels(1, options.labelInterval)\n        .reinforceStems()\n        .reinforceLoops()\n        .connectFakeNodes()\n        .reassignLinkUids()\n        .breakNodesToFakeNodes();\n\n        return rnaJson;\n    };\n\n    let createNewNodes = function(gnodesEnter) {\n        gnodesEnter = gnodesEnter.append('g')\n        .classed('gnode', true)\n        .attr('struct_name', function(d) { return d.structName; })\n        .attr('transform', function(d) {\n            if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                return 'translate(' + [d.x, d.y] + ')';\n            else\n                return '';\n        })\n        .each( function(d) { d.selected = d.previouslySelected = false; });\n\n        gnodesEnter\n        .attr('num', function(d) { return 'n' + d.num; })\n        .attr('rnum', function(d) {\n            return 'n' + (d.rna.rnaLength - d.num + 1); })\n        .transition()\n        .duration(750)\n        .ease('elastic');\n\n        if (self.options.editable || self.options.animation) {\n          gnodesEnter.on('mousedown', nodeMousedown)\n          //.on('mousedrag', function(d) {})\n          .on('mouseup', nodeMouseup)\n          .on('contextmenu', self.nodeContextMenu)\n          .call(drag)\n        }\n\n        let labelAndProteinNodes = gnodesEnter.filter(function(d) {\n            return d.nodeType == 'label' || d.nodeType == 'protein';\n        });\n\n        let nucleotideNodes = gnodesEnter.filter(function(d) {\n            return d.nodeType == 'nucleotide';\n        });\n\n        labelAndProteinNodes.append('svg:circle')\n        .classed(fstyle.node, true)\n        .attr('r', function(d) {\n            if (d.nodeType == 'middle') return 0;\n            else {\n                return d.radius;\n            }\n        })\n        .attr('node_type', function(d) { return d.nodeType; })\n        .attr('node_num', function(d) { return d.num; });\n\n        // direction arrows\n        nucleotideNodes.append('svg:path')\n        .attr('class', fstyle.directionArrow)\n        .attr('node_num', function(d) { return d.num; })\n\n        // nucleotide outlines\n        nucleotideNodes.append('svg:circle')\n        .attr('class', fstyle.node)\n        .attr('node_type', function(d) { return d.nodeType; })\n        .attr('node_num', function(d) { return d.num; })\n        .attr('r', function(d) { return d.radius; })\n        .append('svg:title')\n        .text(function(d) {\n            if (d.nodeType == 'nucleotide') {\n                return d.structName + ':' + d.num;\n            } else {\n                return '';\n            }\n        });\n\n        // nucleotide labels\n        var labelsEnter = gnodesEnter.append('text')\n        .text(function(d) { return d.name; })\n        .attr('class', fstyle.nodeLabel)\n        .attr('label_type', function(d) { return d.nodeType; })\n\n        // nucleotide label title\n        labelsEnter.append('svg:title')\n        .text(function(d) {\n            if (d.nodeType == 'nucleotide') {\n                return d.structName + ':' + d.num;\n            } else {\n                return '';\n            }\n        });\n\n        return gnodesEnter;\n    };\n\n    let createNewLinks = function(linksEnter) {\n        var linkLines = linksEnter.append('svg:line');\n\n        linkLines.append('svg:title')\n        .text((d) => { return d.linkType + ':' + d.source.num + '-' + d.target.num });\n\n        linkLines\n        .classed('link', true)\n        .classed(fstyle.link, true)\n        .attr('x1', function(d) { return d.source.x; })\n        .attr('y1', function(d) { return d.source.y; })\n        .attr('x2', function(d) { return d.target.x; })\n        .attr('y2', function(d) { return d.target.y; })\n        .attr('link_type', function(d) { return d.linkType; } )\n        .attr('pointer-events', function(d) { if (d.linkType == 'fake') return 'none'; else return 'all';});\n\n        if (self.options.editable)\n          linkLines.on('click', linkClick);\n\n        /* We don't need to update the positions of the stabilizing links */\n        /*\n        basepairLinks = visLinks.selectAll('[link_type=basepair]');\n        basepairLinks.classed('basepair', true);\n\n        fakeLinks = visLinks.selectAll('[link_type=fake]')\n        fakeLinks.classed('fake', true);\n\n        intermolecule_links = vis_links.selectAll('[link_type=intermolecule]');\n        intermolecule_links.classed('intermolecule', true);\n\n        plink = vis_links.selectAll('[link_type=protein_chain],[link_type=chain_chain]');\n        plink.classed('chain_chain', true);\n        */\n\n       return linkLines;\n    };\n\n    function drawDirectionArrow(d) {\n        let magnitude = (x) => {\n            return Math.sqrt(x[0] * x[0] + x[1] * x[1]);\n        }\n\n        let endPoint = d;\n        let startPoint = d.prevNode;\n        // get stroke width and arrow size values from css\n        let nodeStroke = parseFloat(fstyle.nodeStrokeWidth) / 2;\n        let lengthMult = parseFloat(fstyle.directionArrowSize);\n        let arrowWidth = parseFloat(fstyle.directionArrowWidth);\n\n        if (startPoint === null)\n            return;\n\n        // does this node have a link pointing to it?\n        if (!d.linked)\n            return;\n\n        // point back toward the previous node\n        let u = [-(endPoint.x - startPoint.x), -(endPoint.y - startPoint.y)];\n\n        if (u[0] == 0 && u[1] == 0)\n            return;     // will lead to a NaN error\n\n        // scale u to unit length\n        u = [u[0] / magnitude(u), u[1] / magnitude(u)];\n        // normal vector of u\n        let v = [-u[1], u[0]];\n\n        // calculate the tip position\n        let arrowTip = [(d.radius + nodeStroke) * u[0], (d.radius + nodeStroke) * u[1]];\n\n        let path = 'M' + (arrowTip[0] + lengthMult * (u[0]/2 + v[0]*arrowWidth/2)) + ',' + (arrowTip[1] + lengthMult * (u[1]/2 + v[1]*arrowWidth/2)) +\n                   'L' + (arrowTip[0]) + ',' + (arrowTip[1]) +\n                   'L' + (arrowTip[0] + lengthMult * (u[0]/2 - v[0]*arrowWidth/2)) + ',' + (arrowTip[1] + lengthMult * (u[1]/2 - v[1]*arrowWidth/2));\n\n        d3.select(this).attr('d', path);\n    }\n\n    let realLinkFilter = (d) => {\n        return d.linkType == 'basepair' ||\n               d.linkType == 'backbone' ||\n               d.linkType == 'intermolecule' ||\n               d.linkType == 'pseudoknot' ||\n               d.linkType == 'label_link' ||\n               d.linkType == 'external' ||\n               d.linkType == 'chain_chain';\n    }\n\n    let recalculateGraph = () => {\n        // Condense all of the individual RNAs into one\n        // collection of nodes and links\n        self.graph.nodes = [];\n        self.graph.links = [];\n        for (let uid in self.rnas) {\n            self.graph.nodes = self.graph.nodes.concat(self.rnas[uid].nodes);\n            self.graph.links = self.graph.links.concat(self.rnas[uid].links);\n        }\n\n        // Create a lookup table so that we can access each node\n        // based on its uid. This will be used to create the links\n        // between different RNAs\n        var uidsToNodes = {};\n\n        for (let i = 0; i < self.graph.nodes.length; i++)\n            uidsToNodes[self.graph.nodes[i].uid] = self.graph.nodes[i];\n\n        self.graph.links.forEach(function(link) {\n            link.source = uidsToNodes[link.source.uid];\n            link.target = uidsToNodes[link.target.uid];\n        });\n\n        for (let i = 0; i < self.extraLinks.length; i++) {\n            // the actual node objects may have changed, so we hae to recreate\n            // the extra links based on the uids\n            if (!(self.extraLinks[i].target.uid in uidsToNodes)) {\n                console.log('not there:', self.extraLinks[i]);\n                continue;\n            }\n\n            self.extraLinks[i].source = uidsToNodes[self.extraLinks[i].source.uid];\n            self.extraLinks[i].target = uidsToNodes[self.extraLinks[i].target.uid];\n\n            if (self.extraLinks[i].linkType == 'intermolecule') {\n                //remove links to middle nodes\n                let fakeLinks = self.graph.links.filter(function(d) {\n                    return ((d.source == self.extraLinks[i].source || d.source == self.extraLinks[i].target ||\n                            d.target == self.extraLinks[i].source || d.target == self.extraLinks[i].source) &&\n                            d.linkType == 'fake');\n                });\n\n                for (let j = 0; j < fakeLinks.length; j++) {\n                    let linkIndex = self.graph.links.indexOf(fakeLinks[j]);\n                    self.graph.links.splice(linkIndex, 1);\n                }\n            }\n\n            graph.links.push(self.extraLinks[i]);\n        }\n    };\n\n    self.update = function () {\n        self.force.nodes(self.graph.nodes)\n        .links(self.graph.links);\n\n        if (self.options.animation) {\n          self.force.start();\n        }\n\n        let allLinks = visLinks.selectAll('line.link')\n        .data(self.graph.links.filter(realLinkFilter), elementKey);\n\n        allLinks.attr('class', '')\n        .classed('link', true)\n        .classed(fstyle.link, true)\n        .attr('link_type', function(d) { return d.linkType; } )\n\n        let linksEnter = allLinks.enter();\n        createNewLinks(linksEnter);\n\n        allLinks.exit().remove();\n\n        let gnodes = visNodes.selectAll('g.gnode')\n        .data(self.graph.nodes, elementKey);\n        //.attr('pointer-events', 'all');\n\n        let gnodesEnter = gnodes.enter();\n        createNewNodes(gnodesEnter);\n        gnodes.exit().remove();\n\n\n        //fake_nodes = self.graph.nodes.filter(function(d) { return d.nodeType == 'middle'; });\n        //fakeNodes = self.graph.nodes.filter(function(d) { return true; });\n        let realNodes = self.graph.nodes.filter(function(d) { return d.nodeType == 'nucleotide' || d.nodeType == 'label';});\n\n        gnodes.select('.' + fstyle.directionArrow).each(drawDirectionArrow);\n\n        self.force.on('tick', function() {\n            let q = d3.geom.quadtree(realNodes);\n            let i = 0;\n            let n = realNodes.length;\n\n            let collide = (node) => {\n                let r = node.radius + 16,\n                nx1 = node.x - r,\n                nx2 = node.x + r,\n                ny1 = node.y - r,\n                ny2 = node.y + r;\n                return function(quad, x1, y1, x2, y2) {\n                    if (quad.point && (quad.point !== node)) {\n                        let x = node.x - quad.point.x,\n                        y = node.y - quad.point.y,\n                        l = Math.sqrt(x * x + y * y),\n                        r = node.radius + quad.point.radius;\n                        if (l < r) {\n                            l = (l - r) / l * 0.1;\n                            node.x -= x *= l;\n                            node.y -= y *= l;\n                            quad.point.x += x;\n                            quad.point.y += y;\n                        }\n                    }\n                    return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;\n                };\n            }\n\n            while (++i < n) q.visit(collide(realNodes[i]));\n\n            allLinks.attr('x1', function(d) { return d.source.x; })\n            .attr('y1', function(d) {  return d.source.y; })\n            .attr('x2', function(d) { return d.target.x; })\n            .attr('y2', function(d) { return d.target.y; });\n\n            // Translate the groups\n            gnodes.attr('transform', function(d) {\n                return 'translate(' + [d.x, d.y] + ')';\n            });\n\n            gnodes.select('.' + fstyle.directionArrow).each(drawDirectionArrow);\n\n        });\n\n        self.force.on('end', () => {\n            gnodes.selectAll('[node_type=nucleotide]')\n            .filter((d,i) => { if (i == 0) return true; else return false; })\n            .each((d,i) => {\n                //console.log(\"pos\", d.num, d.x, d.y);\n            });\n\n            //for (let uid in self.rnas) {\n            //    for (let i = 1; i < self.rnas[uid].pairtable[0]; i++) {\n            //        console.log('pt', i, self.rnas[uid].pairtable[i]);\n            //    }\n            //}\n\n        });\n\n        self.changeColorScheme(self.colorScheme);\n\n        if (self.options.animation) {\n          self.force.start();\n        }\n\n        updateStyle();\n    };\n\n    self.transitionRNA = function(newStructure, nextFunction) {\n        if (self.dotbracket == newStructure) {\n            return;\n        } else {\n            self.dotbracket = newStructure;\n        }\n        //transition from an RNA which is already displayed to a new structure\n        var duration = self.options.transitionDuration;\n\n        var uids = self.graph.nodes\n        .filter(function(d) { return d.nodeType == 'nucleotide'; })\n        .map(function(d) { return d.uid; });\n\n        let options = {'uids': uids};\n        var newRNAJson = createInitialLayout(newStructure, options);\n\n        let gnodes = visNodes.selectAll('g.gnode').data(newRNAJson.nodes, elementKey);\n        var links = visLinks.selectAll('line.link').data(newRNAJson.links.filter(realLinkFilter), elementKey);\n\n        if (duration === 0)\n            gnodes.attr('transform', function(d) {\n                return 'translate(' + [d.x, d.y] + ')';\n            });\n        else {\n            gnodes.transition()\n            .attr('transform', function(d) {\n                return 'translate(' + [d.x, d.y] + ')'; }).duration(duration);\n        }\n\n\n        var newNodes = createNewNodes(gnodes.enter())\n        .attr('transform', function(d) {\n            if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                return 'translate(' + [0, 0] + ')';\n            else\n                return '';\n        });\n\n        if (duration === 0)\n            gnodes.exit().remove();\n        else\n            gnodes.exit().transition()\n            .attr('transform', function(d) {\n                if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                    return 'translate(' + [0, 0] + ')';\n                else\n                    return '';\n            });\n\n        self.graph.nodes = gnodes.data();\n        gnodes.select('.' + fstyle.directionArrow).each(drawDirectionArrow);\n        self.changeColorScheme(self.colorScheme);\n        updateStyle();\n        self.centerView(duration);\n\n        function endall(transition, callback) {\n            if (transition.size() === 0) { setTimeout(callback, duration); }\n            var n = 0;\n            transition\n            .each(function() { ++n; })\n            .each('end', function() { if (!--n) callback.apply(this, arguments); });\n        }\n\n        function afterAnimation() {\n            var newLinks = createNewLinks(links.enter());\n            self.graph.links = links.data();\n            self.changeColorScheme(self.colorScheme);\n            updateStyle();\n\n            if (typeof nextFunction != 'undefined')\n                nextFunction();\n\n        }\n\n        links.exit().remove();\n\n        if (duration === 0) {\n            links\n            .attr('x1', function(d) { return d.source.x; })\n            .attr('y1', function(d) { return d.source.y; })\n            .attr('x2', function(d) { return d.target.x; })\n            .attr('y2', function(d) { return d.target.y; });\n\n            var newLinks = createNewLinks(links.enter());\n            self.graph.links = links.data();\n\n            updateStyle();\n        } else {\n            links.transition()\n            .attr('x1', function(d) { return d.source.x; })\n            .attr('y1', function(d) { return d.source.y; })\n            .attr('x2', function(d) { return d.target.x; })\n            .attr('y2', function(d) { return d.target.y; })\n            .duration(duration)\n            .call(endall, afterAnimation);\n        }\n\n        if (duration === 0) {\n            newNodes\n            .attr('transform', function(d) {\n                if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                    return 'translate(' + [d.x, d.y] + ')';\n                else\n                    return '';\n            });\n        } else {\n            newNodes.transition()\n            .attr('transform', function(d) {\n                if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                    return 'translate(' + [d.x, d.y] + ')';\n                else\n                    return '';\n            });\n        }\n\n    };\n\n    /* Plot presentation related functions */\n    let getBoundingBoxTransform = () => {\n        // Center the view on the molecule(s) and scale it so that everything\n        // fits in the window\n\n        //no molecules, nothing to do\n        if (self.graph.nodes.length === 0)\n            return {'translate': [0,0], 'scale': 1};\n\n        // Get the bounding box\n        var minX = d3.min(self.graph.nodes.map(function(d) {return d.x;}));\n        var minY = d3.min(self.graph.nodes.map(function(d) {return d.y;}));\n\n        var maxX = d3.max(self.graph.nodes.map(function(d) {return d.x;}));\n        var maxY = d3.max(self.graph.nodes.map(function(d) {return d.y;}));\n\n        var maxRadius = d3.max(self.graph.nodes.map(function(d) { return d.radius; }));\n\n        // The width and the height of the molecule\n        var molWidth = maxX - minX;\n        var molHeight = maxY - minY;\n\n        // how much larger the drawing area is than the width and the height\n        var widthRatio = self.options.svgW / (molWidth + 1);\n        var heightRatio = self.options.svgH / (molHeight + 1);\n\n        // we need to fit it in both directions, so we scale according to\n        // the direction in which we need to shrink the most\n        var minRatio = Math.min(widthRatio, heightRatio,\n                                self.options.maxNodeRadius / maxRadius) * 0.8;\n\n        // the new dimensions of the molecule\n        var newMolWidth = molWidth * minRatio;\n        var newMolHeight = molHeight * minRatio;\n\n        // translate so that it's in the center of the window\n        var xTrans = -(minX) * minRatio + (self.options.svgW - newMolWidth) / 2;\n        var yTrans = -(minY) * minRatio + (self.options.svgH - newMolHeight) / 2;\n\n        return {'translate': [xTrans, yTrans], 'scale': minRatio};\n    };\n\n    self.centerView = function(duration = 0) {\n        var bbTransform = getBoundingBoxTransform();\n\n        if (bbTransform === null)\n            return;\n\n        // do the actual moving\n        vis.transition().attr('transform',\n                 'translate(' + bbTransform.translate + ')' + ' scale(' + bbTransform.scale + ')').duration(duration);\n\n        // tell the zoomer what we did so that next we zoom, it uses the\n        // transformation we entered here\n        self.zoomer.translate(bbTransform.translate);\n        self.zoomer.scale(bbTransform.scale);\n    };\n\n    self.setSize = (\n      svgW = d3.select(element).node().offsetWidth,\n      svgH = d3.select(element).node().offsetHeight\n    ) => {\n      // save width and height\n      self.options.svgW = svgW;\n      self.options.svgH = svgH;\n\n      // set the viewBox\n      svg.attr('viewBox', \"0 0 \" + svgW + \" \" + svgH)\n\n      //Set the output range of the scales\n      xScale.range([0, svgW]).domain([0, svgW]);\n      yScale.range([0, svgH]).domain([0, svgH]);\n\n      //re-attach the scales to the zoom behaviour\n      self.zoomer.x(xScale)\n      .y(yScale);\n      self.brusher.x(xScale)\n      .y(yScale);\n\n      //resize the background\n      svg.select('.background')\n      .attr('width', svgW)\n      .attr('height', svgH);\n\n      // center the view\n      self.centerView();\n    }\n\n    /* Style and color related functions */\n    self.setOutlineColor = function(color) {\n        var nodes = visNodes.selectAll('g.gnode').select('[node_type=nucleotide]');\n        nodes.style('fill', color);\n    }\n\n    self.addCustomColors = function addCustomColors(json) {\n        // Add a json file containing the custom colors\n        self.customColors = json;\n        self.changeColorScheme('custom');\n    };\n\n    self.addCustomColorsText = function(customColorsText) {\n        let cs = new ColorScheme(customColorsText);\n        self.customColors = cs.colorsJson;\n        self.changeColorScheme('custom');\n    };\n\n    self.changeColorScheme = function(newColorScheme) {\n        var proteinNodes = visNodes.selectAll('[node_type=protein]');\n\n        proteinNodes.classed(fstyle.node, true)\n                    .attr('r', function(d) { return d.radius; });\n\n        var gnodes = visNodes.selectAll('g.gnode');\n        var circles = visNodes.selectAll('g.gnode').selectAll('circle');\n        var nodes = visNodes.selectAll('g.gnode').select('[node_type=nucleotide]');\n        self.colorScheme = newColorScheme;\n\n\n        if (newColorScheme == 'sequence') {\n            var scale = d3.scale.ordinal()\n            .range(['#dbdb8d', '#98df8a', '#ff9896', '#aec7e8', '#aec7e8'])\n            .domain(['A','C','G','U','T']);\n            nodes.style('fill', function(d) {\n                return scale(d.name);\n            });\n\n        } else if (newColorScheme == 'structure') {\n            var scale = d3.scale.category10()\n            .domain(['s','m','i','e','t','h','x'])\n            .range(['lightgreen', '#ff9896', '#dbdb8d', 'lightsalmon',\n                   'lightcyan', 'lightblue', 'transparent']);\n\n                   nodes.style('fill', function(d) {\n                       return scale(d.elemType);\n                   });\n\n        } else if (newColorScheme == 'positions') {\n            nodes.style('fill', function(d) {\n                var scale = d3.scale.linear()\n                .range(['#98df8a', '#dbdb8d', '#ff9896'])\n                .interpolate(d3.interpolateLab)\n                .domain([1, 1 + (d.rna.rnaLength - 1) / 2, d.rna.rnaLength]);\n\n                return scale(d.num);\n            });\n        } else if (newColorScheme == 'custom') {\n            // scale to be used in case the user passes scalar\n            // values rather than color names\n            if (typeof self.customColors != 'undefined' &&\n                'domain' in self.customColors &&\n               'range' in self.customColors) {\n                var scale = d3.scale.linear()\n                .interpolate(d3.interpolateLab)\n                .domain(self.customColors.domain)\n                .range(self.customColors.range);\n            }\n\n            let changeColors = (moleculeColors, d, scale) => {\n                if (moleculeColors.hasOwnProperty(d.num)) {\n                    let val = parseFloat(moleculeColors[d.num]);\n\n                    if (isNaN(val)) {\n                        // passed in color is not a scalar, so\n                        // treat it as a color\n                        return moleculeColors[d.num];\n                    } else {\n                        // the user passed in a float, let's use a colormap\n                        // to convert it to a color\n                        return scale(val);\n                    }\n                } else {\n                    return 'white';\n                }\n            }\n\n            nodes.style('fill', function(d) {\n                if (typeof self.customColors == 'undefined' ||\n                   !self.customColors.hasOwnProperty('colorValues')) {\n                    return 'white';\n                }\n\n                if (self.customColors.colorValues.hasOwnProperty(d.structName) &&\n                    self.customColors.colorValues[d.structName].hasOwnProperty(d.num)) {\n                    // if a molecule name is specified, it supercedes the default colors\n                    // (for which no molecule name has been specified)\n                    let moleculeColors = self.customColors.colorValues[d.structName];\n                    return changeColors(moleculeColors, d, scale);\n                } else if (self.customColors.colorValues.hasOwnProperty('')) {\n                    let moleculeColors = self.customColors.colorValues[''];\n                    return changeColors(moleculeColors, d, scale);\n                }\n\n                return 'white';\n            });\n        }\n    };\n\n    let updateStyle = () => {\n        // Numbering\n        visNodes.selectAll('[node_type=label]').classed(fstyle.transparent, !self.displayParameters.displayNumbering);\n        visNodes.selectAll('[label_type=label]').classed(fstyle.transparent, !self.displayParameters.displayNumbering);\n        visLinks.selectAll('[link_type=label_link]').classed(fstyle.transparent, !self.displayParameters.displayNumbering);\n        // Node Outline\n        svg.selectAll('[node_type=nucleotide]').classed(fstyle.transparent, !self.displayParameters.displayNodeOutline);\n        // Node Labels\n        visNodes.selectAll('[label_type=nucleotide]').classed(fstyle.transparent, !self.displayParameters.displayNodeLabel);\n        // Links\n        svg.selectAll('[link_type=real],[link_type=basepair],[link_type=backbone],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=external]').classed(fstyle.transparent, !self.displayParameters.displayLinks);\n        // Pseudoknot Links\n        svg.selectAll('[link_type=pseudoknot]').classed(fstyle.transparent, !self.displayParameters.displayPseudoknotLinks);\n        // Protein Links\n        svg.selectAll('[link_type=protein_chain]').classed(fstyle.transparent, !self.displayParameters.displayProteinLinks);\n        // Fake Links\n        visLinks.selectAll('[link_type=fake]').classed(fstyle.transparent, !self.options.displayAllLinks);\n        visLinks.selectAll('[link_type=fake_fake]').classed(fstyle.transparent, !self.options.displayAllLinks);\n        // direction Arrows\n        svg.selectAll('.' + fstyle.directionArrow).classed(fstyle.transparent, !self.displayParameters.displayDirectionArrows);\n    };\n\n    /* RNA edditing related functions */\n    let changeNode = function(nodeName, referenceNode) {\n        // change the label of a node\n        let rna = referenceNode.rna;\n\n        let dotbracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let positions = rna.getPositions('nucleotide');\n        let sequence = rna.seq\n        let uids = rna.getUids();\n\n        let newNodeNum = referenceNode.num;\n\n        let newDotbracket = dotbracket;\n        let newSequence = sequence.slice(0,newNodeNum-1) +  nodeName + sequence.slice(newNodeNum);\n\n        console.log('newSequence:', newSequence);\n\n        console.log('uids:', uids);\n        uids.splice(newNodeNum-1, 1, slugid.nice());\n        let newPositions = positions;\n\n        delete self.rnas[rna.uid];\n        let newRNA = self.addRNA(newDotbracket, {'sequence': newSequence,\n                                 'positions': newPositions,\n                                 'uids': uids,\n                                 'centerView': false});\n    }\n\n    let insertNodeBeforeOrAfter = function(nodeName, referenceNode, positionOffset) {\n        //insert a new node before or after another one\n        //positionOffset specifies who far from the original to insert the new node\n        let rna = referenceNode.rna;\n\n        let dotbracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let positions = rna.getPositions('nucleotide');\n        let sequence = rna.seq\n        let uids = rna.getUids();\n\n        let newNodeNum = referenceNode.num + positionOffset;\n\n        let newDotbracket = dotbracket.slice(0,newNodeNum) + '.' + dotbracket.slice(newNodeNum);\n        let newSequence = sequence.slice(0,newNodeNum) +  nodeName + sequence.slice(newNodeNum);\n\n        console.log('newSequence:', newSequence);\n\n        uids.splice(newNodeNum, 0, slugid.nice());\n        positions.splice(newNodeNum, 0, positions[newNodeNum - positionOffset-1]);\n\n        let newUids = uids;\n        let newPositions = positions;\n\n        console.log('positions:', positions);\n        console.log('new node positions:', newPositions);\n\n        delete self.rnas[rna.uid];\n        let newRNA = self.addRNA(newDotbracket, {'sequence': newSequence,\n                                 'positions': newPositions,\n                                 'uids': newUids,\n                                 'centerView': false});\n    }\n\n    let deleteNode = function(node) {\n        console.log('deleting...', node);\n        // get the dotbracket string for this rna\n        let rna = node.rna;\n        let pair = rna.pairtable[node.num];\n\n        // remove basepairs for this node\n        if (pair != 0) {\n            rna.pairtable[node.num] = 0;\n            rna.pairtable[pair] = 0;\n        }\n\n        let dotbracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let positions = rna.getPositions('nucleotide');\n        let sequence = rna.seq\n        let uids = rna.getUids();\n\n        let newDotbracket = dotbracket.slice(0, node.num-1) + dotbracket.slice(node.num)\n        let newPositions = positions.slice(0, node.num-1)\n                .concat(positions.slice(node.num));\n        let newSequence = sequence.slice(0, node.num-1) + sequence.slice(node.num)\n        let newUids = uids.slice(0, node.num-1)\n                .concat(uids.slice(node.num));\n\n        delete self.rnas[rna.uid];\n        let newRNA = self.addRNA(newDotbracket, {'sequence': newSequence,\n                                 'positions': newPositions,\n                                 'uids': newUids,\n                                  'centerView': false});\n\n        console.log('new dotbracket:', newDotbracket);\n        //recalculateGraph();\n\n        //remove backbone links associated with this node\n\n        //remove this node\n\n    }\n\n    let elementKey = (d) => {\n        return d.uid;\n    };\n\n    let updateRnaGraph = function(r) {\n        let nucleotidePositions = r.getPositions('nucleotide');\n        let labelPositions = r.getPositions('label');\n\n        let uids = r.getUids();\n\n        r.recalculateElements()\n        .elementsToJson()\n        .addPseudoknots()\n        .addPositions('nucleotide', nucleotidePositions)\n        .addUids(uids)\n        .addLabels(1, self.options.labelInterval)\n        .addPositions('label', labelPositions)\n        .reinforceStems()\n        .reinforceLoops()\n        .updateLinkUids();\n    };\n\n    let removeBackBoneLink = function(d) {\n        if (d.target.num - d.source.num != 1) {\n            console.log('ERROR: non adjacent nodes. Target:', d.target,\n                        'Source:', d.source, 'Link:', d);\n            return;\n        }\n\n        let rna = d.target.rna;\n        let toRemove = [];\n\n        for (let i = 0; i < rna.links.length; i++) {\n            let link = rna.links[i];\n\n            if (link.linkType != 'basepair')\n                continue;\n\n            if (link.source.num <= d.source.num && link.target.num >= d.target.num) {\n                console.log('crossing basepair', link);\n                toRemove.push(link);\n            }\n        }\n\n\n        // Remove all base pairs that are between these two nodes and add them as extra\n        // links\n        console.log('toRemove:', toRemove);\n\n        for (let i = 0; i < toRemove.length; i++) {\n            rna.pairtable[toRemove[i].source.num] = 0;\n            rna.pairtable[toRemove[i].target.num] = 0;\n\n            toRemove[i].from = toRemove[i].source.num;\n            toRemove[i].to = toRemove[i].target.num - d.source.num;\n        }\n\n        // extract the dotbracket string of the rna\n        // cut it at the position of this backbone bond\n        let sequence = rna.seq;\n        let sequence1 = rna.seq.slice(0, d.source.num);\n        let sequence2 = rna.seq.slice(d.source.num);\n\n        let rnaDotBracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let dotBracket1 = rnaDotBracket.slice(0, d.source.num);\n        let dotBracket2 = rnaDotBracket.slice(d.source.num)\n\n        // get the nucleotide positions\n        // cut them at the positions of the backbone bond\n        let positions = rna.getPositions('nucleotide')\n        let uids = rna.getUids();\n\n        let positions1 = positions.slice(0, d.source.num);\n        let positions2 = positions.slice(d.source.num);\n\n        let uids1 = uids.slice(0, d.source.num);\n        let uids2 = uids.slice(d.source.num);\n\n        console.log('positions1:', positions1);\n        console.log('positions2:', positions2);\n\n        delete self.rnas[rna.uid];\n        let rna1 = self.addRNA(dotBracket1, { 'sequence': sequence1,\n                                   'positions': positions1,\n                                   'uids': uids1 });\n        let rna2 = self.addRNA(dotBracket2, { 'sequence': sequence2,\n                                   'positions': positions2,\n                                   'uids': uids2 });\n        for (let i = 0; i < toRemove.length; i++) {\n            console.log('rna1:', rna1);\n            console.log('rna2:', rna2);\n            console.log('toRemove[i]', toRemove[i]);\n            self.extraLinks.push(\n                {'source': rna1.nodes[toRemove[i].from-1],\n                 'target': rna2.nodes[toRemove[i].to-1],\n                 'value': 1,\n                 'uid': slugid.nice(),\n                 'linkType': 'intermolecule'});\n                recalculateGraph();\n                self.update();\n\n        }\n        console.log('self.extraLinks:', self.extraLinks);\n        //self.extraLinks.push({'source': rna1.nodes[\n\n        // create two new rnas\n        // add their positions\n        // add them back to the plot\n    }\n\n    var removeLink = function(d) {\n        // remove a link between two nodes\n        let index = self.graph.links.indexOf(d);\n        console.log('removing link:', index);\n\n        if (index > -1) {\n            //remove a link\n            //graph.links.splice(index, 1);\n\n            // there should be two cases\n            // 1. The link is within a single molecule\n\n            if (d.source.rna == d.target.rna) {\n                if (d.linkType == 'backbone') {\n                    console.log('trying to remove a backbone link', d.source.num, d.target.num);\n                    removeBackBoneLink(d);\n                    return;\n                } else {\n                    let r = d.source.rna;\n                    r.addPseudoknots();\n                    r.pairtable[d.source.num] = 0;\n                    r.pairtable[d.target.num] = 0;\n\n                    updateRnaGraph(r);\n                }\n            } else {\n                // 2. The link is between two different molecules\n                let extraLinkIndex = self.extraLinks.indexOf(d);\n\n                self.extraLinks.splice(extraLinkIndex, 1);\n            }\n            recalculateGraph();\n        }\n        self.update();\n    };\n\n    let addBackBoneLink = function(newLink) {\n        // opposite of deleting a link\n        // get the two dotbracket strings\n        let rna1 = newLink.target.rna;\n        let rna2 = newLink.source.rna;\n        if (newLink.target.num == 1) {\n          rna1 = newLink.source.rna;\n          rna2 = newLink.target.rna;\n        }\n\n        let dotbracket1 = rnaUtilities.pairtableToDotbracket(rna1.pairtable);\n        let dotbracket2 = rnaUtilities.pairtableToDotbracket(rna2.pairtable);\n\n        let seq1 = rna1.seq;\n        let seq2 = rna2.seq;\n\n        let positions1 = rna1.getPositions('nucleotide');\n        let positions2 = rna2.getPositions('nucleotide');\n\n        // concatenate them\n        let newDotbracket = dotbracket1 + dotbracket2;\n        let newSeq = seq1 + seq2;\n        let newPositions = positions1.concat(positions2);\n\n        let toAddInternal = [];\n        let toAddExternal = [];\n        let toDelete = {};\n\n        for (let i = 0; i < self.extraLinks.length; i++) {\n            console.log('self.extraLinks[i]', self.extraLinks[i]);\n            console.log('rna1:', rna1);\n            console.log('rna2:', rna2);\n            if (self.extraLinks[i].source.rna == rna1) {\n                if ( self.extraLinks[i].target.rna == rna2) {\n                    // both ends of the extra link are within what will become the new molecule\n                    // need to be added as base pairs afterwards\n                    //self.extraLinks[i].from = self.extraLinks[i].source.num;\n                    //self.extraLinks[i].to = dotbracket1.length + self.extraLinks[i].target.num;\n                    //toAddInternal.push(self.extraLinks[i]);\n                } else {\n                    // only one end of the extra link is within what will become the newly\n                    // created molecule, needs to remain an extra link\n                    // source will always be the unchanged molecule, whereas target will be\n                    // the newly created one\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].target,\n                        'target': self.extraLinks[i].source.num\n                    });\n\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            } else if (self.extraLinks[i].source.rna == rna2) {\n                if ( self.extraLinks[i].target.rna == rna1) {\n                    // add internal link\n                    // both ends of the extra link are within what will become the new molecule\n                    // need to be added as base pairs afterwards\n                    //self.extraLinks[i].from = self.extraLinks[i].target.num;\n                    //self.extraLinks[i].to = dotbracket1.length + self.extraLinks[i].source.num;\n\n                    //toAddInternal.push(self.extraLinks[i]);\n                } else {\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].target,\n                        'target': self.extraLinks[i].source.num + dotbracket1.length\n                    });\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            }\n\n            if (self.extraLinks[i].target.rna == rna1) {\n                if (self.extraLinks[i].source.rna == rna2) {\n                    // covered in previous if statement\n                } else {\n                    // only one end of the extra link is within what will become the newly\n                    // created molecule, needs to remain an extra link\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].source,\n                        'target': self.extraLinks[i].target.num\n                    });\n\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            } else if (self.extraLinks[i].target.rna == rna2) {\n                if (self.extraLinks[i].source.rna == rna1) {\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].source,\n                        'target': self.extraLinks[i].target.num + dotbracket1.length\n                    });\n\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            }\n        }\n\n\n        self.extraLinks = self.extraLinks.filter((e) => { return !(e.uid in toDelete) });\n\n        delete self.rnas[rna1.uid];\n        delete self.rnas[rna2.uid];\n\n        let newRna = null;\n        // create a new RNA\n        if (self.options.animation)\n            newRna = self.addRNA(newDotbracket, { 'sequence': newSeq,\n                                'positions': newPositions,\n                                'centerView': false});\n        else\n            newRna = self.addRNA(newDotbracket, { 'sequence': newSeq,\n                        'centerView': false });\n\n\n\n        // add new external links\n        for (let i = 0; i < toAddExternal.length; i++) {\n            self.extraLinks.push({\n                'source': toAddExternal[i].source,\n                'target': newRna.nodes[toAddExternal[i].target-1],\n                'value': 1,\n                'uid': slugid.nice(),\n                'linkType': 'intermolecule'\n            });\n        }\n\n        recalculateGraph();\n        self.update();\n        console.log('self.extraLinks:', self.extraLinks);\n    };\n\n    function nudge(dx, dy) {\n      // TODO currently unused\n        node.filter(function(d) { return d.selected; })\n        .attr('cx', function(d) { return d.x += dx; })\n        .attr('cy', function(d) { return d.y += dy; });\n\n        link.filter(function(d) { return d.source.selected; })\n        .attr('x1', function(d) { return d.source.x; })\n        .attr('y1', function(d) { return d.source.y; });\n\n        link.filter(function(d) { return d.target.selected; })\n        .attr('x2', function(d) { return d.target.x; })\n        .attr('y2', function(d) { return d.target.y; });\n\n        d3.event.preventDefault();\n    }\n\n    let nodeMouseup = function(d,i) {\n        console.log(\"nodeMouseup\")\n        let backbonePossible = true, basepairPossible = true;\n\n        if (mousedownNode) {\n            mouseupNode = d;\n\n            // if the node isn't a nucleotide, we can't create a link\n            if (mouseupNode.nodeType == 'middle' || mousedownNode.nodeType == 'middle' || mouseupNode.nodeType == 'label' || mousedownNode.nodeType == 'label')\n                return;\n\n            if (mouseupNode == mousedownNode) { resetMouseVars(); return; }\n            let newLink = {source: mousedownNode, target: mouseupNode, linkType: 'basepair', value: 1, uid: slugid.nice()};\n\n            for (let i = 0; i < self.graph.links.length; i++) {\n                if ((self.graph.links[i].source == mousedownNode)  ||\n                    (self.graph.links[i].target == mousedownNode) ||\n                    (self.graph.links[i].source == mouseupNode) ||\n                    (self.graph.links[i].target == mouseupNode)) {\n                    // either one of the nodes is already in a link\n\n                    // if any of the nodes are already involved in a basepair or a pseudoknot\n                    // then we can't make a basepair link\n                    if (self.graph.links[i].linkType == 'basepair' ||\n                        self.graph.links[i].linkType == 'pseudoknot' ||\n                        self.graph.links[i].linkType == 'intermolecule') {\n                        // although should be able to make a backbone link\n                        console.log('no basepair possible');\n                        basepairPossible = false;\n                    }\n                }\n\n                if (((self.graph.links[i].source == mouseupNode)  &&\n                     (self.graph.links[i].target == mousedownNode)) ||\n                         ((self.graph.links[i].source == mousedownNode)  &&\n                          (self.graph.links[i].target == mouseupNode))) {\n\n                    // if we're trying to make a link between two nodes which already have\n                    // a backbone between them, then we can't make a link\n                    if (self.graph.links[i].linkType == 'backbone') {\n                        return;\n                    }\n                }\n            }\n\n\n            if (newLink.source.rna != newLink.target.rna) {\n                    // could be either a backbone link or an intermolecule link\n\n                if ((newLink.source.num == 1 &&\n                     newLink.target.num == newLink.target.rna.rnaLength) ||\n                     (newLink.target.num == 1 &&\n                      newLink.source.num == newLink.source.rna.rnaLength)) {\n                          //\n                          let linkMenu = [\n                              {\n                                  title: 'Backbone Link',\n                                  action: function(elm, d, i) {\n                                      linkContextMenuShown = false;\n                                      console.log('Item #1 clicked!');\n                                      console.log('The data for this circle is: ' + d);\n                                      dragLine.attr('class', fstyle.transparent);\n                                      addBackBoneLink(newLink);\n                                  },\n                                  disabled: false // optional, defaults to false\n                              },\n                              {\n                                  title: 'Basepair Link',\n                                  action: function(elm, d, i) {\n                                      linkContextMenuShown = false;\n                                      console.log('You have clicked the second item!');\n                                      console.log('The data for this circle is: ' + d);\n                                      dragLine.attr('class', fstyle.transparent);\n                                      self.addLink(newLink);\n                                  }\n                              }\n                          ]\n                          linkContextMenuShown = true;\n                          let linkContextMenu = contextMenu(linkMenu);\n                          console.log('newLinkMenu');\n                          linkContextMenu.apply(this, [d,i,true,\n                                                function() { dragLine.attr('class', fstyle.transparent) }]);\n                      } else {\n                          // between end points but can't make a backbone\n                          if (basepairPossible)\n                            self.addLink(newLink);\n                      }\n            } else {\n                if (basepairPossible)\n                    self.addLink(newLink);\n            }\n\n        }\n    };\n\n    let nodeMousedown = function(d) {\n      console.log(\"nodeMousedown\")\n      if (!d.selected && !ctrlKeydown) {\n        // if this node isn't selected, then we have to unselect every other node\n        deselectAllNodes()\n      }\n\n      if (!shiftKeydown) {\n        // only without shift, toggle select or select\n        if (ctrlKeydown) {\n          toggleSelectNode(d)\n        } else {\n          selectNode(d)\n        }\n      }\n\n      if (shiftKeydown && self.options.editable) {\n        // with shift key and editable continue to draw dragline\n        mousedownNode = d;\n\n        dragLine\n        .attr('class', fstyle.dragLine)\n        .attr('x1', mousedownNode.x)\n        .attr('y1', mousedownNode.y)\n        .attr('x2', mousedownNode.x)\n        .attr('y2', mousedownNode.y);\n\n        d3.event.stopPropagation();\n      }\n    };\n\n    let linkClick = (d) => {\n        if (!shiftKeydown) {\n            return;\n        }\n\n        var invalidLinks = { //'backbone': true,\n                             'fake': true,\n                             'fake_fake': true,\n                             'label_link': true};\n\n        console.log('d.linkType:', d.linkType);\n        if (d.linkType in invalidLinks )\n            return;\n\n        removeLink(d);\n    };\n\n    /* I/O functions */\n    self.toJSON = function toJSON() {\n       var data = {'rnas': self.rnas, 'extraLinks': self.extraLinks};\n            var dataString = JSON.stringify(data, function(key, value) {\n            //remove circular references\n            if (key == 'rna') {\n                return;\n            } else {\n                return value;\n            }\n       }, '\\t');\n       return dataString;\n    };\n\n    self.fromJSON = function(jsonString) {\n        var rnas, extraLinks;\n\n        try{\n            var data = JSON.parse(jsonString);\n            rnas = data.rnas;\n            extraLinks = data.extraLinks;\n        } catch(err) {\n            throw err;\n        }\n\n        for (var uid in rnas) {\n            if (rnas[uid].type == 'rna') {\n                r = new RNAGraph();\n\n                r.seq = rnas[uid].seq;\n                r.dotbracket = rnas[uid].dotbracket;\n                r.circular = rnas[uid].circular;\n                r.pairtable = rnas[uid].pairtable;\n                r.uid = rnas[uid].uid;\n                r.structName = rnas[uid].structName;\n                r.nodes = rnas[uid].nodes;\n                r.links = rnas[uid].links;\n                r.rnaLength = rnas[uid].rnaLength;\n                r.elements = rnas[uid].elements;\n                r.nucsToNodes = rnas[uid].nucsToNodes;\n                r.pseudoknotPairs = rnas[uid].pseudoknotPairs;\n            } else {\n                r = new ProteinGraph();\n                r.size = rnas[uid].size;\n                r.nodes = rnas[uid].nodes;\n                r.uid = rnas[uid].uid;\n            }\n\n            self.addRNAJSON(r, false);\n        }\n\n        extraLinks.forEach(function(link) {\n            self.extraLinks.push(link);\n        });\n\n        recalculateGraph();\n        self.update();\n    };\n\n    self.addRNA = function(structure, passedOptions = {}) {\n        let rnaJson = createInitialLayout(structure, passedOptions);\n        let centerView = false;\n\n        /*\n         * Code to display the JSONs representing the structure\n         *\n        rnaJson.nodes[0].rna = null;\n        rnaJson.nodes[0].nextNode = null;\n\n        rnaJson.links[0].source = null;\n        rnaJson.links[0].target = null;\n\n        console.log(rnaJson.nodes[0]);\n        console.log(rnaJson.links[0]);\n        console.log(JSON.stringify(rnaJson.nodes[0],null,2));\n        console.log(JSON.stringify(rnaJson.links[0],null,2));\n        */\n\n        if ('extraLinks' in passedOptions) {\n            // presumably the passed in links are within the passed molecule\n            let newLinks = self.addExternalLinks(rnaJson, passedOptions.extraLinks);\n\n            self.extraLinks = self.extraLinks.concat(newLinks);\n        }\n\n        if ('centerPos' in passedOptions)\n            self.addRNAJSON(rnaJson, {centerPos: passedOptions.centerPos,\n                                      centerView: false})\n        else if ('avoidOthers' in passedOptions)\n            self.addRNAJSON(rnaJson, {avoidOthers: passedOptions.avoidOthers});\n        else\n            self.addRNAJSON(rnaJson, {centerView: passedOptions.centerView});\n\n        return rnaJson;\n    };\n\n    self.addRNAJSON = function(rnaGraph,\n     { avoidOthers = false,\n      centerPos = null,\n      centerView = true}\n    ) {\n        // Add an RNAGraph, which contains nodes and links as part of the\n        // structure\n        // Each RNA will have uid to identify it\n        // when it is modified, it is replaced in the global list of RNAs\n        //\n        var maxX, minX;\n        //console.log('centerView:', centerView);\n\n        if (centerPos != null) {\n            // center the newly created RNA at a given position\n            let totalX = 0;\n            let totalY = 0;\n            let nodeCount = 0;\n\n            rnaGraph.nodes.forEach(function(node) {\n                totalX += node.x;\n                totalY += node.y;\n                nodeCount += 1;\n            });\n\n            if (nodeCount > 0) {\n                // center the nodes at centerPos\n\n                rnaGraph.nodes.forEach(function(node) {\n                    node.x = node.x + centerPos[0] - totalX / nodeCount;\n                    node.y = node.y + centerPos[1] - totalY / nodeCount;\n\n                    node.px = node.x;\n                    node.py = node.y;\n                });\n            }\n        }\n\n        if (avoidOthers) {\n            if (self.graph.nodes.length > 0)\n                maxX = d3.max(self.graph.nodes.map(function(d) { return d.x; }));\n            else\n                maxX = 0;\n\n            minX = d3.min(rnaGraph.nodes.map(function(d) { return d.x; }));\n\n            rnaGraph.nodes.forEach(function(node) {\n                node.x += (maxX - minX) + 20;\n                node.px += (maxX - minX);\n            });\n        }\n\n        rnaGraph.nodes.forEach(function(node) {\n            node.rna = rnaGraph;\n        });\n\n        self.rnas[rnaGraph.uid] = rnaGraph;\n        recalculateGraph();\n\n        self.update();\n\n        if (centerView)\n            self.centerView();\n\n        return rnaGraph;\n    };\n\n    self.addNodes = function addNodes(json) {\n        // add a new set of nodes from a json file\n\n        // Resolve the sources and targets of the links so that they\n        // are not just indeces into an array\n        json.links.forEach(function(entry) {\n            if (typeof entry.source == 'number') entry.source = json.nodes[entry.source];\n            if (typeof entry.target == 'number') entry.target = json.nodes[entry.target];\n        });\n\n        // Get the maximum x and y values of the current graph\n        // so that we don't place a new structure on top of the\n        // old one\n        if (self.graph.nodes.length > 0) {\n            maxX = d3.max(self.graph.nodes.map(function(d) {return d.x;}));\n            maxY = d3.max(self.graph.nodes.map(function(d) {return d.y;}));\n        } else {\n            maxX = 0;\n            maxY = 0;\n        }\n\n        json.nodes.forEach(function(entry) {\n            if (!(entry.rna.uid in self.rnas)) {\n                self.rnas[entry.rna.uid] = entry.rna;\n            }\n\n            entry.x += maxX;\n            //entry.y += maxY;\n\n            entry.px += maxX;\n            //entry.py += maxY;\n        });\n\n        r = new RNAGraph('','');\n        r.nodes = json.nodes;\n        r.links = json.links;\n\n        //self.addRNA(r);\n        recalculateGraph();\n\n        self.update();\n        self.centerView();\n    };\n\n    self.clearNodes = () => {\n        self.graph.nodes = [];\n        self.graph.links = [];\n\n        self.rnas = {};\n        self.extraLinks = [];\n\n        self.update();\n    };\n\n    self.addLink =  function(newLink) {\n        // this means we have a new json, which means we have\n        // to recalculate the structure and change the colors\n        // appropriately\n        //\n        console.log('adding new link');\n        if (newLink.source.rna == newLink.target.rna) {\n            // must be a basepair\n            let r = newLink.source.rna;\n\n            r.pairtable[newLink.source.num] = newLink.target.num;\n            r.pairtable[newLink.target.num] = newLink.source.num;\n\n            updateRnaGraph(r);\n\n        } else {\n            //Add an extra link\n            console.log('intermolecule');\n            newLink.linkType = 'intermolecule';\n            self.extraLinks.push(newLink);\n        }\n        recalculateGraph();\n        self.update();\n    };\n\n    self.addExternalLinks = function(rnaJson, externalLinks) {\n        let newLinks = [];\n\n        for (let i = 0; i < externalLinks.length; i++) {\n            let newLink = {linkType: 'external', value: 1, uid: slugid.nice(),\n                source: null, target: null};\n            // check if the source node is an array\n            if (Object.prototype.toString.call(externalLinks[i][0]) === '[object Array]') {\n                for (let j = 0; j < rnaJson.nodes.length; j++) {\n                    if ('nucs' in rnaJson.nodes[j]) {\n                        if (rnaJson.nodes[j].nucs.equals(externalLinks[i][0])) {\n                            newLink.source = rnaJson.nodes[j];\n                            break;\n                        }\n                    }\n                }\n            } else {\n                for (let j = 0; j < rnaJson.nodes.length; j++) {\n                    if (rnaJson.nodes[j].num == externalLinks[i][0]) {\n                        newLink.source = rnaJson.nodes[j];\n                    }\n                }\n            }\n\n            // check if the target node is an array\n            if (Object.prototype.toString.call(externalLinks[i][1]) === '[object Array]') {\n                for (let j = 0; j < rnaJson.nodes.length; j++) {\n                    if ('nucs' in rnaJson.nodes[j]) {\n                        if (rnaJson.nodes[j].nucs.equals(externalLinks[i][1])) {\n                            newLink.target = rnaJson.nodes[j];\n                        }\n                    }\n                }\n            } else {\n                for (let j = 0; j < rnaJson.nodes.length; j++) {\n                    if (rnaJson.nodes[j].num == externalLinks[i][1]) {\n                        newLink.target = rnaJson.nodes[j];\n                    }\n                }\n            }\n\n            if (newLink.source == null || newLink.target == null) {\n                console.log('ERROR: source or target of new link not found:', newLink, externalLinks[i]);\n                continue;\n            }\n\n            newLinks.push(newLink);\n        }\n\n        return newLinks;\n    };\n\n    self.getStructuresDotBracket = function() {\n        console.log('self.rnas:', self.rnas);\n        let sequence = [];\n        let currIdx = 1;\n        let nodeIdxs = {};\n        let breaks = [];\n        let pairtable = [];\n\n        // add the nodes\n        for (let uid in self.rnas) {\n            let rna = self.rnas[uid];\n\n            for (let j = 0; j < rna.nodes.length; j++) {\n                let node = rna.nodes[j];\n\n                if (node.nodeType != 'nucleotide')\n                    continue;\n\n                console.log('node:', node);\n                nodeIdxs[node.uid] = currIdx;\n                currIdx += 1;\n\n                sequence.push(node.name);\n            }\n\n            breaks.push(currIdx);\n        }\n\n        pairtable = [currIdx-1]\n        for (let i = 0; i < currIdx; i++)\n            pairtable.push(0)\n\n        // add the links\n        for (let uid in self.rnas) {\n            let rna = self.rnas[uid];\n\n            for (let j = 0; j < rna.links.length; j++) {\n                let link = rna.links[j];\n\n                if (link.linkType != 'basepair')\n                    continue;\n\n                let idx1 = nodeIdxs[link.source.uid];\n                let idx2 = nodeIdxs[link.target.uid];\n                pairtable[idx1] = idx2;\n                pairtable[idx2] = idx1;\n            }\n        }\n\n        for (let i = 0; i < self.extraLinks.length; i++) {\n            let link = self.extraLinks[i];\n\n            let idx1 = nodeIdxs[link.source.uid];\n            let idx2 = nodeIdxs[link.target.uid];\n\n            pairtable[idx1] = idx2;\n            pairtable[idx2] = idx1;\n        }\n\n        let structure = rnaUtilities.pairtableToDotbracket(pairtable).split('');\n\n        for (let i = 0; i < breaks.length - 1; i++) {\n            console.log('breaks[i]:', breaks[i]);\n            sequence.splice(breaks[i] + i - 1, 0, '&');\n            structure.splice(breaks[i] + i - 1, 0, '&');\n        }\n\n        console.log('sequence:', sequence, sequence.join(''));\n        console.log('structure:', structure, structure.join(''));\n        return [sequence.join(''), structure.join('')];\n    };\n\n    /* APIs */\n    self.startAnimation = function() {\n      self.options.animation = true;\n      vis.selectAll('g.gnode')\n        .call(drag);\n      self.force.start();\n    };\n\n    self.stopAnimation = function() {\n      self.options.animation = false;\n      vis.selectAll('g.gnode')\n           .on('mousedown.drag', null);\n      self.force.stop();\n    };\n\n    self.resumeForce = function() {\n        if (self.options.animation)\n            self.force.resume();\n    };\n\n    self.setFriction = function(value) {\n      self.force.friction(value);\n      self.resumeForce();\n    };\n\n    self.setCharge = function(value) {\n      self.force.charge(value);\n      self.resumeForce();\n    };\n\n    self.setGravity = function(value) {\n      self.force.gravity(value);\n      self.resumeForce();\n    };\n\n    self.setPseudoknotStrength = function(value) {\n      self.linkStrengths.pseudoknot = value;\n      self.update();\n    };\n\n    self.displayNumbering = function(value) {\n      self.displayParameters.displayNumbering = value;\n      updateStyle();\n    };\n\n    self.displayNodeOutline = function(value) {\n      self.displayParameters.displayNodeOutline = value;\n      updateStyle();\n    };\n\n    self.displayNodeLabel = function(value) {\n      self.displayParameters.displayNodeLabel = value;\n      updateStyle();\n    };\n\n    self.displayLinks = function(value) {\n      self.displayParameters.displayLinks = value;\n      updateStyle();\n    };\n\n    self.displayPseudoknotLinks = function(value) {\n      self.displayParameters.displayPseudoknotLinks = value;\n      updateStyle();\n    };\n\n    self.displayProteinLinks = function(value) {\n      self.displayParameters.displayProteinLinks = value;\n      updateStyle();\n    };\n\n    self.displayDirectionArrows = function(value) {\n      self.displayParameters.displayDirectionArrows = value;\n      updateStyle();\n    };\n}\n","import {RNAGraph} from './rnagraph.js';\n\nimport {simpleXyCoordinates} from './simplernaplot.js';\nimport {NAView} from './naview/naview.js'\n\nimport fstyle from './fornac.css';\n\nexport function rnaPlot(passedOptions = {}) {\n    var options = {\n        'width': 300,\n        'height': 300,\n        'nucleotideRadius': 5,\n        'rnaEdgePadding': 1,     // how far the leftmost, rightmost, topmost and bottomost\n                                // nucleotides are from the edge of the plot\n        'labelInterval': 10,\n        'showNucleotideLabels': true,\n        'startNucleotideNumber': 1,\n        'bundleExternalLinks': false,\n\n        'rnaLayout': 'simple', // simple or naview\n        'namePosition': '0 0' // for x and y either 0, 0.5 or 1\n    };\n    var options = Object.assign(options, passedOptions);\n\n    var xScale, yScale;\n\n    function createTransformToFillViewport(xValues, yValues) {\n        // create transform that will scale the x and y values so that\n        // they fill the available viewport\n        let xExtent = d3.extent(xValues);\n        let yExtent = d3.extent(yValues);\n\n        // add the radius of the nucleotides\n        xExtent[0] -= options.nucleotideRadius + options.rnaEdgePadding;\n        yExtent[0] -= options.nucleotideRadius + options.rnaEdgePadding;\n\n        xExtent[1] += options.nucleotideRadius + options.rnaEdgePadding;\n        yExtent[1] += options.nucleotideRadius + options.rnaEdgePadding;\n\n        // find out how wide and height the molecule\n        var xRange = xExtent[1] - xExtent[0];\n        var yRange = yExtent[1] - yExtent[0];\n\n        // how much wider / taller is it than the available viewport\n        var xExtra = xRange - options.width;\n        var yExtra = yRange - options.height;\n\n        // once we have a scale for one dimension, we can create the scale for the other\n        // keeping the same expansion / shrinking ratio\n        function createOtherScale(firstScale, newDomain, newRange) {\n            var scaleFactor = (firstScale.range()[1] - firstScale.range()[0]) /\n                              (firstScale.domain()[1] - firstScale.domain()[0]);\n            var newWidth = (newDomain[1] - newDomain[0]) * scaleFactor\n            var newMargin = ((newRange[1] - newRange[0]) - newWidth) / 2;\n\n            return {'scaleFactor': scaleFactor,\n                    'scale': d3.scale.linear()\n                                     .domain(newDomain)\n                                     .range([newRange[0] + newMargin, newRange[1] - newMargin])};\n        }\n\n        var ret;\n\n        if (xExtra > yExtra) {\n            // we have to shrink more in the x-dimension than the y\n            xScale = d3.scale.linear()\n            .domain(xExtent)\n            .range([0, options.width])\n\n            ret = createOtherScale(xScale, yExtent, [0, options.height]);\n            yScale = ret.scale;\n        } else {\n            // we have to shrink more in the x-dimension than the y\n            yScale = d3.scale.linear()\n            .domain(yExtent)\n            .range([0, options.height])\n\n            ret = createOtherScale(yScale, xExtent, [0, options.width]);\n            xScale = ret.scale;\n        }\n\n        var xOffset = xScale.range()[0] - xScale.domain()[0];\n        var yOffset = yScale.range()[0] - yScale.domain()[0];\n\n        return 'translate(' + -(xScale.domain()[0] * ret.scaleFactor - xScale.range()[0]) +\n                  ',' + -(yScale.domain()[0] * ret.scaleFactor - yScale.range()[0]) + ')' +\n            'scale(' + ret.scaleFactor + ')';\n    }\n\n    function createNucleotides(selection, nucleotideNodes) {\n        // create groupings for each nucleotide and label\n        var gs = selection\n        .selectAll('.gnode')\n        .data(nucleotideNodes)\n        .enter()\n        .append('svg:g')\n        .classed('gnode', true)\n        .attr('transform', function(d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n        });\n\n        var circles = gs.append('svg:circle')\n        .classed(fstyle.node, true)\n        .attr('node_type', 'nucleotide')\n        .attr('base_type', (d) => { if (d.name) { return d.name.toLowerCase(); }})\n        .attr('r', options.nucleotideRadius)\n\n\n        if (options.showNucleotideLabels) {\n            var nucleotideLabels = gs.append('svg:text')\n            .text(function(d) { return d.name; })\n            .classed(fstyle.nodeLabel, true)\n            .append('svg:title')\n            .text(function(d) { return d.struct_name + ':' + d.num; });\n        }\n    }\n\n    function createLabels(selection, labelNodes) {\n        // create groupings for each nucleotide and label\n\n        var gs = selection\n        .selectAll()\n        .data(labelNodes)\n        .enter()\n        .append('svg:g')\n        .classed('gnode', true)\n        .attr('transform', function(d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n        });\n\n        var circles = gs.append('svg:circle')\n        .classed(fstyle.node, true)\n        .attr('node_type', 'label')\n        .attr('r', options.nucleotideRadius)\n\n        var numberLabels = gs.append('svg:text')\n        .classed(fstyle.nodeLabel, true)\n        .text(function(d) { return d.name; })\n    }\n\n    function createName(selection, name) {\n        let nameLabel = selection.append('svg:text')\n        //.attr('dy', -10)\n        .classed(fstyle.plotLabel, true)\n        .text(name);\n\n        let xyPos = options.namePosition.split(\" \", 2) // 0 0.5 1\n        let xy = []\n        let textBBox = nameLabel.node().getBBox()\n        let textSize = [textBBox.width, textBBox.height]\n        let plotSize = [options.width, options.height]\n\n        for (let p in [0, 1]) {\n            switch (xyPos[p]) {\n                case '0':\n                    xy[p] = textSize[p] / 2\n                    break;\n                case '1':\n                    xy[p] = plotSize[p] - textSize[p] / 2\n                    break;\n                case '0.5':\n                    xy[p] = plotSize[p] / 2\n                    break;\n            }\n        }\n        nameLabel.attr('x', xy[0]).attr('y', xy[1])\n    }\n\n    function makeExternalLinksBundle(selection, links) {\n        var nodesDict = {};\n        var linksList = [];\n        links = links.filter(function(d) { return d.linkType == 'correct' || d.linkType == 'incorrect' || d.linkType == 'extra'; });\n\n        selection.selectAll('[link-type=extra]')\n        .remove();\n\n\n        for (var i = 0; i < links.length; i++) {\n            if (links[i].source === null || links[i].target === null)\n                continue;\n\n            nodesDict[links[i].source.uid] = links[i].source;\n            nodesDict[links[i].target.uid] = links[i].target;\n\n            linksList.push({'source': links[i].source.uid, 'target': links[i].target.uid, 'linkType': links[i].linkType, 'extraLinkType': links[i].extraLinkType}) ;\n        }\n\n        var fbundling = d3.ForceEdgeBundling().nodes(nodesDict).edges(linksList)\n        .compatibility_threshold(0.8).step_size(0.2);\n        var results   = fbundling();\n\n        var d3line = d3.svg.line()\n            .x(function(d){return d.x;})\n            .y(function(d){return d.y;})\n            .interpolate('linear');\n\n        for (var i = 0; i < results.length; i++) {\n            var edge_subpoint_data = results[i];\n            // for each of the arrays in the results\n            // draw a line between the subdivions points for that edge\n\n            selection.append('path').attr('d', d3line(edge_subpoint_data))\n            .style('fill', 'none')\n            .attr('link-type', function(d) { return linksList[i].linkType; })\n            .attr('extra-link-type', function(d) { return linksList[i].extraLinkType; })\n            .style('stroke-opacity',0.4); //use opacity as blending\n        }\n\n    }\n\n    function createLinks(selection, links) {\n        links = links.filter(function(d) { return d.source !== null && d.target !== null; });\n        var gs = selection.selectAll('.link')\n        .data(links)\n        .enter()\n        .append('svg:line')\n        .attr('x1', function(d) { return d.source.x; })\n        .attr('x2', function(d) { return d.target.x; })\n        .attr('y1', function(d) { return d.source.y; })\n        .attr('y2', function(d) { return d.target.y; })\n        .attr('link-type', function(d) { return d.linkType; })\n        .attr('extra-link-type', function(d) { return d.extraLinkType; })\n        .classed('link', true)\n        .classed(fstyle.link, true)\n    }\n\n    function chart(selection) {\n        selection.each(function(data) {\n            let plot = d3.select(this).append('g')\n            .classed(fstyle.plot, true)\n\n            // data should be a dictionary containing at least a structure\n            // and possibly a sequence\n            let rg = new RNAGraph(data.sequence, data.structure, data.name, options.startNucleotideNumber)\n                    .recalculateElements()\n                    .elementsToJson()\n                    .addName(data.name);\n\n            data.rnaGraph = rg;\n            // calculate the position of each nucleotide\n            // the positions of the labels will be calculated in\n            // the addLabels function\n            let positions = [];\n\n            if (options.rnaLayout === 'naview') {\n                var naview = new NAView();\n                var naViewPositions = naview.naview_xy_coordinates(rg.pairtable);\n\n                for (var i = 0; i < naViewPositions.nbase; i++) {\n                    positions.push([naViewPositions.x[i], naViewPositions.y[i]]);\n                }\n            } else {\n                positions = simpleXyCoordinates(rg.pairtable);\n            }\n\n            rg.addPositions('nucleotide', positions)\n            //.reinforceStems()\n            //.reinforceLoops()\n            //.addExtraLinks(data.extraLinks)\n            .addLabels(options.startNucleotideNumber, options.labelInterval);\n\n            // create a transform that will fit the molecule to the\n            // size of the viewport (canvas, svg, whatever)\n            let fillViewportTransform = createTransformToFillViewport(\n                rg.nodes.map(function(d) { return d.x; }),\n                rg.nodes.map(function(d) { return d.y; })\n            );\n            plot.attr('transform', fillViewportTransform);\n\n            let nucleotideNodes = rg.nodes.filter(function(d) {\n                return d.nodeType == 'nucleotide';\n            });\n\n            let labelNodes = rg.nodes.filter(function(d) {\n                return d.nodeType == 'label';\n            });\n\n            let links = rg.links;\n\n            createLinks(plot, links);\n            createNucleotides(plot, nucleotideNodes);\n            createLabels(plot, labelNodes);\n            createName(d3.select(this), data.name);\n\n            if (options.bundleExternalLinks) {\n                makeExternalLinksBundle(plot, links);\n            }\n\n        });\n    }\n\n    chart.width = function(_) {\n        if (!arguments.length) return options.width;\n        options.width = _;\n        return chart;\n    };\n\n    chart.height = function(_) {\n        if (!arguments.length) return options.height;\n        options.height = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.rnaEdgePadding = function(_) {\n        if (!arguments.length) return options.rnaEdgePadding;\n        options.rnaEdgePadding = _;\n        return chart;\n    };\n\n    chart.nucleotideRadius = function(_) {\n        if (!arguments.length) return options.nucleotideRadius;\n        options.nucleotideRadius = _;\n        return chart;\n    };\n\n    chart.labelInterval = function(_) {\n        if (!arguments.length) return options.labelInterval;\n        options.labelInterval = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.startNucleotideNumber = function(_) {\n        if (!arguments.length) return options.startNucleotideNumber;\n        options.startNucleotideNumber = _;\n        return chart;\n    };\n\n    chart.bundleExternalLinks = function(_) {\n        if (!arguments.length) return options.bundleExternalLinks;\n        options.bundleExternalLinks = _;\n        return chart;\n    };\n\n    chart.rnaLayout = function(_) {\n        if (!arguments.length) return options.rnaLayout;\n        options.rnaLayout = _;\n        return chart;\n    };\n\n    chart.namePosition = function(_) {\n        if (!arguments.length) return options.namePosition;\n        options.namePosition = _;\n        return chart;\n    };\n\n    return chart;\n}\n","import {rnaPlot} from './rnaplot.js';\n\nexport function rnaTreemap(passedOptions = {}) {\n    var options = {\n        'width': 300,\n        'height': 300,\n        'nucleotideRadius': 5,\n        'rnaEdgePadding': 1,     // how far the leftmost, rightmost, topmost and bottomost\n                                // nucleotides are from the edge of the plot\n        'labelInterval': 10,\n        'showNucleotideLabels': true,\n        'startNucleotideNumber': 1,\n        'bundleExternalLinks': false,\n\n        'rnaLayout': 'simple', // simple or naview\n        'namePosition': '0 0', // for x and y either 0, 0.5 or 1\n    };\n\n    var options = Object.assign(options, passedOptions);\n\n    function rnaTreemapNode(selection) {\n        // create a background rectangle for each RNA structure\n        selection.each(function(d) {\n            d3.select(this)\n            .attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')' })\n            .append('rect')\n            .attr('fill', 'transparent')\n            .attr('width', function(d) { return Math.max(0, d.dx); })\n            .attr('height', function(d) { return Math.max(0, d.dy); })\n\n            // draw the actual RNA structure\n            var chart = rnaPlot(options)\n            .width( Math.max(0, d.dx))\n            .height( Math.max(0, d.dy))\n\n            if ('structure' in d) d3.select(this).call(chart)\n        });\n    }\n\n    var chart = function(selection) {\n        selection.each(function(data) {\n            console.log('data:', data)\n            // initialize the treemap structure\n            // sample input\n            // { 'name': 'blah',\n            // 'children: [{'structure': '..((..))',\n            //               'sequence': 'ACCGGCC',\n            //               'size': 50}]\n            // }\n            var treemap = d3.layout.treemap()\n            .size([options.width, options.height])\n            .sticky(false)\n            .value(function(d) { return d.size; });\n\n            // create a new <g> for each node in the treemap\n            // this may be a little redundant, since we expect the calling\n            // selection to contain their own g elements\n            var gEnter = d3.select(this)\n                .append('g')\n                .classed('rnatreemap', true)\n            var treemapGnodes = gEnter.datum(data).selectAll('.treemapnode')\n                .data(treemap.nodes)\n                .enter()\n                .append('g')\n                .classed('treemapnode', true)\n                .call(rnaTreemapNode);\n        });\n    };\n\n    chart.width = function(_) {\n        if (!arguments.length) return options.width;\n        options.width = _;\n        return chart;\n    };\n\n    chart.height = function(_) {\n        if (!arguments.length) return options.height;\n        options.height = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.rnaEdgePadding = function(_) {\n        if (!arguments.length) return options.rnaEdgePadding;\n        options.rnaEdgePadding = _;\n        return chart;\n    };\n\n    chart.nucleotideRadius = function(_) {\n        if (!arguments.length) return options.nucleotideRadius;\n        options.nucleotideRadius = _;\n        return chart;\n    };\n\n    chart.labelInterval = function(_) {\n        if (!arguments.length) return options.labelInterval;\n        options.labelInterval = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.startNucleotideNumber = function(_) {\n        if (!arguments.length) return options.startNucleotideNumber;\n        options.startNucleotideNumber = _;\n        return chart;\n    };\n\n    chart.bundleExternalLinks = function(_) {\n        if (!arguments.length) return options.bundleExternalLinks;\n        options.bundleExternalLinks = _;\n        return chart;\n    };\n\n    chart.rnaLayout = function(_) {\n        if (!arguments.length) return options.rnaLayout;\n        options.rnaLayout = _;\n        return chart;\n    };\n\n    chart.namePosition = function(_) {\n        if (!arguments.length) return options.namePosition;\n        options.namePosition = _;\n        return chart;\n    };\n\n    chart.zoom = function(_) {\n        if (!arguments.length) return options.zoom;\n        options.zoom = _;\n        return chart;\n    };\n\n    return chart;\n}\n","export {FornaContainer} from './fornac.js';\nexport {rnaPlot} from './rnaplot.js';\nexport {rnaTreemap} from './rnatreemap.js';\n\nexport {RNAUtilities, ColorScheme} from './rnautils.js';\n//export {ProteinGraph, RNAGraph, moleculesToJson} from './rnagraph.js';\n//export {simpleXyCoordinates} from './simplernaplot.js';"],"names":["Loop","Region","Connection","loop","region","start","end","xrad","yrad","angle","extruded","broken","_isNull","prototype","isNull","setNull","getLoop","setLoop","getRegion","setRegion","getStart","setStart","getEnd","setEnd","getXrad","setXrad","getYrad","setYrad","getAngle","setAngle","isExtruded","setExtruded","isBroken","setBroken","nconnection","connections","_connections","number","depth","mark","x","y","radius","getNconnection","setNconnection","setConnection","i","c","getConnection","require","addConnection","push","getNumber","setNumber","getDepth","setDepth","isMark","setMark","getX","setX","getY","setY","getRadius","setRadius","_start1","_end1","_start2","_end2","getStart1","setStart1","start1","getEnd1","setEnd1","end1","getStart2","setStart2","start2","getEnd2","setEnd2","end2","ArrowIcon","d3","slugid","contextMenu","menu","opts","previouslyMouseUp","clickAway","uid","nice","rootElement","orientation","initialPos","parentStart","openCallback","closeCallback","onOpen","onClose","pos","selectAll","data","enter","append","classed","select","on","console","log","style","index","pMouseUp","arguments","length","undefined","clickAwayFunc","elm","contextMenuPos","mousePos","currentThis","mouse","openChildMenuUid","html","list","d","event","preventDefault","stopPropagation","attr","ret","divider","disabled","action","title","error","children","childUid","boundingRect","getBoundingClientRect","childrenContextMenu","left","window","pageXOffset","top","pageYOffset","width","apply","contextMenuSelection","pageX","pageY","node","innerWidth","numberSort","a","b","arraysEqual","RNAUtilities","self","bracketLeft","split","bracketRight","inverseBrackets","bracket","res","maximumMatching","pt","n","TURN","mm","Array","j","maximum","l","Math","max","backtrackMaximumMatching","oldPt","map","mmBt","q","leftPart","enclosedPart","dotbracketToPairtable","dotbracket","Number","valueOf","stack","inverseBracketLeft","inverseBracketRight","ni","pop","key","insertIntoStack","k","deleteFromStack","pairtableToDotbracket","seen","findUnmatched","from","to","toRemove","unmatched","origFrom","origTo","concat","removePseudoknotsFromPairtable","newPt","removed","ptToElements","level","dotBracketBreaks","elements","u5","u3","sort","external","right","indexOf","m","combined","s","rnaUtilities","ColorScheme","colorsText","parseRange","rangeText","parts","nums","parts1","parseInt","parseColorText","colorText","lines","currMolecule","counter","colorsJson","colorValues","range","domainValues","trim","slice","words","isNaN","search","partsRight","domain","color","min","normalizeColors","value","moleculeName","minNum","MAX_VALUE","maxNum","MIN_VALUE","resnum","String","replace","ProteinGraph","structName","size","type","nodes","sqrt","links","addUids","uids","getUids","RNAGraph","seq","startNumber","circularizeExternal","circular","pseudoknotPairs","nucsToNodes","nucleotideNodes","filter","nodeType","computePairtable","pairtable","removeBreaks","targetString","breaks","breakIndex","substring","seqBreaks","rnaLength","addPositions","positions","labelNodes","breakNodesToFakeNodes","_loop","_i","elemType","getPositions","reinforceStems","relevantElements","allNucs","nucs","addFakeNode","reinforceLoops","filterNucs","newNode1","px","py","newNode2","updateLinkUids","source","target","linkLength","nodeWidth","tan","fakeNodeUid","newNode","newX","newY","coordsCounted","cos","floor","ia","fromNode","connectFakeNodes","filterOutNonFakeNodes","fakeNodes","linked","thisNode","thisNuc","JSON","stringify","distance","addExtraLinks","extraLinks","getNodeFromNucleotides","newLink","linkType","elementsToJson","elemTypes","nodeName","prevNode","nextNode","addLabels","labelInterval","prevVec","nextVec","num","combinedVec","vecLength","normedVec","offsetVec","recalculateElements","removePseudoknots","externalLoop","eloop","prev","hloop","numGreater","reassignLinkUids","addPseudoknots","addName","name","Object","toString","call","equals","moleculesToJson","moleculesJson","graphs","molecules","molecule","rg","ss","header","link","simpleXyCoordinates","pair_table","INIT_ANGLE","INIT_X","INIT_Y","RADIUS","len","alpha","loop_size","stack_size","lp","stk","PIHALF","PI","count","r","bubble","i_old","partner","start_k","start_l","fill","ladder","begin","v","diff","polygon","remember","poss","sin","Radloop","loopnumber","next","getLoopnumber","setLoopnumber","getNext","setNext","getPrev","setPrev","Base","mate","extracted","getMate","setMate","isExtracted","setExtracted","NAView","ANUM","MAXITER","bases","nbase","nregion","loop_count","root","loops","regions","rlphead","lencut","RADIUS_REDUCTION_FACTOR","angleinc","_h","HELIX_FACTOR","BACKBONE_DISTANCE","naview_xy_coordinates","read_in_bases","find_regions","construct_loop","find_central_loop","traverse_loop","npairs","nb1","ibase","retloop","cp","rp","rlp","maxconn","maxdepth","determine_depths","bind","anchor_connection","xs","ys","xe","ye","xn","yn","xc","yc","xo","yo","astart","aend","cpnext","acp","cpprev","ic","da","maxang","icstart","icend","icmiddle","icroot","done","done_all_connections","rooted","sign","midx","midy","nrx","nry","mx","my","vx","vy","dotmv","nmidx","nmidy","icstart1","icup","icdown","icnext","direction","dan","dx","dy","rr","cpx","cpy","cpnextx","cpnexty","cnx","cny","rcn","rc","lnx","lny","rl","ac","acn","sx","sy","dcp","imaxloop","indice","atan2","set_radius","determine_radius","connected_connection","find_ic_middle","asin","abs","construct_extruded_segment","generate_region","mindit","ci","dt","sumn","sumd","dit","imindit","rt2_2","aend1","aend2","aave","a1","a2","dac","nstart","nend","collision","construct_circle_segment","minf2","maxf2","find_center_for_arc","h","hhi","hlow","disc","theta","e","phi","iter","acos","noIterationFailureYet","x1","x2","fstyle","FornaContainer","element","passedOptions","options","assign","initialSize","svgW","svgH","linkStrengths","displayParameters","colorScheme","customColors","rnas","mousedownLink","mousedownNode","mouseupNode","linkContextMenuShown","resetMouseVars","graph","array","editable","animation","shiftKeydown","ctrlKeydown","keydown","keyCode","getStructuresDotBracket","centerView","zoomable","disableZooming","enableBrushing","keyup","enableZooming","disableBrushing","backgroundMenu","canvasMousePos","xScale","invert","yScale","addRNA","nodeMenu","deleteNode","changeNode","insertNodeBeforeOrAfter","nodeContextMenu","backgroundContextMenu","remove","svg","each","focus","mouseEventHelper","mpos","vis","dragLine","transparent","deselectAllNodes","plot","visLinks","visNodes","scale","linear","zoomer","behavior","zoom","scaleExtent","translate","toggleSelectNode","selected","selectedNode","p","selectNode","selectedNodes","brusher","brush","extent","clear","force","layout","charge","middleCharge","otherCharge","friction","linkDistance","linkDistanceMultiplier","linkStrength","other","gravity","chargeDistance","drag","sourceEvent","d1","fixed","resumeForce","createInitialLayout","structure","sequence","rnaJson","naview","naViewPositions","createNewNodes","gnodesEnter","previouslySelected","rna","transition","duration","ease","nodeMousedown","nodeMouseup","labelAndProteinNodes","directionArrow","text","labelsEnter","nodeLabel","createNewLinks","linksEnter","linkLines","linkClick","drawDirectionArrow","magnitude","endPoint","startPoint","nodeStroke","parseFloat","nodeStrokeWidth","lengthMult","directionArrowSize","arrowWidth","directionArrowWidth","u","arrowTip","path","realLinkFilter","recalculateGraph","uidsToNodes","forEach","fakeLinks","linkIndex","splice","_ret","update","allLinks","elementKey","exit","gnodes","realNodes","geom","quadtree","collide","nx1","nx2","ny1","ny2","quad","y1","y2","point","visit","changeColorScheme","updateStyle","transitionRNA","newStructure","nextFunction","transitionDuration","newRNAJson","newNodes","endall","callback","setTimeout","afterAnimation","newLinks","getBoundingBoxTransform","minX","minY","maxX","maxY","maxRadius","molWidth","molHeight","widthRatio","heightRatio","minRatio","maxNodeRadius","newMolWidth","newMolHeight","xTrans","yTrans","bbTransform","setSize","offsetWidth","offsetHeight","setOutlineColor","addCustomColors","json","addCustomColorsText","customColorsText","cs","newColorScheme","proteinNodes","circles","ordinal","category10","interpolate","interpolateLab","changeColors","moleculeColors","hasOwnProperty","val","displayNumbering","displayNodeOutline","displayNodeLabel","displayLinks","displayPseudoknotLinks","displayProteinLinks","displayAllLinks","displayDirectionArrows","referenceNode","newNodeNum","newDotbracket","newSequence","newPositions","newRNA","positionOffset","newUids","pair","updateRnaGraph","nucleotidePositions","labelPositions","removeBackBoneLink","sequence1","sequence2","rnaDotBracket","dotBracket1","dotBracket2","positions1","positions2","uids1","uids2","rna1","rna2","removeLink","extraLinkIndex","addBackBoneLink","dotbracket1","dotbracket2","seq1","seq2","newSeq","toAddInternal","toAddExternal","toDelete","newRna","nudge","backbonePossible","basepairPossible","linkMenu","addLink","linkContextMenu","invalidLinks","toJSON","dataString","fromJSON","jsonString","parse","err","addRNAJSON","addExternalLinks","centerPos","avoidOthers","rnaGraph","_ref","_ref$avoidOthers","_ref$centerPos","_ref$centerView","totalX","totalY","nodeCount","addNodes","entry","clearNodes","externalLinks","currIdx","nodeIdxs","idx1","idx2","join","startAnimation","stopAnimation","stop","resume","setFriction","setCharge","setGravity","setPseudoknotStrength","pseudoknot","rnaPlot","createTransformToFillViewport","xValues","yValues","xExtent","yExtent","nucleotideRadius","rnaEdgePadding","xRange","yRange","xExtra","yExtra","height","createOtherScale","firstScale","newDomain","newRange","scaleFactor","newWidth","newMargin","xOffset","yOffset","createNucleotides","selection","gs","toLowerCase","showNucleotideLabels","nucleotideLabels","struct_name","createLabels","numberLabels","createName","nameLabel","plotLabel","xyPos","namePosition","xy","textBBox","getBBox","textSize","plotSize","makeExternalLinksBundle","nodesDict","linksList","extraLinkType","fbundling","ForceEdgeBundling","edges","compatibility_threshold","step_size","results","d3line","line","edge_subpoint_data","createLinks","chart","startNucleotideNumber","rnaLayout","fillViewportTransform","bundleExternalLinks","_","rnaTreemap","rnaTreemapNode","treemap","sticky","gEnter","treemapGnodes","datum"],"sourceRoot":""}